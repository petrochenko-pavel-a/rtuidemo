(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.RC=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var tp=require("raml-type-bindings");var wb=require("./workbench");var uf=require("./uifactory");var ListenableAction=function(){function ListenableAction(){this.listeners=[]}ListenableAction.prototype.addListener=function(v){if(this.listeners.length==0){this.startListening()}this.listeners.push(v)};ListenableAction.prototype.startListening=function(){};ListenableAction.prototype.stopListening=function(){};ListenableAction.prototype.removeListener=function(v){this.listeners=this.listeners.filter(function(x){return x!=v});if(this.listeners.length==0){this.stopListening()}};ListenableAction.prototype.fireChanged=function(){var e={source:null,target:this,oldValue:null,newValue:null,kind:"changed"};this.listeners.forEach(function(l){return l.valueChanged(e)})};return ListenableAction}();exports.ListenableAction=ListenableAction;var BindingDependentAction=function(_super){__extends(BindingDependentAction,_super);function BindingDependentAction(depBnd){var _this=_super.call(this)||this;_this.depBnd=depBnd;_this.disabled=!_this.isEnabled();return _this}BindingDependentAction.prototype.valueChanged=function(e){var ds=!this.isEnabled();if(ds!=this.disabled){this.disabled=ds;this.fireChanged()}};BindingDependentAction.prototype.startListening=function(){this.depBnd.addListener(this)};BindingDependentAction.prototype.stopListening=function(){this.depBnd.removeListener(this)};return BindingDependentAction}(ListenableAction);exports.BindingDependentAction=BindingDependentAction;var CollectionAction=function(_super){__extends(CollectionAction,_super);function CollectionAction(_valBinding){var _this=_super.call(this,_valBinding.collectionBinding().selectionBinding())||this;_this._valBinding=_valBinding;_this.selection=_valBinding.collectionBinding().selectionBinding();_this.title=_this.defaultTitle();return _this}CollectionAction.prototype.run=function(){};return CollectionAction}(BindingDependentAction);exports.CollectionAction=CollectionAction;var Cancel={title:"Cancel",run:function(){}};var CreateAction=function(_super){__extends(CreateAction,_super);function CreateAction(){return _super.apply(this,arguments)||this}CreateAction.prototype.defaultTitle=function(){return"Create"};CreateAction.prototype.isEnabled=function(){return true};CreateAction.prototype.run=function(){var sr=tp.service.resolvedType(this.selection.type());var ni=tp.service.newInstance(this.selection.type());var nn=new tp.Binding("");nn.context=this.selection;nn.value=ni;nn._type=tp.service.resolvedType({id:"",required:true,type:sr,uniquinessException:{}});var v=this;dialog("Create "+sr.displayName,nn,function(){v._valBinding.add(nn.get())})};return CreateAction}(CollectionAction);exports.CreateAction=CreateAction;var CreateWithConstructorAction=function(_super){__extends(CreateWithConstructorAction,_super);function CreateWithConstructorAction(_valBinding,_constructor){var _this=_super.call(this,_valBinding)||this;_this._valBinding=_valBinding;_this._constructor=_constructor;return _this}CreateWithConstructorAction.prototype.defaultTitle=function(){return"Create"};CreateWithConstructorAction.prototype.isEnabled=function(){return true};CreateWithConstructorAction.prototype.run=function(){var nn=new tp.OperationBinding(this._constructor,this._valBinding);var v=this;dialog(tp.service.caption(nn.type()),nn,function(){nn.execute(function(x){if(x){v._valBinding.add(x)}else{v._valBinding.refresh()}})})};return CreateWithConstructorAction}(CollectionAction);exports.CreateWithConstructorAction=CreateWithConstructorAction;var SetBindingValueAction=function(){function SetBindingValueAction(b,val,label){this.b=b;this.val=val;this.title=tp.service.label(val,b.type());if(label){this.title=label}this.valueChanged(null);b.addPrecomitListener(this)}SetBindingValueAction.prototype.valueChanged=function(e){this.checked=this.b.get()==this.val||!this.b.get()&&this.val==this.b.type().default;if(tp.service.isArray(this.b.type())){this.checked=this.b.collectionBinding().contains(this.val)}};SetBindingValueAction.prototype.run=function(){var _this=this;if(tp.service.isArray(this.b.type())){var cnt=this.b.collectionBinding().workingCopy();if(this.b.collectionBinding().contains(this.val)){this.b.set([].concat(this.b.get()).filter(function(x){return x!=_this.val}));this.checked=false}else{this.checked=true;var vl=this.b.get();if(!vl){vl=[]}this.b.set([this.val].concat(vl))}}else{if(this.b.get()==this.val){this.b.set(null);this.checked=false}else{this.b.set(this.val);this.checked=true}}this.valueChanged(null)};return SetBindingValueAction}();exports.SetBindingValueAction=SetBindingValueAction;var ValuesMenu=function(){function ValuesMenu(b){this.b=b;this.title=tp.service.caption(b.type());this.id=b.id();var en=tp.enumOptions(b.type(),b);if(!en||en.length==0){var bnd=tp.enumOptionsBinding(b.type(),b);if(bnd){this.bnd=bnd.collection;bnd.collection.addListener(this);this.valueChanged(null);this.transform=bnd.transformer}}else{this.items=en.map(function(x){return new SetBindingValueAction(b,x)})}}ValuesMenu.prototype.valueChanged=function(e){var _this=this;if(this.bnd){this.items=this.bnd.collectionBinding().workingCopy().map(function(x){return new SetBindingValueAction(_this.b,_this.transform?_this.transform(x):x,tp.service.label(x,_this.bnd.collectionBinding().componentType()))});if(this.bnd.isLoading()){this.items.push({title:"Loading...",disabled:true})}}};return ValuesMenu}();exports.ValuesMenu=ValuesMenu;var EditAction=function(_super){__extends(EditAction,_super);function EditAction(){return _super.apply(this,arguments)||this}EditAction.prototype.defaultTitle=function(){return"Edit"};EditAction.prototype.isEnabled=function(){return this.depBnd.get()!==undefined&&this.depBnd.get()!==null};EditAction.prototype.run=function(){var sr=tp.service.resolvedType(this.selection.type());var ni=tp.service.newInstance(this.selection.type());var nn=new tp.Binding("");nn.context=this.selection;nn.value=tp.service.workingCopy(this.selection.get(),this.selection.type());nn._type=tp.service.resolvedType({id:"",required:true,uniquinessException:this.selection.get(),type:this.selection.type()});var v=this;dialog("Edit "+sr.displayName,nn,function(){v._valBinding.replace(v.selection.get(),nn.get())})};return EditAction}(CollectionAction);exports.EditAction=EditAction;var CommitValidAction=function(_super){__extends(CommitValidAction,_super);function CommitValidAction(b,onOk){var _this=_super.call(this,b.binding("$status"))||this;_this.b=b;_this.onOk=onOk;_this.title="Ok";_this.primary=true;return _this}CommitValidAction.prototype.isEnabled=function(){var st=this.depBnd.get();return st.valid};CommitValidAction.prototype.run=function(){this.onOk()};return CommitValidAction}(BindingDependentAction);exports.CommitValidAction=CommitValidAction;function dialog(caption,b,onOk){wb.showInDialog(caption,uf.service.createControl(b,{dialog:true,maxMasterDetailsLevel:0}),[new CommitValidAction(b,onOk),Cancel])}exports.dialog=dialog;var DeleteAction=function(_super){__extends(DeleteAction,_super);function DeleteAction(){return _super.apply(this,arguments)||this}DeleteAction.prototype.isEnabled=function(){return this.depBnd.get()!==undefined&&this.depBnd.get()!==null};DeleteAction.prototype.run=function(){this._valBinding.remove(this.selection.get())};DeleteAction.prototype.defaultTitle=function(){return"Remove"};return DeleteAction}(CollectionAction);exports.DeleteAction=DeleteAction;var w=window;var ct;w.open=function(title,arg){dialog(title,arg,function(){})}},{"./uifactory":11,"./workbench":12,"raml-type-bindings":26}],2:[function(require,module,exports){"use strict";var rtb=require("raml-type-bindings");var uif=require("./uifactory");var wb=require("./workbench");var action=require("./actions");var basicAuth={type:"object",properties:{login:{type:"string"},password:{type:"password"},remember:{displayName:"Keep logged in",type:"boolean"}}};function authBinding(t){var b=new rtb.Binding(t.id);if(t.kind=="Basic Authentication"){b._type=basicAuth}return b}exports.authBinding=authBinding;function authUI(t){return uif.service.createControl(authBinding(t))}exports.authUI=authUI;function key(b){var op=b.type();var s=scheme(b);var bu=op.baseUri;if(bu&&s){return bu+":"+s.id}}exports.key=key;function credentials(b){var c=key(b);if(!c){return false}var item=sessionStorage.getItem(c);if(item){return JSON.parse(item)}item=localStorage.getItem(c);if(item){return JSON.parse(item)}}exports.credentials=credentials;function storeCredentials(b,c){if(c.remember){localStorage.setItem(key(b),JSON.stringify(c))}else{sessionStorage.setItem(key(b),JSON.stringify(c))}}exports.storeCredentials=storeCredentials;function needsAuthentification(ts){if(ts.securedBy){if(ts.securedBy.length>0){return ts.securedBy[0]}}}rtb.setAuthService({authError:function(b){if(credentials(b)){storeCredentials(b,"")}},needsAuth:function(b){if(needsAuthentification(b.type())){if(credentials(b)){return false}return true}return false},patchRequest:function(b,r){if(needsAuthentification(b.type())){var cm=credentials(b);if(cm){r.auth={user:cm.login,password:cm.password}}}console.log("Patching");return r}});var scheme=function(b){var op=b.type();var mm=b.type().securedBy;if(!mm){return null}var scheme=null;mm.forEach(function(x){if(x){scheme=rtb.service.resolveTypeByName(x)}});return scheme};function doAuth(b,onComplete){var _this=this;var sc=scheme(b);authDialog(sc,function(x){_this.storeCredentials(b,x);onComplete()})}exports.doAuth=doAuth;function authDialog(t,onComplete){var bnd=authBinding(t);wb.showInDialog(t.displayName?t.displayName:"Login",uif.service.createControl(bnd,{dialog:true,maxMasterDetailsLevel:0}),[new action.CommitValidAction(bnd,function(){onComplete(bnd.get())}),Cancel])}exports.authDialog=authDialog;var Cancel={title:"Cancel",run:function(){}}},{"./actions":1,"./uifactory":11,"./workbench":12,"raml-type-bindings":26}],3:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var forms=require("./forms");var controls=require("./controls");var actions=require("./actions");var rt=require("raml-type-bindings");var ro=require("./renderingOptions");var controls_1=require("./controls");var raml_type_bindings_1=require("raml-type-bindings");var ClearFilterAction=function(_super){__extends(ClearFilterAction,_super);function ClearFilterAction(f,c,filterBinding){var _this=_super.call(this,c)||this;_this.f=f;_this.filterBinding=filterBinding;_this.startListening();_this.valueChanged(null);return _this}ClearFilterAction.prototype.run=function(){var vl="";if(this.f.filter.noFilterValue){vl=this.f.filter.noFilterValue}this.filterBinding.set(vl)};ClearFilterAction.prototype.valueChanged=function(e){_super.prototype.valueChanged.call(this,e);this.title=this.defaultTitle()};ClearFilterAction.prototype.defaultTitle=function(){if(!this.f){return"Filter"}var pt=rt.service.property(this.depBnd.type(),this.f.filter.property);var pc=rt.service.caption(pt).toLowerCase();return"Clear "+rt.service.caption(this.filterBinding.type()).toLowerCase()+" filter"};ClearFilterAction.prototype.isEnabled=function(){if(this.filterBinding){return this.filterBinding.get()&&(this.filterBinding.get()!=this.f.filter.noFilterValue||!this.f.filter.noFilterValue)}return true};return ClearFilterAction}(actions.CollectionAction);exports.ClearFilterAction=ClearFilterAction;var FilterAction=function(_super){__extends(FilterAction,_super);function FilterAction(f,c,filterBinding){var _this=_super.call(this,c)||this;_this.f=f;_this.filterBinding=filterBinding;_this.startListening();_this.valueChanged(null);return _this}FilterAction.prototype.run=function(){var vl=this.depBnd.get();var filterVal=rt.service.getValue(this.depBnd.type(),vl,this.f.filter.property,this.depBnd);filterVal=rt.service.convert(this.filterBinding.type(),this.depBnd.binding(this.f.filter.property).type(),filterVal);this.filterBinding.set(filterVal)};FilterAction.prototype.valueChanged=function(e){_super.prototype.valueChanged.call(this,e);this.title=this.defaultTitle()};FilterAction.prototype.defaultTitle=function(){if(!this.f){return"Filter"}var vl=this.depBnd.get();if(vl){var filterVal=rt.service.getValue(this.depBnd.type(),vl,this.f.filter.property,this.depBnd);var opName="";switch(this.f.filter.op){case"eq":opName="equal";break;case"neq":opName="equal";break;case"lt":opName="less then";break;case"gt":opName="greater then";break;case"le":opName="less or equal then";break;case"ge":opName="greater or equal then";break}var pt=rt.service.property(this.depBnd.type(),this.f.filter.property);var pc=rt.service.caption(this.filterBinding.type()).toLowerCase();var nm="Constraint items to "+pc+" "+opName+" "+rt.service.label(filterVal,pt);return nm}};FilterAction.prototype.isEnabled=function(){return this.depBnd.get()!==undefined&&this.depBnd.get()!==null};return FilterAction}(actions.CollectionAction);exports.FilterAction=FilterAction;var CollectionControlPanel=function(_super){__extends(CollectionControlPanel,_super);function CollectionControlPanel(view){var _this=_super.call(this)||this;_this.view=view;_this.psComposite=new controls.Composite("span");_this._style.display="inline-flex";_this.layout=view.type();return _this}CollectionControlPanel.prototype.contribute=function(){var _this=this;if(!this._menu){var filters={id:"filters",title:"Filters",image:"fa-filter",items:[]};var allItems=[];var rs=[];this.allConfigurableParameters().forEach(function(x){if(x.enumeratedValues()){var menu=new actions.ValuesMenu(x);if(x.type().filter){filters.items.push(menu)}if(x.type().ordering){menu.image="fa-sort-numeric-desc";allItems.push(menu)}}else{var mm=x.type();if(mm.filter){if(mm.filter.op&&mm.filter.property){var lm={title:rt.service.caption(x.type()),items:[new FilterAction(mm,_this.view,x),new ClearFilterAction(mm,_this.view,x)]};filters.items.push(lm)}}}});if(filters.items.length>0){allItems.push(filters)}allItems=allItems.reverse();this._menu=allItems}return this._menu};CollectionControlPanel.prototype.renderChildren=function(e){this.psComposite._style.display="inline-flex";this.children=[];this.children.push(this.psComposite);this.fillPS();var tp=new raml_type_bindings_1.Binding("Z");var ptype={type:"object",displayName:"Visible Parameters",properties:{}};this.allConfigurableParameters().forEach(function(x){ptype.properties[x.id()]={id:"",displayName:rt.service.caption(x.type()),type:"boolean"}});tp._type=ptype;tp.value=this.visiblePars;tp.addListener(this);var b=new forms.PopoverSelect(tp,"glyphicon-cog","btn-success",false,false);if(this.layout.parametersLayout&&this.layout.parametersLayout.allowConfiguration!==false){this.children.push(b)}_super.prototype.renderChildren.call(this,e)};CollectionControlPanel.prototype.fillPS=function(){var _this=this;var ps=this.visibleParameters().map(function(x){return _this.createParameterUI(x)});this.psComposite.children=[];ps.forEach(function(x){_this.psComposite.children.push(x);x.parent=_this.psComposite})};CollectionControlPanel.prototype.valueChanged=function(e){this.fillPS();this.psComposite.refresh()};CollectionControlPanel.prototype.processDirection=function(sp,b){var val=sp.get();var desc=true;if(val=="asc"){desc=false}b.children=[];if(desc){b.addHTML("<span class='glyphicon glyphicon-sort-by-order'></span>")}else{b.addHTML("<span class='glyphicon glyphicon-sort-by-order-alt'></span>")}};CollectionControlPanel.prototype.createParameterUI=function(p){var role="filter";if(p.type().ordering){role="sort"}var c=ro.clone(this.getRenderingOptions(),{kind:"filter"});var d=p.type().description;if(!d){d=""}var style="btn-primary";if(p.enumeratedValues()||rt.service.isMultiSelect(p.type())){var extra=null;if(role=="sort"){var sp=this.view.sortDirectionParameter();if(sp){extra=new forms.Button("");extra.addClassName("btn-xs");var cP=this;cP.processDirection(sp,extra);sp.addPrecomitListener({valueChanged:function(){cP.processDirection(sp,extra)}});extra.onClick=function(x){var vl=sp.get();if(vl=="asc"){sp.set("desc")}else{sp.set("asc")}}}}var ps=new forms.PopoverSelect(p,"glyphicon-"+role,style,true,true,extra);return ps}var cm=this.createUsualFilter(style,p);return cm};CollectionControlPanel.prototype.createUsualFilter=function(style,p){var _this=this;var cm=new controls_1.Composite("span");var label=new controls_1.Composite("span");label.addClassName("btn");label.addClassName("btn-xs");label.addClassName(style);cm._style.position="relative";label._style.height="22px";label._style.marginRight="-3px";label._style.marginTop="-2px";label.addClassName("btn-default");label.addHTML("<span style='position: relative;top: 3px;' class='glyphicon glyphicon-filter'></span>");label.addLabel(rt.service.caption(p.type())+":");cm.add(label);var i=new forms.Input(false);i._style.height="22px";i._style.borderBottomRightRadius="3px";i._style.borderTopRightRadius="3px";i._style.borderBottomLeftRadius="0px";i._style.borderTopLeftRadius="0px";i._style.borderStyle="solid";i._style.borderWidth="1px";i._style.minWidth="4ch";i._style.borderColor="#ccc";i._binding=p;cm.add(i);if(rt.service.isSubtypeOf(p.type(),rt.TYPE_DATE)){var addon=new controls_1.Composite("span");addon._style.display="inline";addon._style.width="20px";addon._style.paddingTop="3px";addon._style.paddingBottom="1px";addon._style.paddingLeft="2px";addon._style.paddingRight="2px";addon.addClassName("input-group-addon");addon._html="<span class='glyphicon glyphicon-calendar'></span>";cm.add(addon)}var flt=p.type().filter;if(flt){if(flt.property){var result={};i._typeaheadFunction=function(v,cb){var b=new raml_type_bindings_1.Binding("");b._type=_this.view.collectionBinding().componentType();b.context=_this.view;_this.view.collectionBinding().workingCopy().forEach(function(x){b.value=x;var val=rt.calcExpression(flt.property,b);if(val){result[""+val]=true}});cb(Object.keys(result));return result}}}cm._style.marginRight="3px";return cm};CollectionControlPanel.prototype.visibleParameters=function(){var _this=this;var pms=[];if(!this.visiblePars){this.visiblePars={};var initialVisibility=false;if(this.layout.parametersLayout){if(this.layout.parametersLayout.initiallyVisible){this.layout.parametersLayout.initiallyVisible.forEach(function(s){initialVisibility=true;_this.allConfigurableParameters().forEach(function(p){if(p.id()==s){pms.push(p)}})})}}if(!initialVisibility){this.allConfigurableParameters().forEach(function(x){if(x.type().required&&!x.type().default){pms.push(x)}if(x.type().ordering){pms.push(x);return}if(pms.length<3){pms.push(x);return true}})}}else{var already=[];if(this.layout.parametersLayout){if(this.layout.parametersLayout.initiallyVisible){this.layout.parametersLayout.initiallyVisible.forEach(function(s){initialVisibility=true;_this.allConfigurableParameters().forEach(function(p){if(p.id()==s){if(_this.visiblePars[p.id()]){pms.push(p);already.push(p.id())}}})})}}this.allConfigurableParameters().forEach(function(x){if(_this.visiblePars[x.id()]&&already.indexOf(x.id())==-1){pms.push(x)}})}pms.forEach(function(x){return _this.visiblePars[x.id()]=true});return pms};CollectionControlPanel.prototype.allConfigurableParameters=function(){var _this=this;var ps=this.view.parameterBindings();var result=[];var hasSort=false;ps.forEach(function(x){if(_this.view.lookupVar(x.id())){x.set(_this.view.lookupVar(x.id()))}else{if(x.type().ordering){hasSort=true}result.push(x)}});if(hasSort){result=result.filter(function(x){return x!=_this.view.sortDirectionParameter()})}return result};return CollectionControlPanel}(controls.HorizontalFlex);exports.CollectionControlPanel=CollectionControlPanel},{"./actions":1,"./controls":4,"./forms":6,"./renderingOptions":9,"raml-type-bindings":26}],4:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var ro=require("./renderingOptions");var layout=require("./layout");var jquery=require("jquery");window.jQuery=jquery;window.$=jquery;require("../lib/bootstrap-treeview");var ToolbarRenderer=function(){function ToolbarRenderer(menu){this.menu=menu;this.style={}}ToolbarRenderer.prototype.render=function(host){var _this=this;this.menu.items.forEach(function(x){var button=document.createElement("button");button.classList.add("btn");button.classList.add("btn-xs");if(x.checked){button.classList.add("btn-success")}else{if(x.danger){button.classList.add("btn-danger")}else{button.classList.add("btn-primary")}}copyProps(_this.style,button.style);button.textContent=x.title;if(x.image){button.innerHTML='<span class="'+x.image+'"></span>'+x.title}if(x.run){button.onclick=function(){x.run()}}if(x.disabled){button.disabled=true}host.appendChild(button)})};return ToolbarRenderer}();exports.ToolbarRenderer=ToolbarRenderer;var DrowpdownMenu=function(){function DrowpdownMenu(menu,setRoles){if(setRoles===void 0){setRoles=true}this.menu=menu;this.setRoles=setRoles}DrowpdownMenu.prototype.render=function(host){var _this=this;this.menu.items.forEach(function(x){var li=document.createElement("li");if(_this.setRoles){li.setAttribute("role","presentation")}if(x.disabled){li.classList.add("disabled")}var a=document.createElement("a");a.setAttribute("href",x.link?x.link:"#");if(_this.setRoles){a.setAttribute("role","menuitem")}a.style.cursor="hand";if(x.run){a.onclick=function(e){x.run()}}if(x.checked){a.innerHTML=x.title+"<span class='glyphicon glyphicon-ok' style='float: right'></span>"}else{a.innerHTML=x.title}li.appendChild(a);if(host){host.appendChild(li)}})};return DrowpdownMenu}();exports.DrowpdownMenu=DrowpdownMenu;var Context=function(){function Context(menu){this.menu=menu}Context.prototype.render=function(host){this.menu.items.forEach(function(x){var li=document.createElement("li");if(x.disabled){li.classList.add("disabled")}var a=document.createElement("a");if(x.run){a.onclick=x.run}a.innerHTML=x.title;li.appendChild(a);host.appendChild(li)})};return Context}();exports.Context=Context;var c=1;var AbstractComposite=function(){function AbstractComposite(){this._style={};this.children=[]}AbstractComposite.prototype.setRenderingOptions=function(o){this._renderingOptions=ro.clone(o)};AbstractComposite.prototype.getRenderingOptions=function(){if(!this._renderingOptions){if(this.parent){return this.parent.getRenderingOptions()}return ro.defaultOptions()}return this._renderingOptions};AbstractComposite.prototype.rendersLabel=function(c){return false};AbstractComposite.prototype.element=function(){return this._element};AbstractComposite.prototype.setDisabled=function(v){return};AbstractComposite.prototype.canShrinkVertically=function(){return false};AbstractComposite.prototype.hasVerticalSchrink=function(){if(this.canShrinkVertically()){return true}if(this.parent&&this.parent instanceof AbstractComposite){return this.parent.canShrinkVertically()}return false};AbstractComposite.prototype.canShrinkChildrenVertically=function(){var can=true;if(this.children.length==0){return false}this.children.forEach(function(x){if(x instanceof AbstractComposite){can=can&&(x.canShrinkVertically()||x.hasVerticalSchrink())}});return can};AbstractComposite.prototype.completeRefresh=function(c){this._element.replaceChild(c.render(this._element),c._element)};AbstractComposite.prototype.id=function(){if(this._id){return this._id}this._id="c"+c++;return this._id};AbstractComposite.prototype.render=function(e){this._element=e;return this.innerRender(e)};AbstractComposite.prototype.refresh=function(){if(this._element){this.innerRender(this._element)}};AbstractComposite.prototype.add=function(c){this.children.push(c);this.refresh();c.parent=this};AbstractComposite.prototype.remove=function(c){this.children=this.children.filter(function(x){return x!=c});this.refresh()};AbstractComposite.prototype.potentiallyVisible=function(){this.children.forEach(function(x){x.potentiallyVisible()})};AbstractComposite.prototype.dispose=function(){this._element=null;this.children.forEach(function(x){if(x.dispose){x.dispose()}})};AbstractComposite.prototype.setTitle=function(title){this._title=title};AbstractComposite.prototype.title=function(){return this._title};return AbstractComposite}();exports.AbstractComposite=AbstractComposite;function copyProps(a,b){Object.keys(a).forEach(function(k){b[k]=a[k]})}function disable(e,v){e.disabled=v;for(var i=0;i<e.children.length;i++){disable(e.children.item(i),v)}}var Composite=function(_super){__extends(Composite,_super);function Composite(tagName){var _this=_super.call(this)||this;_this.tagName=tagName;_this.disabled=false;_this.lifecycle=[];_this.attrs={};_this._classNames=[];_this.visible=true;return _this}Composite.prototype.setSelectionVisible=function(sel){this.children.forEach(function(x){if(x instanceof Composite){x.setSelectionVisible(sel)}})};Composite.prototype.rendersLabel=function(c){if(this._rendersLabel){return true}if(this.children.length==1&&this.parent){return this.parent.rendersLabel(c)}return false};Composite.prototype.needLabel=function(){if(this.parent){if(this.parent.rendersLabel(this)){return false}}return true};Composite.prototype.setDisabled=function(v){if(this.disabled!=v){this.innerSetDisabled(v);this.disabled=v;this.children.forEach(function(x){return x.setDisabled(v)})}};Composite.prototype.innerSetDisabled=function(v){if(this._element){disable(this._element,v)}};Composite.prototype.setDescription=function(d){this._description=d};Composite.prototype.description=function(){if(!this._description){if(this.children.length==1){if(this.children[0].description){return this.children[0].description()}}}return this._description};Composite.prototype.addLifycleListener=function(l){this.lifecycle.push(l)};Composite.prototype.removeLifycleListener=function(l){this.lifecycle=this.lifecycle.filter(function(x){return x!=l})};Composite.prototype.onAttach=function(e){var _this=this;this.lifecycle.forEach(function(x){return x.attached(_this,e)});this.potentiallyVisible()};Composite.prototype.onDetach=function(e){var _this=this;this.lifecycle.forEach(function(x){return x.detached(_this,e)})};Composite.prototype.addLabel=function(l){var cnt=new Composite("span");cnt._text=l;this.add(cnt);return cnt};Composite.prototype.addHTML=function(l){var cnt=new Composite("span");cnt._html=l;this.add(cnt);return cnt};Composite.prototype.addClassName=function(c){this._classNames.push(c)};Composite.prototype.removeClassName=function(c){this._classNames=this._classNames.filter(function(x){return x!=c})};Composite.prototype.style=function(){return this._style};Composite.prototype.withClass=function(c){this._className=c;return this};Composite.prototype.tag=function(){return this.tagName};Composite.prototype.innerRender=function(e){var ch=document.createElement(this.tag());if(!this.parent){layout.adjustLayout(this)}e.appendChild(ch);this._element=ch;this.renderContent(ch)};Composite.prototype.refresh=function(){if(this._element){this._element.innerHTML="";this.renderContent(this._element)}};Composite.prototype.setVisible=function(visible){if(this.parent&&this.parent.weapperForChild){if(this.parent.setVisible){this.parent.setVisible(visible)}}if(visible!=this.visible){this.visible=visible;this.innerUpdateVisible(visible)}};Composite.prototype.innerUpdateVisible=function(visible){if(this._element){if(!visible){this.dsStyle=this._element.style.display;this._element.style.display="none"}else{this._element.style.display=this._style.display?this._style.display:this.dsStyle}if(this.onVisibilityChanged){this.onVisibilityChanged(visible)}if(this.parent&&this.parent.onChildVisibilityChanged){this.parent.onChildVisibilityChanged(this,visible)}}};Composite.prototype.isVisible=function(){return this.visible};Composite.prototype.needsVerticalScroll=function(){return this.hasVerticalSchrink()&&!this.canShrinkChildrenVertically()};Composite.prototype.renderContent=function(ch){var _this=this;ch.id=this.id();if(this._styleString){ch.setAttribute("style",this._styleString)}else if(this._style){copyProps(this._style,ch.style)}if(this._className){ch.className=this._className}Object.keys(this.attrs).forEach(function(k){ch.setAttribute(k,_this.attrs[k])});this._classNames.forEach(function(x){ch.classList.add(x)});if(this._text){ch.innerText=this._text}if(this._html){ch.innerHTML=this._html}if(this.onClick){ch.onclick=this.onClick}if(this.needsVerticalScroll()){ch.style.overflowY="auto"}this.extraRender(ch);ch["$control"]=this;this.renderChildren(ch);if(this._footer){this._footer.render(ch)}if(!this.visible){this._element.style.display="none"}if(this.disabled){this.innerSetDisabled(this.disabled)}};Composite.prototype.renderChildren=function(ch){var v=this.children;this.renderElements(v,ch)};Composite.prototype.renderElements=function(v,ch){var _this=this;v.forEach(function(c){var w=_this.wrap(ch,c);var el=c.render(w);if(el){w.appendChild(el)}})};Composite.prototype.extraRender=function(ch){};Composite.prototype.wrap=function(p,c){return p};return Composite}(AbstractComposite);exports.Composite=Composite;var WrapComposite=function(_super){__extends(WrapComposite,_super);function WrapComposite(){var _this=_super.apply(this,arguments)||this;_this.wrapElement="div";return _this}WrapComposite.prototype.wrap=function(p,c){if(c instanceof Composite){return p}var d=document.createElement(this.wrapElement);p.appendChild(d);return d};return WrapComposite}(Composite);exports.WrapComposite=WrapComposite;var Form=function(_super){__extends(Form,_super);function Form(){var _this=_super.call(this,"div")||this;_this._style.padding="10px";_this._style.width="100%";return _this}return Form}(Composite);exports.Form=Form;var HorizontalFlex=function(_super){__extends(HorizontalFlex,_super);function HorizontalFlex(){var _this=_super.call(this,"div")||this;_this.wrapStyle={};_this.needChildLabel=true;_this._style.display="flex";_this._style.flexDirection="row";return _this}HorizontalFlex.prototype.rendersLabel=function(c){return!this.needChildLabel};HorizontalFlex.prototype.wrap=function(p,c){if(c instanceof Composite&&!(c instanceof forms_1.InputGroup)){return p}var d=document.createElement("div");copyProps(this.wrapStyle,d.style);if(c instanceof forms_1.InputGroup){d.style.flex=c._style.flex}p.appendChild(d);return d};return HorizontalFlex}(Composite);exports.HorizontalFlex=HorizontalFlex;var VerticalFlex=function(_super){__extends(VerticalFlex,_super);function VerticalFlex(){var _this=_super.call(this,"div")||this;_this.wrapStyle={};_this._style.display="flex";_this._style.flexDirection="column";_this.onChildVisibilityChanged=function(x){setTimeout(function(e){_this.resize()},50)};return _this}VerticalFlex.prototype.potentiallyVisible=function(){var _this=this;setTimeout(function(e){_this.resize()},50);this.resize();_super.prototype.potentiallyVisible.call(this)
};VerticalFlex.prototype.resize=function(){var maxSize=0;this.children.forEach(function(x){if(x instanceof forms.InputGroup){var ic=x;if(ic.children[0]instanceof forms.InputGroupAddOn){var iadd=ic.children[0];var w=iadd.width();if(w>maxSize){maxSize=w}}}});this.children.forEach(function(x){if(x instanceof forms.InputGroup){var ic=x;if(ic.children[0]instanceof forms.InputGroupAddOn){var iadd=ic.children[0];iadd.setWidth(maxSize+5)}}})};VerticalFlex.prototype.wrap=function(p,c){if(c instanceof Composite){return p}var d=document.createElement("div");copyProps(this.wrapStyle,d.style);p.appendChild(d);return d};VerticalFlex.prototype.canShrinkVertically=function(){return true};return VerticalFlex}(Composite);exports.VerticalFlex=VerticalFlex;var globalId=0;function nextId(){return"el"+globalId++}var Loading=function(_super){__extends(Loading,_super);function Loading(){return _super.apply(this,arguments)||this}Loading.prototype.innerRender=function(e){e.innerHTML='<div style="display: flex;flex: 1 1 0; flex-direction: column;justify-content: center;"><div style="display: flex;flex-direction: row;justify-content: center"><div><div>Loading...</div><img src=\'https://petrochenko-pavel-a.github.io/raml-explorer/lib/progress.gif\'/></div></div></div>'};return Loading}(AbstractComposite);exports.Loading=Loading;var Loading2=function(_super){__extends(Loading2,_super);function Loading2(){var _this=_super.call(this,"div")||this;_this._styleString="display: flex;flex: 1 1 0; flex-direction: column;justify-content: center;";return _this}Loading2.prototype.innerRender=function(e){e.innerHTML="<div style=\"display: flex;flex-direction: row;justify-content: center\"><div><div>Loading...</div><img src='https://petrochenko-pavel-a.github.io/raml-explorer/lib/progress.gif'/></div></div>"};return Loading2}(Composite);exports.Loading2=Loading2;var Error=function(_super){__extends(Error,_super);function Error(message,cb,canRetry,rm){if(rm===void 0){rm="Retry..."}var _this=_super.call(this)||this;_this.message=message;_this.cb=cb;_this.canRetry=canRetry;_this.rm=rm;return _this}Error.prototype.innerRender=function(e){var _this=this;e.innerHTML='<div style="display: flex;flex: 1 1 0; flex-direction: column;justify-content: center;"><div style="display: flex;flex-direction: row;justify-content: center">\n        <div class="alert-danger" style="max-width: 60%;background-color: transparent"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>'+this.message+" "+(this.canRetry?"(<a href='#'>"+this.rm+"</a>)":"")+"</div></div></div>";this._element.onclick=function(x){_this.cb()}};return Error}(AbstractComposite);exports.Error=Error;var Label=function(_super){__extends(Label,_super);function Label(title,content){var _this=_super.call(this)||this;_this.content=content;_this.setTitle(title);return _this}Label.prototype.innerRender=function(e){if(this.content){e.innerHTML='<span style="padding: 5px;overflow: auto">'+this.content+"</span>"}else{e.innerHTML="<span>"+this.title()+"</span>"}};return Label}(AbstractComposite);exports.Label=Label;var ErrorMessage=function(_super){__extends(ErrorMessage,_super);function ErrorMessage(){return _super.apply(this,arguments)||this}ErrorMessage.prototype.setMessage=function(m){if(m.length>100){m=m.substring(0,70)+"..."}this._message=m;this.refresh()};ErrorMessage.prototype.getMessage=function(){return this._message};ErrorMessage.prototype.innerRender=function(e){e.innerHTML='\n        <div class="alert alert-danger" role="alert" style="margin: 5px">\n        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n        <span class="sr-only">Error:</span>\n        '+this._message+"\n        </div>"};return ErrorMessage}(AbstractComposite);exports.ErrorMessage=ErrorMessage;var AccorditionContainer=function(_super){__extends(AccorditionContainer,_super);function AccorditionContainer(){var _this=_super.call(this)||this;_this.acc=new Accordition;_this.acc._style.flex="1 1 0";_this.acc.parent=_this;_this.children.push(_this.acc);_this._style.overflow="hidden";_this.wrapStyle.display="flex";return _this}AccorditionContainer.prototype.add=function(c){this.acc.add(c)};return AccorditionContainer}(VerticalFlex);exports.AccorditionContainer=AccorditionContainer;var Accordition=function(_super){__extends(Accordition,_super);function Accordition(){var _this=_super.apply(this,arguments)||this;_this.disabled={};return _this}Accordition.prototype.expand=function(c){var index=this.children.indexOf(c);this.expandIndex(index)};Accordition.prototype.getSelectedIndex=function(){return this.selectedIndex};Accordition.prototype.getSelectedTitle=function(){if(this.selectedIndex!=undefined){return this.children[this.selectedIndex].title()}};Accordition.prototype.getSelectedTitleId=function(){if(this.selectedIndex!=undefined){var c=this.children[this.selectedIndex];return c.controlId?c.controlId:c.title()}};Accordition.prototype.expandIndex=function(index){var bids=this.bids;var gids=this.gids;this.selectedIndex=index;var c=this.children[index];if(c instanceof Composite){c.potentiallyVisible()}for(var j=0;j<bids.length;j++){if(j!=index){if(document.getElementById(bids[j])){document.getElementById(bids[j]).style.display="none";document.getElementById(gids[j]).style.flex=null}}else{if(document.getElementById(bids[j])){document.getElementById(bids[j]).style.display="flex";document.getElementById(gids[j]).style.flex="1 1 0";document.getElementById(gids[j]).style.display="flex"}}}};Accordition.prototype.getHeader=function(c){var positon=this.children.indexOf(c);if(positon=-1){return null}return document.getElementById(this.headings[positon])};Accordition.prototype.disable=function(c){var positon=this.children.indexOf(c);if(positon==-1){return null}document.getElementById(this.headings[positon]).style.color="gray";this.disabled[this.headings[positon]]=true};Accordition.prototype.enable=function(c){var positon=this.children.indexOf(c);if(positon==-1){return null}delete this.disabled[this.headings[positon]];document.getElementById(this.headings[positon]).style.color="black"};Accordition.prototype.innerRender=function(e){var _this=this;var topId=nextId();var templates=[];var headings=[];this.headings=headings;if(this._style){copyProps(this._style,e.style)}var bids=[];var gids=[];for(var i=0;i<this.children.length;i++){var elId=nextId();var hId=nextId();var bid=nextId();var gid=nextId();bids.push(elId);headings.push(hId);gids.push(gid);var hh='<div class="panel-body" style="background: red;flex: 1 1"><div id="'+bid+'" style="background: green;"></div></div>';var isComposite=this.children[i]instanceof Composite;var styleExpanded=i==0?"flex: 1 1 0":"display: none";var expanded=i==0;var s='<div id="'+gid+'" class="panel panel-default" style="margin: 0px;'+styleExpanded+'; display: flex;flex-direction: column">\n               <div class="panel-heading" id="'+hId+'">\n                <h4 class="panel-title" style="display: inline;cursor: pointer"><a>'+this.children[i].title()+'</a></h4>\n                <div style="float: right" id="'+("T"+hId)+'"></div>\n            </div>\n            \n            <div id="'+elId+'"  style="flex: 1 1 auto;display: flex;overflow:auto;flex-direction: column;'+styleExpanded+'">       \n                '+(isComposite?"":hh)+"\n            </div>\n           </div>";templates.push(s)}var content='<div class="panel-group" id="'+topId+'" style="margin: 0;padding: 0;display: flex;flex-direction: column;flex: 1 1 auto;">\n             '+templates.join("")+"       \n        </div>";e.innerHTML=content;for(var i=0;i<this.children.length;i++){var el=document.getElementById(bids[i]);this.children[i].render(el)}var i=0;this.bids=bids;this.gids=gids;headings.forEach(function(x){var panelId=bids[i];var containerId=gids[i];var k=i;if(_this.children[i].contextActions){var tH=document.getElementById("T"+x);new ToolbarRenderer({items:_this.children[i].contextActions}).render(tH)}document.getElementById(x).onclick=function(){if(!_this.disabled[x]){_this.expandIndex(k)}};i++})};return Accordition}(AbstractComposite);exports.Accordition=Accordition;var processAdd=function(v){if(v.$control){var cnt=v.$control;if(!v.attached){if(cnt.onAttach){cnt.onAttach(v)}v.attached=true}}if(v.children){for(var i=0;i<v.children.length;i++){processAdd(v.children.item(i))}}return cnt};var processRemove=function(v){if(v.$control){var cnt=v.$control;if(cnt.onDetach){cnt.onDetach(v)}v.attached=false}{if(v.children){for(var i=0;i<v.children.length;i++){processRemove(v.children.item(i))}}}return cnt};if(!window.observer){var observer=new MutationObserver(function(mutations){mutations.forEach(function(x){for(var i=0;i<x.addedNodes.length;i++){var v=x.addedNodes[i];var cnt=processAdd(v)}for(var i=0;i<x.removedNodes.length;i++){var v=x.removedNodes[i];var cnt=processRemove(v)}})});var config={attributes:false,childList:true,characterData:false,subtree:true};observer.observe(document,config);window.observer=observer}var forms=require("./forms");var tps=require("raml-type-bindings");var forms_1=require("./forms");var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s]})}exports.escapeHtml=escapeHtml;var SourceCode=function(_super){__extends(SourceCode,_super);function SourceCode(title,_language,_content){if(title===void 0){title=""}if(_language===void 0){_language="javascript"}if(_content===void 0){_content=""}var _this=_super.call(this,"pre")||this;_this._language=_language;_this._content=_content;_this._editable=false;_this.setTitle(title);return _this}SourceCode.prototype.setContent=function(c){this._content=c;this.refresh()};SourceCode.prototype.getContent=function(){return this._content};SourceCode.prototype.setEditable=function(e){this._editable=e;this.refresh()};SourceCode.prototype.getEditable=function(){return this._editable};SourceCode.prototype.setLanguage=function(l){this._language=l;this.refresh()};SourceCode.prototype.getLanguage=function(){return this._language};SourceCode.prototype.renderContent=function(e){if(!this._editable){e.innerHTML="<code class='"+this._language+"'>"+escapeHtml(this._content)+"</code>";var id=this.id();setTimeout(function(){if(window.hljs){window.hljs.highlightBlock(e)}},100)}};return SourceCode}(Composite);exports.SourceCode=SourceCode;var HorizontalTabFolder=function(_super){__extends(HorizontalTabFolder,_super);function HorizontalTabFolder(cntrl){if(cntrl===void 0){cntrl="div"}var _this=_super.call(this,cntrl)||this;_this.validness=[];return _this}HorizontalTabFolder.prototype.rendersLabel=function(c){return true};HorizontalTabFolder.prototype.setChildValidness=function(validness){this.validness=validness;if(this.list){this.list.dataRefresh(null)}};HorizontalTabFolder.prototype.innerRender=function(e){var f=new Form;f._style.display="flex";f._style.flexDirection="column";f._style.overflow="auto";f._style.width="100%";var vv=new VerticalFlex;var m=new HorizontalFlex;m.needChildLabel=false;m.addClassName("panel");m.addClassName("panel-default");m._style.flex="1 1 auto";vv._style.flex="1 1 auto";vv._style.margin="0px";m._style.margin="0px";var view=this;var hide=false;if(true){var view=this;var t=new forms.SimpleListControl;t._style.flex="0 0 auto";this.list=t;if(this.parent){t.addControlCustomizer({customize:function(c,i,v){if(i==view.children.length-1){c._style.borderBottomWidth="0px"}}})}t.addLabelCustomizer({customize:function(c,i,v){var desc=v.description();if(desc){c._style.whiteSpace="nowrap";c.add(new forms.Help(desc))}if(view.validness[i]===false){c.addHTML('<span class="alert-danger" style="background-color: transparent" role="alert">\n        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> </span>')}}});t.style().borderRight="solid";t.style().borderRightWidth="1px";t.style().borderRightColor="#ddd";m.add(t);m.add(f);var b=new tps.Binding("");b._type={type:tps.TYPE_ARRAY,itemType:tps.TYPE_ANY};t._binding=b;t._binding.set(this.children);t.addSelectionListener({selectionChanged:function(v){if(v.length==1){f.children=[];f.add(v[0]);f.refresh()}}});if(this.children.length<=1){hide=true}}vv.add(m);vv.render(e);if(this.children&&this.children.length>0){t.select(this.children[0])}};return HorizontalTabFolder}(Composite);exports.HorizontalTabFolder=HorizontalTabFolder},{"../lib/bootstrap-treeview":14,"./forms":6,"./layout":7,"./renderingOptions":9,jquery:17,"raml-type-bindings":26}],5:[function(require,module,exports){"use strict";module.exports="\n.tab-content>.active.grabVertical {\n\n    display: flex;\n    flex: 1 1 auto;\n}\n.active{\n    z-index: 0;\n}\n.pagination>.active>a, .pagination>.active>a:focus, .pagination>.active>a:hover, .pagination>.active>span, .pagination>.active>span:focus, .pagination>.active>span:hover {\n    z-index: 0;\n}\n.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover  {\n    z-index: 0;\n}\n.list-group-item.active  .details {\n    color: white\n}\n.list-group-item.active  a {\n    color: white\n}\n.details {\n    color: gray;\n    margin-left: 22px;\n}\n.list-group-item.noRoundBorder {\n    border-left-width: 0px;\n    border-right-width: 0px;\n\n}\n.list-group-item.noRoundBorder:first-child {\n    border-top-left-radius: 0px;\n    border-top-right-radius: 0px;\n}\n.list-group-item.noRoundBorder:last-child {\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n}\n.glyphicon-refresh-animate {\n    -animation: spin .7s infinite linear;\n    -webkit-animation: spin2 .7s infinite linear;\n}\n\n@-webkit-keyframes spin2 {\n    from { -webkit-transform: rotate(0deg);}\n    to { -webkit-transform: rotate(360deg);}\n}\n\n@keyframes spin {\n    from { transform: scale(1) rotate(0deg);}\n    to { transform: scale(1) rotate(360deg);}\n}\n.treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}\n\nhtml, body {\n    height: 100%;\n}\n\nbody {\n    padding: 8px;\n    background-color: #F6F6F6;\n    box-sizing: border-box;\n}\n.tooltip-inner {\n    max-width: 500px !important;\n}\n\n.split {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\n.content {\n    border: 1px solid #C0C0C0;\n    box-shadow: inset 0 1px 2px #e4e4e4;\n    background-color: #fff;\n}\n\n.gutter {\n    background-color: transparent;\n    background-repeat: no-repeat;\n    background-position: 50%;\n}\n\n.gutter.gutter-horizontal {\n    cursor: col-resize;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);\n\n}\n.gutter.gutter-horizontal{\n    height: 100%;\n}\n.grabHorizontal .gutter.gutter-horizontal{\n    height: initial;\n}\n\n.gutter.gutter-vertical {\n    cursor: row-resize;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAYAAABSIVz6AAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJklEQVQoFWM8c+bMfwYgMDExYQTR9OIzgSwbUYCRXkGLHpUDFtQAj1I+zTCPS2YAAAAASUVORK5CYII=);\n}\n\n.split.split-horizontal, .gutter.gutter-horizontal {\n    float: left;\n}\n"},{}],6:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var controls=require("./controls");var ro=require("./renderingOptions");exports.tps=require("raml-type-bindings");var uifactory=require("./uifactory");var controls_1=require("./controls");var raml_type_bindings_1=require("raml-type-bindings");var auth=require("./auth");var ex=require("./extraCss");var sheet=document.createElement("style");sheet.innerHTML=ex;document.body.appendChild(sheet);var ERROR='<span class="alert-danger" style="background-color: transparent" role="alert">\n        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> </span>';var TabFolder=function(_super){__extends(TabFolder,_super);function TabFolder(){var _this=_super.call(this,"div")||this;_this.grabVertical=true;if(_this.grabVertical){_this._style.display="flex";_this._style.flexDirection="column"}_this.onChildVisibilityChanged=function(c,v){var i=_this.children.indexOf(c);if(i!=-1){var header=document.getElementById(_this.id()+"tab"+i);if(header){if(v){header.style.display=""}else{header.style.display="none";document.getElementById("w"+_this.children[i].id()).classList.remove("active");if(header.parentElement.classList.contains("active")){header.parentElement.classList.remove("active");for(var j=0;j<_this.children.length;j++){var element=document.getElementById(_this.id()+"tab"+j);element.parentElement.classList.add("active");document.getElementById("w"+_this.children[j].id()).classList.add("active");break}}}}}};return _this}TabFolder.prototype.rendersLabel=function(c){return true};TabFolder.prototype.canShrinkVertically=function(){return this.grabVertical};TabFolder.prototype.setChildValidness=function(validness){for(var i=0;i<validness.length;i++){var tb=document.getElementById(this.id()+"tab"+i);if(tb){if(!validness[i]){tb.innerHTML=this.children[i].title()+ERROR}else{tb.innerText=this.children[i].title()}}}};TabFolder.prototype.extraRender=function(ch){var _this=this;if(this.grabVertical){ch.style.flex=this.getRenderingOptions().dialog?"1 1 auto":"1 1 0"}var rs=[];var ll=document.createElement("ul");ll.classList.add("nav");ll.classList.add("nav-tabs");var c="";var vm=0;this.children.forEach(function(x,i){var visible=!(x instanceof controls.Composite)||x.isVisible();if(true){var t='      \n            <li class="'+(vm==0?"active":"")+'">\n            <a  href="#'+("w"+x.id())+'" data-toggle="tab" style="display: '+visible+'" id="'+(_this.id()+"tab"+i)+'">'+x.title()+"</a>\n            </li>";c+=t;vm++}});ll.innerHTML=c;for(var i=0;i<ll.children.length;i++){ll.children.item(i).onclick=function(e){_this.potentiallyVisible()}}ch.appendChild(ll)};TabFolder.prototype.wrap=function(p,c){var d=document.createElement(this.wrapElement);d.id="w"+c.id();d.classList.add("tab-pane");if(this.grabVertical){d.classList.add("grabVertical")}if(this.children.indexOf(c)==0){d.classList.add("active")}p.appendChild(d);return d};TabFolder.prototype.renderChildren=function(ch){var cc=document.createElement("div");cc.classList.add("tab-content");cc.classList.add("clearfix");if(this.grabVertical){cc.style.flex=this.getRenderingOptions().dialog?"1 1 auto":"1 1 0";cc.style.display="flex";cc.style.flexDirection="column"}ch.appendChild(cc);_super.prototype.renderChildren.call(this,cc)};return TabFolder}(controls.WrapComposite);exports.TabFolder=TabFolder;var InputGroup=function(_super){__extends(InputGroup,_super);function InputGroup(){var _this=_super.call(this,"div")||this;_this.weapperForChild=true;_this.addClassName("input-group");_this.addClassName("input-group-sm");_this._style.padding="5px";return _this}InputGroup.prototype.setChildValidness=function(validness){var allValid=true;validness.forEach(function(x){allValid=allValid&&x});if(this.children.length>0){if(this.children[0]instanceof InputGroupAddOn){this.children[0].setValid(allValid)}}};return InputGroup}(controls.Composite);exports.InputGroup=InputGroup;var InputGroupAddOn=function(_super){__extends(InputGroupAddOn,_super);function InputGroupAddOn(){var _this=_super.call(this,"div")||this;_this.valid=true;_this._text="";_this.addClassName("input-group-addon");return _this}InputGroupAddOn.prototype.setValid=function(v){this.valid=v;this.refresh()};InputGroupAddOn.prototype.renderChildren=function(ch){_super.prototype.renderChildren.call(this,ch);if(!this.valid){ch.innerHTML=ch.innerHTML+ERROR}};InputGroupAddOn.prototype.setWidth=function(w){if(this._element){this._element.style.width=w+"px"}};InputGroupAddOn.prototype.width=function(){if(this.desiredWidth){return this.desiredWidth}if(this._element){var dv=this._element.getBoundingClientRect().width+10;if(dv>20){this.desiredWidth=dv;return dv}return dv}return-1};return InputGroupAddOn}(controls.Composite);exports.InputGroupAddOn=InputGroupAddOn;var BindableControl=function(_super){__extends(BindableControl,_super);function BindableControl(){return _super.apply(this,arguments)||this}BindableControl.prototype.title=function(){var rrr=_super.prototype.title.call(this);if(!rrr){if(this._binding){return exports.tps.service.caption(this._binding.type())}}return rrr};BindableControl.prototype.updateVisibility=function(){this.setVisible(exports.tps.service.isVisible(this._binding.type(),this._binding));var m=this._binding.type();var disabled=false;if(m.disabledWhen){disabled=exports.tps.calcCondition(m.disabledWhen,this._binding)}if(exports.tps.service.isReadonly(this._binding.type())){disabled=true}this.setDisabled(disabled);var val=this._binding.get();if(val!=this.oldVal){this.oldVal=val;this.updateFromValue(val)}return};BindableControl.prototype.updateFromValue=function(v){};BindableControl.prototype.renderContent=function(ch){_super.prototype.renderContent.call(this,ch);var vv=this;if(!this.valListener){this.valListener={valueChanged:function(){vv.updateVisibility()}}}this.initBinding(ch)};BindableControl.prototype.onAttach=function(e){_super.prototype.onAttach.call(this,e);if(this.afterCreate){this.afterCreate(this)}if(this._binding){var m=this._binding.type();this._binding.root().addListener(this.valListener);this.updateVisibility()}};BindableControl.prototype.onDetach=function(e){_super.prototype.onDetach.call(this,e);this._binding.root().removeListener(this.valListener)};return BindableControl}(controls.Composite);exports.BindableControl=BindableControl;var ApplyRevertComposite=function(_super){__extends(ApplyRevertComposite,_super);function ApplyRevertComposite(d){var _this=_super.call(this,"div")||this;_this.d=d;_this._binding=d;var h=_this;d.dirtyController.addListener({valueChanged:function(){h.refresh()}});return _this}ApplyRevertComposite.prototype.initBinding=function(){};ApplyRevertComposite.prototype.renderChildren=function(c){var _this=this;var h=new controls_1.Composite("span");h._style.cssFloat="right";var cmm=new Button("Apply Changes");var dirty=this.d.dirtyController.get();if(!dirty){cmm.addClassName("btn-disabled");cmm.setDisabled(true)}cmm.onClick=function(x){_this.d.commit()};cmm.addClassName("btn-primary");cmm._style.marginRight="5px";h.add(cmm);var r=new Button("Revert");if(!dirty){r.addClassName("btn-disabled");r.setDisabled(true)}h.add(r);r.onClick=function(x){_this.d.revert()};h._style.padding="5px";h.render(c)};return ApplyRevertComposite}(BindableControl);exports.ApplyRevertComposite=ApplyRevertComposite;var BindableComposite=function(_super){__extends(BindableComposite,_super);function BindableComposite(){return _super.apply(this,arguments)||this}BindableComposite.prototype.initBinding=function(ch){if(!this.contentCreated){this.contentCreated=true;this.children=[];var footer=null;if(!this._binding.autoCommit()){var cachingBinding=new exports.tps.CachingBinding(this._binding);this.pb=cachingBinding;footer=new ApplyRevertComposite(cachingBinding)}else{this.pb=this._binding}var cntrl=uifactory.service.createControl(this.pb,this.getRenderingOptions());this.children.push(cntrl);if(footer){this.children.push(footer)}if(cntrl.canShrinkChildrenVertically()){cntrl._style.flex="1 0 0"}}};BindableComposite.prototype.onDetach=function(e){_super.prototype.onDetach.call(this,e);if(this.pb!=this._binding){this.pb.dispose()}};BindableComposite.prototype.needsVerticalScroll=function(){return true};BindableComposite.prototype.hasVerticalSchrink=function(){return _super.prototype.hasVerticalSchrink.call(this)};BindableComposite.prototype.updateVisibility=function(){_super.prototype.updateVisibility.call(this);var cl=this._binding.get()!=null&&this._binding.get()!=undefined;if(cl!=this.hasContent){this.refresh()}};BindableComposite.prototype.onAttach=function(e){_super.prototype.onAttach.call(this,e)};BindableComposite.prototype.renderChildren=function(ch){this.hasContent=this._binding.get()!=null&&this._binding.get()!=undefined;if(this.hasContent){_super.prototype.renderChildren.call(this,ch)}else{ch.innerHTML='<div style="flex: 1 1 0"></div><div style="text-align: center">Please select '+exports.tps.service.caption(this._binding.type()).toLowerCase()+' to see details</div><div style="flex: 1 1 0"></div>'}};return BindableComposite}(BindableControl);exports.BindableComposite=BindableComposite;var Input=function(_super){__extends(Input,_super);function Input(form){if(form===void 0){form=true}var _this=_super.call(this,"input")||this;if(form){_this.addClassName("form-control")}return _this}Input.prototype.updateFromValue=function(v){var el=this._element;if(v!=el.value){if(v===undefined||v===null){v=""}if(exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_DATE)){v=exports.tps.service.label(v,this._binding.type())}el.value=""+v}};Input.prototype.initBinding=function(ch){var _this=this;var el=ch;if(this._binding){var val=this._binding.get();if(!val){val=""}if(exports.tps.service.isNumber(this._binding.type())){this._element.setAttribute("type","number");var mm=this._binding.type();if(mm.maximum){this._element.setAttribute("maximum",""+mm.maximum)}if(mm.minimum){this._element.setAttribute("minimum",""+mm.minimum)}if(mm.step){this._element.setAttribute("step",""+mm.step)}}if(exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_PASSWORD)){this._element.setAttribute("type","password")}el.value=val;el.onkeyup=function(e){var q=el.value;if(exports.tps.service.isSubtypeOf(_this._binding.type(),exports.tps.TYPE_DATEONLY)){_this._binding.set(moment(q).format("YYYY-MM-DD"))}else{_this._binding.set(q)}};el.onchange=function(e){_this._binding.set(el.value)}}};Input.prototype.onAttach=function(x){_super.prototype.onAttach.call(this,x);var bnd=this._binding;if(exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_DATE)){if(exports.tps.service.isSubtypeOf(bnd.type(),exports.tps.TYPE_DATEONLY)){$("#"+this.id()).datetimepicker({format:"YYYY-MM-DD"})}else{$("#"+this.id()).datetimepicker()}$("#"+this.id()).on("dp.change",function(e){if(exports.tps.service.isSubtypeOf(bnd.type(),exports.tps.TYPE_DATEONLY)){bnd.set(moment(e.date).format("YYYY-MM-DD"))}else{bnd.set(moment(e.date).toISOString())}})}else{var haste=this._typeaheadFunction||this._binding.type().typeahead;var v=this;if(haste){var te=this._typeaheadFunction;if(!te){te=this._binding.type().typeahead}if(typeof te=="string"){var code=te;var typeAheadFunction=function(name,c){c(exports.tps.calcExpression(code,v._binding))};te=typeAheadFunction}var w=window;$("#"+this.id()).typeahead({source:te})}}};return Input}(BindableControl);exports.Input=Input;var TextArea=function(_super){__extends(TextArea,_super);function TextArea(){var _this=_super.call(this,"textarea")||this;_this.addClassName("form-control");return _this}TextArea.prototype.updateFromValue=function(v){var el=this._element;if(v!=el.value){if(v===undefined||v===null){v=""}el.value=""+v}};TextArea.prototype.initBinding=function(ch){var _this=this;var el=ch;if(this._binding){var val=this._binding.get();if(!val){val=""}el.value=val;el.onkeyup=function(e){_this._binding.set(el.value)}}};return TextArea}(BindableControl);exports.TextArea=TextArea;var Option=function(_super){__extends(Option,_super);function Option(value){var _this=_super.call(this,"option")||this;_this._text=value;_this.addClassName("form-control");return _this}return Option}(controls.Composite);exports.Option=Option;var Help=function(_super){__extends(Help,_super);function Help(value){var _this=_super.call(this,"span")||this;_this.addClassName("glyphicon");_this.addClassName("glyphicon-question-sign");_this._style.paddingLeft="1px";_this._style.paddingRight="1px";_this.attrs["data-toggle"]="tooltip";_this.attrs["data-placement"]="right";_this.attrs.title=value;return _this}return Help}(controls.Composite);exports.Help=Help;exports.enumOptions=exports.tps.enumOptions;function enumValues(b){var type=b.type();return exports.enumOptions(type,b)}exports.enumValues=enumValues;var EnumInfo=function(){function EnumInfo(b,radio,doSet){if(radio===void 0){radio=false}if(doSet===void 0){
doSet=true}this.b=b;this.labelsMap=new Map;this.values=[];this.labels=[];this.selectedIndex=-1;var enumv=enumValues(b);var vl=b.get();var type=b.type();var hasDescriptions=type;if(type.default){if(!vl){vl=type.default}}for(var i=0;i<enumv.length;i++){var lab=enumv[i];var val=lab;if(hasDescriptions.enumDescriptions){val=hasDescriptions.enumDescriptions[i]}else{if(typeof lab!="string"){val=exports.tps.service.label(lab,type)}}if(val===b.get()){this.selectedIndex=i}this.labelsMap.set(val,lab);this.labels.push(val)}if(!type.required||enumv.indexOf(vl)==-1&&!radio){if(!type.default){this.labels=[""].concat(this.labels);enumv=[""].concat(this.labels);this.labelsMap.set("","");if(!vl||this.labels.indexOf(vl)==-1){vl="";if(doSet&&b.get()){b.set("")}}if(!type.required){this.selectedIndex++}}}else{if(enumv.indexOf(vl)==-1){if(doSet&&b.get()){this.b.set("")}}}if(this.selectedIndex==-1){this.selectedIndex=0}this.values=enumv}return EnumInfo}();exports.EnumInfo=EnumInfo;var Select=function(_super){__extends(Select,_super);function Select(){var _this=_super.call(this,"select")||this;_this.inUpdate=false;_this.addClassName("form-control");return _this}Select.prototype.updateVisibility=function(){_super.prototype.updateVisibility.call(this);var enumF=this._binding.type().enumValues;if(enumF){var enumv=exports.tps.calcExpression(enumF,this._binding);if(JSON.stringify(this.enumOptions)!=JSON.stringify(enumv)){this.selectInited=false;if(this._element){this.inUpdate=true;try{this.initBinding(this._element)}finally{this.inUpdate=false}}}}};Select.prototype.updateFromValue=function(v){if(this._element){this.selectInited=false;this.initBinding(this._element)}};Select.prototype.onAttach=function(el){var _this=this;var info=new EnumInfo(this._binding,false,!this.inUpdate);el.onchange=function(e){_this._binding.set(info.labelsMap.get(el.value))};_super.prototype.onAttach.call(this,el)};Select.prototype.initBinding=function(ch){var _this=this;var el=ch;if(this._binding){if(!this.selectInited){var info=new EnumInfo(this._binding,false,!this.inUpdate);this.enumOptions=[].concat(info.values);el.onchange=function(e){_this._binding.set(info.labelsMap.get(el.value))};this.children=[];info.labels.forEach(function(x){_this.children.push(new Option(x))});this.selectInited=true;this.refresh();el.selectedIndex=info.selectedIndex}}};return Select}(BindableControl);exports.Select=Select;var RadioSelect=function(_super){__extends(RadioSelect,_super);function RadioSelect(){var _this=_super.call(this,"div")||this;_this._style.padding="5px";return _this}RadioSelect.prototype.initBinding=function(){};RadioSelect.prototype.updateFromValue=function(v){this.refresh()};RadioSelect.prototype.renderContent=function(e){var _this=this;_super.prototype.renderContent.call(this,e);var info=new EnumInfo(this._binding,true);var mm=document.createElement("div");if(this.needLabel()){mm.appendChild(document.createTextNode(this._binding.type().displayName));var descr=this._binding.type().description;if(descr){var h=new Help(descr);h._style.paddingLeft="2px";h._style.paddingRight="2px";h.render(mm)}mm.appendChild(document.createTextNode(":"))}e.appendChild(mm);info.labels.forEach(function(x){var input=document.createElement("input");input.type="radio";var vl=info.labelsMap.get(x);input.onchange=function(e){_this._binding.set(vl)};input.name="r"+_this.id();input.value=vl;if(vl==_this._binding.get()){input.checked=true}var lab=document.createElement("div");lab.appendChild(input);lab.appendChild(document.createTextNode(" "+x));e.appendChild(lab)})};return RadioSelect}(BindableControl);exports.RadioSelect=RadioSelect;var Button=function(_super){__extends(Button,_super);function Button(text){var _this=_super.call(this,"button")||this;_this.addClassName("btn");_this.addClassName("btn-default");_this._text=text;return _this}return Button}(controls.Composite);exports.Button=Button;var Link=function(_super){__extends(Link,_super);function Link(txt){if(txt===void 0){txt=""}var _this=_super.call(this,"a")||this;_this.attrs["href"]="#";_this._text=txt;return _this}return Link}(controls.Composite);exports.Link=Link;var PagingControl=function(_super){__extends(PagingControl,_super);function PagingControl(b){var _this=_super.call(this,"nav")||this;_this.start=0;_this.end=5;_this._binding=b;_this._style.margin="0px";_this._style.padding="0px";return _this}PagingControl.prototype.initBinding=function(){};PagingControl.prototype.updateFromValue=function(v){this.refresh()};PagingControl.prototype.renderChildren=function(ch){var _this=this;var cm=new controls_1.Composite("ul");var paged=this._binding;cm._style.margin="2px";cm.addClassName("pagination");cm.addClassName("pagination-sm");var startPage=this.start;var prev=new controls_1.Composite("li");prev.addHTML('<a href="#" aria-label="Previous" >\n        <span aria-hidden="true">&laquo;</span>\n      </a>');if(startPage==0){prev.addClassName("disabled")}cm.add(prev);var endPage=this.end;var pc=paged.pageCount();if(this.end-this.start<5){this.end=this.start+5}if(pc<endPage){endPage=paged.pageCount();this.end=endPage}var total=paged.total();var inside=paged.get();if(paged.hasAllData()||(total!=-1&&(inside&&inside.length>=total)||paged.isLoading()&&!this.lastTimeHasPaged)){this.lastTimeHasPaged=false;return}this.lastTimeHasPaged=true;var _loop_1=function(){pg=new controls_1.Composite("li");if(i==paged.pageNum()){pg.addClassName("active")}var vl=i;if(paged.isLoading()&&i==paged.pageNum()){pg.addHTML('<span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>')}else pg.add(new Link(""+(i+1)));pg.onClick=function(e){paged.requestPage(vl)};cm.add(pg)};var pg;for(var i=startPage;i<endPage;i++){_loop_1()}var next=new controls_1.Composite("li");next.addHTML('<a href="#" aria-label="Next">\n        <span aria-hidden="true">&raquo;</span>        \n        \n      </a>');if(endPage){next.onClick=function(e){paged.requestPage(_this.end-1);if(_this.end<paged.pageCount()){_this.end++;_this.start++}}}if(startPage!=0){prev.onClick=function(e){paged.requestPage(_this.start-1);_this.end--;_this.start--}}if(paged.total()&&paged.total()!=-1){cm.addHTML('<span style="margin: 5px"> showing  '+paged.collectionBinding().workingCopy().length+" "+exports.tps.service.caption(paged.type()).toLocaleLowerCase()+" of "+paged.total()+"</span>")}cm.add(next);this.children=[cm];_super.prototype.renderChildren.call(this,ch)};return PagingControl}(BindableControl);exports.PagingControl=PagingControl;var workbench=require("./workbench");var MasterDetails=function(_super){__extends(MasterDetails,_super);function MasterDetails(lst){var _this=_super.call(this)||this;_this.lst=lst;_this.useSplit=true;if(_this.useSplit){delete _this._style.flexDirection;_this._style.width="100%";_this._style.flex="1 1 0";_this._style.display="flex";return _this}var cm=new controls.Composite("div");cm._style.flex="1 2 0";cm._style.display="flex";cm._style.overflowY="auto";cm._style.flexDirection="column";cm.add(lst);_this.add(cm);var cm1=_this.createDetails(lst);_this.add(cm1);return _this}MasterDetails.prototype.onAttach=function(e){var _this=this;if(this.useSplit){var lp=new workbench.LayoutPart(this._element);var lps=lp.splitHorizontal([50,50],true);this.spEl=lp.element();lps[0].element().style.maxHeight="100%";lps[1].element().style.maxHeight="100%";var v=new controls_1.VerticalFlex;v._style.flex="1 1 0";v._style.overflow="hidden";this.lst.onVisibilityChanged=function(v){_this.setVisible(v);if(v){_this.potentiallyVisible()}};v.add(this.lst);v.render(lps[0].element());this.master=v;this.details=this.createDetails(this.lst);this.details.render(lps[1].element())}_super.prototype.onAttach.call(this,e)};MasterDetails.prototype.potentiallyVisible=function(){var _this=this;if(this.useSplit&&this.spEl&&this.spEl.children[0]){if(this.spEl.children[0].onresize){setTimeout(function(){var pair=_this.spEl.children[0].pairs[0];pair.a.style.width=_this.spEl.children[0].clientWidth/2-pair.aGutterSize+"px";pair.b.style.width=_this.spEl.children[0].clientWidth/2-pair.bGutterSize+"px";pair.calculateSizes.call(pair);pair.fitMin.call(pair);pair.rebalance.call(pair);_this.master.potentiallyVisible();_this.details.potentiallyVisible()},50)}}_super.prototype.potentiallyVisible.call(this)};MasterDetails.prototype.createDetails=function(lst){var bnd=lst.selectionBinding();var tp=bnd.type();if(tp.details&&tp.details.length>0){var details=tp.details[0];var tpp=exports.tps.service.resolvedType(details);console.log(tpp);bnd._type=tpp.result;var bn=new exports.tps.OperationBinding(tpp,bnd);bnd.addListener({valueChanged:function(){var value=bnd.get();bn.execute(function(x){var vl=bnd.get();if(value==vl){if(vl&&!Array.isArray(vl)){Object.keys(x).forEach(function(k){vl[k]=x[k];bnd.refreshChildren()})}}})}})}this._style.flex="1 1 0";var cm1=new BindableComposite("div");cm1._binding=bnd;cm1._style.display="flex";cm1._style.flexDirection="column";cm1._style.flex="1 1 0";cm1._style.marginBottom="5px";cm1._style.borderLeftStyle="solid";cm1._style.borderLeftColor="#eeeeee";var opt=this.getRenderingOptions();var mmdl=opt.maxMasterDetailsLevel?opt.maxMasterDetailsLevel:1;cm1.setRenderingOptions(ro.clone(opt,{noStatus:true,noStatusDecorations:false,maxMasterDetailsLevel:mmdl-1}));return cm1};return MasterDetails}(controls.HorizontalFlex);exports.MasterDetails=MasterDetails;var StatusRender=function(_super){__extends(StatusRender,_super);function StatusRender(){var _this=_super.call(this,"div")||this;_this.displayMessage=true;_this.displayDecorations=true;return _this}StatusRender.prototype.valueChanged=function(e){this.processChanges()};StatusRender.prototype.onAttach=function(e){_super.prototype.onAttach.call(this,e);if(this._binding){this._binding.binding("$status").addListener(this);this.processChanges()}};StatusRender.prototype.processChanges=function(){var st=this._binding.binding("$status").get();if(!this.content){var sp=document.createElement("span");this.content=sp;this._element.appendChild(sp)}if(st.severity==exports.tps.Severity.ERROR){if(this.displayMessage){var msg=new controls.ErrorMessage;msg.setMessage(st.message);msg.render(this.content)}}else{this.content.innerHTML=""}if(this.displayDecorations){var mn=new Map;this.visit(st,mn);this.updateStatusDecorations(this.parent,mn)}};StatusRender.prototype.updateStatusDecorations=function(c,mn){var _this=this;var valid=true;var bnd=c._binding;var shouldIterateChildren=true;if(bnd&&bnd.root()!=this._binding.root()){shouldIterateChildren=false}if(shouldIterateChildren&&c.children){var ch=c.children;var validness=[];ch.forEach(function(child){var vl=_this.updateStatusDecorations(child,mn);valid=valid&&vl;validness.push(vl)});if(c.setChildValidness){c.setChildValidness(validness)}}var bnd=c._binding;if(bnd&&bnd.root()==this._binding.root()){if(mn.has(bnd.uid())){var ss=mn.get(bnd.uid());if(!ss.valid){if(c instanceof AbstractListControl){var lst=c;lst.setStatus(ss)}return false}}else if(c instanceof AbstractListControl){var lst=c;lst.setStatus(exports.tps.ok())}}return valid};StatusRender.prototype.visit=function(s,mn){var _this=this;if(s.uid){mn.set(s.uid,s)}if(s.inner){s.inner.forEach(function(x){return _this.visit(x,mn)})}};StatusRender.prototype.onDetach=function(e){_super.prototype.onDetach.call(this,e);if(this._binding){this._binding.binding("$status").removeListener(this)}};StatusRender.prototype.initBinding=function(ch){};return StatusRender}(BindableControl);exports.StatusRender=StatusRender;var ActionPresenter=function(_super){__extends(ActionPresenter,_super);function ActionPresenter(){var _this=_super.apply(this,arguments)||this;_this.items=[];return _this}ActionPresenter.prototype.onAttach=function(){var _this=this;this.items.forEach(function(i){var ls=i;if(ls.addListener){ls.addListener(_this)}})};ActionPresenter.prototype.valueChanged=function(c){if(this._element){this._element.innerHTML=""}this.renderElement(this._element)};ActionPresenter.prototype.renderContent=function(ch){_super.prototype.renderContent.call(this,ch);this.renderElement(ch)};ActionPresenter.prototype.onDetach=function(){var _this=this;this.items.forEach(function(i){var ls=i;if(ls.removeListener){ls.removeListener(_this)}})};return ActionPresenter}(controls.Composite);exports.ActionPresenter=ActionPresenter;var Toolbar=function(_super){__extends(Toolbar,_super);function Toolbar(){var _this=_super.call(this,"span")||this;_this._style.cssFloat="right";_this._style.marginLeft="3px";return _this}Toolbar.prototype.renderElement=function(e){var rnd=new controls.ToolbarRenderer(this);rnd.style.marginRight="5px";rnd.render(this._element)};return Toolbar}(ActionPresenter);exports.Toolbar=Toolbar;var DropDown=function(_super){__extends(DropDown,_super);function DropDown(){var _this=_super.call(this,"div")||this;_this.contributors=[];_this._styleString="float: right";return _this}DropDown.prototype.onAttach=function(){_super.prototype.onAttach.call(this);this.valueChanged(null)};DropDown.prototype.renderElement=function(e){var view=this;$.contextMenu({selector:"#"+view.ownerId+">*",build:function(){return{items:view.mapItems()}}})};DropDown.prototype.mapItems=function(){var result={};var ms=this.items;this.contributors.forEach(function(x){ms=ms.concat(x.contribute())});ms.forEach(function(x){var res={name:x.title,icon:x.image,disabled:x.disabled,callback:function(){x.run()}};if(x.checked){res.icon="fa-check"}if(x.items){var rr=new DropDown;rr.items=x.items;res.items=rr.mapItems()}result[x.id?x.id:x.title]=res});return result};DropDown.prototype.addTo=function(v){this.ownerId=v.id();var view=this;v.addLifycleListener({attached:function(c,e){view.renderElement(e)},detached:function(c,e){}})};return DropDown}(ActionPresenter);exports.DropDown=DropDown;var Section=function(_super){__extends(Section,_super);function Section(title,grabVertical){if(title===void 0){title=""}if(grabVertical===void 0){grabVertical=false}var _this=_super.call(this,"div")||this;_this.toolbar=new Toolbar;_this.body=new controls.WrapComposite("div");_this.setTitle(title);_this.addClassName("panel");_this.addClassName("panel-default");var heading=new controls.WrapComposite("div");heading._text=_this.title();heading.wrapElement="span";heading.addClassName("panel-heading");if(!heading._text||!heading._text.trim()){heading._style.minHeight="40px"}heading.add(_this.toolbar);_this._style.paddingBottom="0px";_this._style.marginBottom="0px";if(grabVertical){_this._style.display="flex";_this._style.flexDirection="column";_this._style.flex="1 1"}_this.heading=heading;_super.prototype.add.call(_this,heading);_this.body.addClassName("panel-body");if(grabVertical){_this.body._style.display="flex";_this.body._style.flexDirection="column";_this.body._style.flex="1 1"}_this._style.minHeight="200px";_super.prototype.add.call(_this,_this.body);return _this}Section.prototype.add=function(c){this.body.add(c)};Section.prototype.renderContent=function(ch){var cchh=false;if(this.parent instanceof TabFolder){this._style.borderRadius="0px";this.heading._style.borderTopWidth="0px";this._style.borderTopWidth="0px";this.heading._text=" ";this.heading._style.minHeight="40px";this.toolbar._styleString="float: left";this.heading._style.paddingLeft="5px";cchh=true}if(this.parent){if(this.parent.parent==null){this._style.marginRight="5px";this._style.marginLeft="5px"}}if(this.parent instanceof controls_1.Accordition){this._style.borderRadius="0px";this._style.borderBottomWidth="0px";this._style.borderLeftWidth="0px";this.heading._text=" ";this.heading._style.minHeight="40px";this.toolbar._styleString="float: left";this.heading._style.paddingLeft="5px";cchh=true}if(cchh){if(this.toolbar.items.length==0){this.heading.setVisible(false)}}_super.prototype.renderContent.call(this,ch)};Section.prototype.renderChildren=function(ch){if(this.body.children.length==1){if(this.body.children[0]instanceof AbstractListControl){this.body.children[0].parent=this;this.renderElements([this.heading,this.body.children[0]],ch);return}}_super.prototype.renderChildren.call(this,ch)};return Section}(controls.Composite);exports.Section=Section;var RefreshOnChange=function(){function RefreshOnChange(c){this.c=c}RefreshOnChange.prototype.valueChanged=function(e){this.c.dataRefresh(e)};return RefreshOnChange}();var Footer=function(_super){__extends(Footer,_super);function Footer(lst){var _this=_super.call(this,"div")||this;_this._style.width="100%";_this._style.flex="0 0 auto";_this.add(new PagingControl(lst._binding));return _this}Footer.prototype.needsVerticalScroll=function(){return false};Footer.prototype.innerRender=function(r){_super.prototype.innerRender.call(this,r)};return Footer}(controls_1.Composite);exports.Footer=Footer;var AbstractListControl=function(_super){__extends(AbstractListControl,_super);function AbstractListControl(){var _this=_super.apply(this,arguments)||this;_this.sl=[];_this.sm={};_this.selectionVisible=true;_this.customizers=[];_this.labelCustomizers=[];_this.rff=new RefreshOnChange(_this);_this.elbnd=new exports.tps.Binding("");_this.indexToControl=[];return _this}AbstractListControl.prototype.collection=function(){return this._binding.collectionBinding()};AbstractListControl.prototype.setSelectionVisible=function(s){this.selectionVisible=s;this.refresh()};AbstractListControl.prototype.addIcon=function(v,td,i){if(i===void 0){i=0}var icon=exports.tps.service.icon(v,this._binding.collectionBinding().componentType());if(i==0&&icon){td.addHTML('<img style="margin-right: 4px;max-height: 24px" src="'+icon+'"></img>')}};AbstractListControl.prototype.selectionBinding=function(){return this._binding.collectionBinding().selectionBinding()};AbstractListControl.prototype.updateFromValue=function(v){this.dataRefresh()};AbstractListControl.prototype.isSelected=function(v){return this.collection().isSelected(v)};AbstractListControl.prototype.tag=function(){if(this.loading){return"div"}return _super.prototype.tag.call(this)};AbstractListControl.prototype.addInstanceLabel=function(v,rs,t){var rt=exports.tps.service.resolvedType(t);var lab=exports.tps.service.label(v,t);if(!lab){lab=""}if(rt.htmlLabel){rs.addHTML(lab)}else{var label=rs.addLabel(lab)}return label};AbstractListControl.prototype.visitInner=function(v){var _this=this;if(v){if(v.inner){v.inner.forEach(function(x){if(!x.valid){if(x.path&&x.path.charAt(0)=="["){_this.sm[x.path]=x}else{_this.visitInner(x)}}})}}};AbstractListControl.prototype.setStatus=function(v){if(v.valid){if(Object.keys(this.sm).length==0){return}}this.sm={};this.visitInner(v);this.dataRefresh()};AbstractListControl.prototype.hasError=function(num){var err=this.sm["["+num+"]"];return err!=null&&err!=undefined};AbstractListControl.prototype.canShrinkVertically=function(){return true};AbstractListControl.prototype.canShrinkChildrenVertically=function(){return false};AbstractListControl.prototype.addControlCustomizer=function(c){this.customizers.push(c)};AbstractListControl.prototype.removeControlCustomizer=function(c){this.customizers=this.customizers.filter(function(x){return x!=c})};AbstractListControl.prototype.addLabelCustomizer=function(c){this.labelCustomizers.push(c)};AbstractListControl.prototype.removeLabelCustomizer=function(c){this.labelCustomizers=this.customizers.filter(function(x){return x!=c})};AbstractListControl.prototype.addSelectionListener=function(v){this.sl.push(v)};AbstractListControl.prototype.removeSelectionListener=function(v){this.sl=this.sl.filter(function(x){return x!==v})};AbstractListControl.prototype.select=function(v){this.setSelection([v])};AbstractListControl.prototype.getSelection=function(){return this._binding.collectionBinding().getSelection()};AbstractListControl.prototype.setSelectionIndex=function(n){var _this=this;if(this.collection().groupBy()){var vl=this.lastContent[n];if(vl instanceof exports.tps.HasType){var ex=this.collection().expanded(vl);if(ex){this.collection().collapse(vl)}else{this.collection().expand(vl)}return}}{this.collection().setSelectionIndex(n);this.sl.forEach(function(x){return x.selectionChanged(_this.getSelection())})}};AbstractListControl.prototype.setSelection=function(v,refresh){if(refresh===void 0){refresh=true}this.sl.forEach(function(x){return x.selectionChanged(v)});this._binding.collectionBinding().setSelection(v)};AbstractListControl.prototype.onAttach=function(e){this._binding.addListener(this.rff);_super.prototype.onAttach.call(this,e)};AbstractListControl.prototype.onDetach=function(e){this._binding.removeListener(this.rff);this.contentPrepared=false;_super.prototype.onDetach.call(this,e)};AbstractListControl.prototype.createHeader=function(){return null};AbstractListControl.prototype.createBody=function(){return null};AbstractListControl.prototype.initBinding=function(ch){if(this._binding){this.prepareContent()}};AbstractListControl.prototype.componentType=function(){return this._binding.collectionBinding().componentType()};AbstractListControl.prototype.dataRefresh=function(e){if(this.tryHandleSelection(e)){return}this.contentPrepared=false;this.prepareContent()};AbstractListControl.prototype.tryHandleSelection=function(e){if(e&&e.subKind=="selection"){if(e.oldValue&&e.newValue){var suc=true;for(var i=0;i<e.oldValue.length;i++){var found=false;for(var j=0;j<this.lastContent.length;j++){if(this.lastContent[j]==e.oldValue[i]){found=true;this.update(j)}}if(!found){suc=false}}for(var i=0;i<e.newValue.length;i++){var found=false;for(var j=0;j<this.lastContent.length;j++){if(this.lastContent[j]==e.newValue[i]){found=true;this.update(j)}}if(!found){suc=false}}return suc}}return false};AbstractListControl.prototype.createHolder=function(){return new controls_1.Composite("div")};AbstractListControl.prototype.prepareContent=function(){var _this=this;if(this.contentPrepared){return}var val=this._binding.get();this.elbnd._type=this.collection().componentType();this.elbnd.context=this._binding;if(this._binding.isLoading()||this._binding.isError()||this._binding.accessControl().needsAuthentification()){this.contentPrepared=true;this.loading=true;var cc=null;if(this._binding.accessControl().needsAuthentification()){if(this._binding.isError()){if(this._binding.errorKind()=="auth"){cc=new controls.Error(this._binding.errorMessage(),function(){auth.doAuth(_this._binding,function(){_this._binding.clearError()})},true,"Sign in")}else{cc=new controls.Error(this._binding.errorMessage(),function(){_this._binding.clearError()},this._binding.canRetry())}}else{cc=new controls.Error("This view requires authentification",function(){auth.doAuth(_this._binding,function(){_this._binding.clearError()})},true,"Sign in")}}else if(this._binding.isError()){cc=new controls.Error(this._binding.errorMessage(),function(){_this._binding.clearError()},this._binding.canRetry())}else{cc=new controls.Loading}if(!this.tempStyle){this.tempStyle=this._style}this._style={};this._style.display="flex";this._style.flexDirection="column";this._style.flex="1 1 0";this._style.margin="4";this.children=[];this.add(cc);this.refresh();return}else{if(this.loading){this.loading=false;if(this.tempStyle){this._style=this.tempStyle;this.parent.refresh();delete this.tempStyle}}}var ac=this.content();this.children=[];var c=this.createHeader();if(c){this.children.push(c)}var body=this.createBody();this.body=body;var contentB=this;if(body){this.children.push(body);contentB=body}this.fillBody(ac,contentB);this.contentPrepared=true;if(ac.length==0){this.children=[];var comp=this.createNothingContent();this.add(comp)}else if(this.needPaging()){this.footer=new Footer(this);this.add(this.footer)}this.refresh()};AbstractListControl.prototype.content=function(){return this.collection().workingCopy()};AbstractListControl.prototype.createNothingContent=function(){var comp=new controls.Composite("div");comp._style.flex="1 1 0";comp._style.padding="10px";comp.addLabel("Nothing here yet");return comp};AbstractListControl.prototype.needPaging=function(){return this._binding.type().paging};AbstractListControl.prototype.fillBody=function(ac,contentB){var _this=this;var i=0;this.indexToControl=[];this.lastContent=ac;ac.forEach(function(x){_this.elbnd.value=x;var cc=_this.toControl(x,i);_this.customizers.forEach(function(c){return c.customize(cc,i,x)});i++;contentB.children.push(cc);_this.indexToControl.push(cc)})};AbstractListControl.prototype.update=function(index){if(!this.indexToControl){return}if(index>=0&&index<this.indexToControl.length){var ca=this.indexToControl[index];var el=ca.element();var data=this.lastContent[index];var newControl=this.toControl(data,index);this.customizers.forEach(function(c){return c.customize(newControl,index,data)});this.indexToControl[index]=newControl;newControl.parent=this;var shadow=document.createElement("div");newControl.render(shadow);if(el.parentElement){el.parentElement.replaceChild(shadow.children[0],el)}}else{console.log("Error:calling update on not existing index")}};return AbstractListControl}(BindableControl);exports.AbstractListControl=AbstractListControl;var moment=require("moment");var BasicListControl=function(_super){__extends(BasicListControl,_super);function BasicListControl(){var _this=_super.call(this,"div")||this;_this.addClassName("list-group");_this._style.display="flex";_this._style.margin="0px";_this._style.flexDirection="column";_this._style.overflowX="hidden";_this._style.flex="1 1 0";return _this}BasicListControl.prototype.layoutToControl=function(c,l,num){var _this=this;if(l.type=="part"){if(l.image){c.addHTML('<img style="margin-right: 4px;max-height: 24px" src="'+l.image+'"></img>')}if(l.text){if(l.html){c.addHTML(l.text)}else{c.addLabel(l.text)}}if(l.align){c._style.cssFloat=l.align}if(l.class){c._className=l.class}else if(l.role){c._className=l.role}if(l.action){c.onClick=function(x){var obj=_this.collection().workingCopy()[num];var bnds=new raml_type_bindings_1.Binding("");bnds.value=obj;bnds._type=_this.collection().componentType();bnds.context=_this._binding;exports.tps.calcExpression(l.action,bnds,false)}}if(l.background){c._style.background=l.background;if(!l.color){{var q=l.background;if(q.charAt(0)=="#"){q=q.substring(1,7)}var R=parseInt(q.substring(0,2),16);var G=parseInt(q.substring(2,4),16);var B=parseInt(q.substring(4,6),16);var black=.2126*R/255+.7152*G/255+.0722*B/255>.5;if(black){c._style.color="black"}else{c._style.color="white"}}}}if(l.color){c._style.color=l.color}}else{if(l.kind=="vc"){l.parts.forEach(function(x){var mm=new controls_1.Composite("div");_this.layoutToControl(mm,x,num);c.add(mm)})}else{l.parts.forEach(function(x,i){var mm=new controls_1.Composite("span");mm._style.marginRight="5px";_this.layoutToControl(mm,x,num);c.add(mm)})}}};BasicListControl.prototype.appendGroupBy=function(position,rs,v,sel){var _this=this;if(this.collection().groupBy()||this.collection().tree()){var ll=this.collection().levels()[position];if(ll){rs._style.paddingLeft=30*ll+"px"}var chld=this.collection().children(v);var expanded=this.collection().expanded(v);if(chld.length>0){var c=null;if(!expanded){c=rs.addHTML("<span class='glyphicon glyphicon-chevron-right' style='margin-right: 5px'></span>");if(this.collection().tree()){c.onClick=function(c){return _this.collection().expand(v)}}}else{c=rs.addHTML("<span class='glyphicon glyphicon-chevron-down' style='margin-right: 5px'></span>");if(this.collection().tree()){c.onClick=function(c){return _this.collection().collapse(v)}}}}if(!sel&&this.collection().groupBy()&&chld.length>0){rs._classNames.push("groupNode")}}};BasicListControl.prototype.createBody=function(){var bd=new controls_1.Composite("div");bd._style.overflowY="auto";bd.addClassName("table");bd.addClassName("table-striped");bd._style.flex="1 1 auto";bd._style.margin="0";return bd};BasicListControl.prototype.dataRefresh=function(e){if(this.tryHandleSelection(e)){return}this.contentPrepared=false;var vc=this._binding.collectionBinding().workingCopy();if(this.children.indexOf(this.body)==-1||vc.length==0||this._binding.isError()||this._binding.accessControl().needsAuthentification()){_super.prototype.dataRefresh.call(this)}else if(this.body){this.body.children=[];this.fillBody(vc,this.body);this.contentPrepared=true;this.body.refresh();if(this.footer){this.footer.refresh()}}};return BasicListControl}(AbstractListControl);exports.BasicListControl=BasicListControl;var SimpleListControl=function(_super){__extends(SimpleListControl,_super);function SimpleListControl(){return _super.apply(this,arguments)||this}SimpleListControl.prototype.toControl=function(v,position){var _this=this;this.elbnd.value=v;var rs=new controls_1.Composite("li");rs.addClassName("list-group-item");rs.addClassName("noRoundBorder");var sel=this.isSelected(v)&&this.selectionVisible;this.appendGroupBy(position,rs,v,sel);if(position==0){rs._style.borderTopWidth="0px"}rs._style.cursor="pointer";if(sel){rs.addClassName("active")}var layout=exports.tps.decorators.calculateLayout(this.elbnd);if(layout){var mm=rs;if(layout.background){mm=new controls_1.Composite("span");rs.add(mm)}this.layoutToControl(mm,layout,0)}else{this.addIcon(v,rs);var label=this.addInstanceLabel(v,rs,this._binding.collectionBinding().componentType());if(this.hasError(position)){rs.addHTML(ERROR)}this.labelCustomizers.forEach(function(x){return x.customize(label,position,v)})}rs.onClick=function(){_this.setSelectionIndex(position)};return rs};return SimpleListControl}(BasicListControl);exports.SimpleListControl=SimpleListControl;var FullRenderList=function(_super){__extends(FullRenderList,_super);function FullRenderList(){var _this=_super.call(this)||this;_this._style.flex="0 0 auto";return _this}FullRenderList.prototype.createNothingContent=function(){return new controls_1.Composite("span")};FullRenderList.prototype.toControl=function(v,position){var bnd=new exports.tps.Binding("item");bnd.value=v;if(!this._binding.accessControl().canEditItem(v)){bnd.readonly=true;bnd.immutable=true}bnd._type=this.elbnd.type();var cntrl=uifactory.service.createControl(bnd,this.getRenderingOptions());return cntrl};return FullRenderList}(BasicListControl);exports.FullRenderList=FullRenderList;var ButtonMultiSelectControl=function(_super){__extends(ButtonMultiSelectControl,_super);function ButtonMultiSelectControl(){var _this=_super.call(this,"div")||this;_this._single=false;_this._style.paddingLeft="5px";_this._style.paddingRight="5px";return _this}ButtonMultiSelectControl.prototype.createNothingContent=function(){var comp=new controls.Composite("div");return comp};ButtonMultiSelectControl.prototype.updateFromValue=function(){this._binding.refresh()};ButtonMultiSelectControl.prototype.dataRefresh=function(){this.contentPrepared=false;this.refresh()};ButtonMultiSelectControl.prototype.setSingle=function(single){this._single=single};ButtonMultiSelectControl.prototype.content=function(){var cnt=this.collection().workingCopy();if(cnt.length==0){return this.collection().getSelection()}return cnt};ButtonMultiSelectControl.prototype.needLabel=function(){if(this.parent){if(this.parent.rendersLabel(this)){return false}}return true};ButtonMultiSelectControl.prototype.initBinding=function(c){if(!this.title()){this.setTitle(exports.tps.service.caption(this._binding.type()))}_super.prototype.initBinding.call(this,c)};ButtonMultiSelectControl.prototype.renderContent=function(ch){if(this.needLabel()){ch.innerHTML="<span>"+this.title()+":</span>"}_super.prototype.renderContent.call(this,ch)};ButtonMultiSelectControl.prototype.toControl=function(v){var _this=this;var lab=exports.tps.service.label(v,this._binding.collectionBinding().componentType());var rs=new Button(lab);rs._classNames=["btn","btn-xs","btn-primary"];rs._style.margin="3px";rs._style.cursor="pointer";var icon=exports.tps.service.icon(v,this._binding.collectionBinding().componentType());if(icon){rs.addHTML('<img src="'+icon+'" width="16px" style="margin-left: 3px;margin-right: 3px;margin-top:2px;float: left">')}if(true){rs.onClick=function(){if(!_this._binding.collectionBinding().selectionBinding().accessControl().canEditSelf()){return}if(!_this.isSelected(v)){
rs.removeClassName("btn-primary");rs.addClassName("btn-success");var mm=[v].concat(_this.getSelection());if(_this._single){mm=[v]}_this.setSelection(mm)}else{if(_this._single){_this.setSelection([]);return}rs.addClassName("btn-primary");rs.removeClassName("btn-success");var mm=[].concat(_this.getSelection());mm=mm.filter(function(x){return!exports.tps.service.isSame(x,v,_this.componentType())});_this.setSelection(mm)}}}if(this.isSelected(v)){rs.addClassName("btn-success")}else{rs.addClassName("btn-primary")}return rs};return ButtonMultiSelectControl}(AbstractListControl);exports.ButtonMultiSelectControl=ButtonMultiSelectControl;var h=require("javascript-detect-element-resize");var TableControl=function(_super){__extends(TableControl,_super);function TableControl(){var _this=_super.apply(this,arguments)||this;_this.lastWidth=-1;_this.scheduled=false;return _this}TableControl.prototype.refresh=function(){_super.prototype.refresh.call(this);if(this.attached){this.resizeHeaders()}};TableControl.prototype.dataRefresh=function(e){_super.prototype.dataRefresh.call(this,e);this.resizeHeaders()};TableControl.prototype.estimateSizes=function(v){var ps=this.columnProps();var mmm={};ps.forEach(function(x){if(!x){return}var val=mmm[x.id];if(!val){val=0}if(x.displayName.length>val){val=x.displayName.length}v.forEach(function(y){var lab=exports.tps.service.label(exports.tps.service.getValue(x.type,y,x.id),x.type);if(!lab){lab=""}var sz=lab.length;var rt=exports.tps.service.resolvedType(x.type);if(rt.cellSize){sz=rt.cellSize}if(sz>val){val=sz}});mmm[x.id]=val});return mmm};TableControl.prototype.createHeader=function(){var _this=this;var header=new controls_1.Composite("div");var vc=this._binding.collectionBinding().workingCopy();this.sizes=this.estimateSizes(vc);header._style.fontWeight="bold";header.addClassName("list-group-item");header._style.display="flex";header.addClassName("noRoundBorder");header._style.flexDirection="row";header._style.borderTopWidth="0px";header._style.borderBottomWidth="1px";header._style.borderBottomStyle="solid";header._style.flex="0 0 auto";var ps=this.columnProps();ps.forEach(function(x){var th=new controls_1.Composite("div");th.addLabel(x.displayName);th._style.flex=_this.calcFlex(x);th._style.borderBottomWidth="0px";header.add(th)});this.header=header;return header};TableControl.prototype.calcFlex=function(x){return this.sizes[x.id]+" "+this.sizes[x.id]+" 50px"};TableControl.prototype.onAttach=function(e){var _this=this;this.attached=true;_super.prototype.onAttach.call(this,e);if(e.parentElement&&e.parentElement.parentElement){addResizeListener(e.parentElement.parentElement,function(){_this.resizeHeaders()})}else{if(e.parentElement){addResizeListener(e.parentElement,function(){_this.resizeHeaders()})}}this.resizeHeaders()};TableControl.prototype.resizeHeaders=function(){if(this.scheduled){return}var v=this;this.scheduled=true;setTimeout(function(){v.scheduled=false;v.innerRefreshHeaders()},50)};TableControl.prototype.innerRefreshHeaders=function(){var _this=this;if(this.body){if(this.body.children.length>0){var mm=this.body.children[0];if(mm){var el=document.getElementById(mm.id());if(el){var ww=el.clientWidth-10;if(this.lastWidth==ww){return}this.lastWidth=ww;mm.children.forEach(function(x,i){var el=document.getElementById(x.id());var w=el.clientWidth;document.getElementById(_this.header.children[i].id()).style.flex="0 0 "+w+"px"})}}}}};TableControl.prototype.columnProps=function(){var _this=this;var ps=[];var columns=this._binding.type().columns;if(columns){ps=[];columns.forEach(function(x){var pr=exports.tps.service.property(_this._binding.collectionBinding().componentType(),x);if(!pr){return}ps.push(pr)})}else{var ps=exports.tps.service.visibleProperties(this._binding.collectionBinding().componentType());var groups=exports.tps.service.propertyGroups(this._binding.collectionBinding().componentType());if(groups.length>0&&groups[0]){ps=groups[0].properties.filter(function(x){var c=x.type;if(c.visibleWhen||c.hiddenWhen){return false}return true})}}return ps};TableControl.prototype.toControl=function(v,position){var _this=this;var lab=exports.tps.service.label(v,this._binding.type());var rs=new controls_1.Composite("li");rs._style.display="flex";rs._style.flexDirection="row";var ps=this.columnProps();var sel=this.isSelected(v)&&this.selectionVisible;rs.addClassName("noRoundBorder");rs.addClassName("list-group-item");if(sel){rs.addClassName("active")}ps.forEach(function(p,i){var td=new controls_1.Composite("div");td._style.display="inline";td._style.flex=_this.calcFlex(p);td.addClassName("col");var has=false;if(_this.collection().groupBy()||_this.collection().tree()){if(_this.collection().children(v).length>0){if(i==0){_this.appendGroupBy(position,rs,v,sel);has=true;var layout=exports.tps.decorators.calculateLayout(_this.elbnd);if(layout){var mm=td;if(layout.background){mm=new controls_1.Composite("span");rs.add(mm)}_this.layoutToControl(mm,layout,0)}}if(i!=0){return}}}if(!has){_this.addIcon(v,td,i);_this.addInstanceLabel(exports.tps.service.getValue(p.type,v,p.id),td,p.type)}if(i==0){if(_this.hasError(position)){td.addHTML(ERROR)}}rs.add(td)});rs._style.cursor="pointer";rs.onClick=function(){_this.setSelectionIndex(position)};return rs};return TableControl}(BasicListControl);exports.TableControl=TableControl;var PopoverSelect=function(_super){__extends(PopoverSelect,_super);function PopoverSelect(b,icon,btnStyle,select,showTitle,extra){if(btnStyle===void 0){btnStyle="btn-success"}if(select===void 0){select=true}if(showTitle===void 0){showTitle=true}var _this=_super.call(this,"div")||this;_this.b=b;_this.select=select;_this.extra=extra;_this._binding=b;_this._style.marginRight="3px";var title=exports.tps.service.caption(b.type());var dialogTitle=title;if(!showTitle){title=""}var description=b.type().description;if(!description){description=""}var cl=b.get();if(!cl){cl=b.type().default}var caption=exports.tps.service.label(cl,b.type());_this.addHTML('<div class="btn-group" id="'+(_this.id()+"container")+'">\n'+(select?'<button  type="button"  style="cursor: hand;" class="btn btn-xs '+btnStyle+'">'+(icon?'<span style="position: relative;top:2px;margin-right: 2px" class="glyphicon '+icon+'"></span>':"")+title+":</button>":"")+'\n<button href="#" id="'+(_this.id()+"p")+'"  type="button" class="btn btn-xs '+(!select?btnStyle:"btn-default dropdown-toggle")+' \naria-haspopup="true" aria-expanded="false" data-trigger="manual"\n\ntitle="'+dialogTitle+'"  data-content="'+description+'"><span id="'+(_this.id()+"lc")+'" >'+(showTitle?caption:"")+"</span>"+(select?'<span class="caret"></span>':'<span class="glyphicon '+icon+'"></span>'+(showTitle?title:""))+"</button>\n</div>");return _this}PopoverSelect.prototype.onAttach=function(e){var v=this.id()+"content";var binding=this.b;var id=this.id();var visible=false;if(this.extra){this.extra.render(document.getElementById(this.id()+"container"))}document.getElementById(id+"p").onclick=function(x){if(!visible){$("#"+id+"p").popover("show");visible=true}else{$("#"+id+"p").popover("hide");visible=false}x.stopPropagation()};var options=this.getRenderingOptions();$("#"+this.id()+"p").popover({placement:"auto bottom",animation:false,template:'<div class="popover" role="tooltip">\n<div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content" style="min-width: 200px" id="'+v+'"></div></div>'});$("#"+this.id()).on("shown.bs.popover",function(e){var content=document.getElementById(v);var cm=new controls_1.Composite("span");cm._rendersLabel=true;var opt=ro.clone(options);opt.maxValuesForRadio=15;cm.add(uifactory.service.createControl(binding,opt));cm.render(content);document.onmouseup=function(x){var e=x.srcElement;var found=false;while(e){if(e==content){found=true}if(e.id==id+"p"){found=true}e=e.parentElement}if(!found){$("#"+id+"p").popover("hide");visible=false}}});_super.prototype.onAttach.call(this,e)};PopoverSelect.prototype.updateFromValue=function(){if(!this.select){return}var el=document.getElementById(this.id()+"lc");if(el){var cl=this.b.get();if(!cl){cl=this.b.type().default}var original=this.b.fromReferenceToOriginal(cl);var tp=this.b.type();if(original){cl=original;var rt=this.b.referencedType();if(rt){tp=rt}}var caption=exports.tps.service.label(cl,tp);el.innerText=caption;var icon=exports.tps.service.icon(cl,tp);if(icon){el.innerHTML=el.innerHTML+('<img src="'+icon+'" width="16px" style="margin-left: -3px;margin-right: 3px;margin-top:2px;float: left">')}}};PopoverSelect.prototype.initBinding=function(){};return PopoverSelect}(BindableControl);exports.PopoverSelect=PopoverSelect;var CheckBox=function(_super){__extends(CheckBox,_super);function CheckBox(caption){if(caption===void 0){caption=""}var _this=_super.call(this,"div")||this;_this.setTitle(caption);_this.addClassName("checkbox");_this.addClassName("checkbox-inline");_this._style.paddingLeft="5px";_this._style.paddingRight="2px";_this._style.margin="0px";return _this}CheckBox.prototype.updateFromValue=function(v){if(this.input){this.input.checked=""+v=="true"}};CheckBox.prototype.innerSetDisabled=function(v){_super.prototype.innerSetDisabled.call(this,v);if(v){this._element.style.opacity="0.4"}else{this._element.style.opacity=""}};CheckBox.prototype.initBinding=function(ch){var _this=this;var lab=document.createElement("label");var input=document.createElement("input");this.input=input;input.type="checkbox";input.onchange=function(e){_this._binding.set(input.checked)};if(this._binding){input.checked=""+this._binding.get()=="true"}lab.appendChild(input);lab.appendChild(document.createTextNode(this.title()));ch.appendChild(lab)};return CheckBox}(BindableControl);exports.CheckBox=CheckBox;var BindedReadonly=function(_super){__extends(BindedReadonly,_super);function BindedReadonly(){return _super.apply(this,arguments)||this}BindedReadonly.prototype.initBinding=function(){if(this._binding){this.setTitle(exports.tps.service.caption(this._binding.type()))}};BindedReadonly.prototype.updateFromValue=function(){this.refresh()};BindedReadonly.prototype.updateVisibility=function(){_super.prototype.updateVisibility.call(this)};BindedReadonly.prototype.needLabel=function(){if(this.parent){if(this.parent.rendersLabel(this)){return false}}return true};BindedReadonly.prototype.canShrinkVertically=function(){return false};BindedReadonly.prototype.needsVerticalScroll=function(){return false};return BindedReadonly}(BindableControl);exports.BindedReadonly=BindedReadonly;var BindedLink=function(_super){__extends(BindedLink,_super);function BindedLink(){return _super.apply(this,arguments)||this}BindedLink.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.service.label(vl,this._binding.type());if(vl){var uheader="https://www.youtube.com/watch?v=";var uheader1="http://www.youtube.com/watch?v=";var alternative="https://youtu.be/";if((""+vl).startsWith(uheader)){c.innerHTML='<iframe width="300" height="200" src="https://www.youtube.com/embed/'+(""+vl).substring(uheader.length)+'" frameborder="0" allowfullscreen></iframe>'}else if((""+vl).startsWith(uheader1)){c.innerHTML='<iframe width="300" height="200" src="https://www.youtube.com/embed/'+(""+vl).substring(uheader1.length)+'" frameborder="0" allowfullscreen></iframe>'}else if((""+vl).startsWith(alternative)){c.innerHTML='<iframe width="300" height="200" src="https://www.youtube.com/embed/'+(""+vl).substring(alternative.length)+'" frameborder="0" allowfullscreen></iframe>'}else{c.innerHTML='<a style="padding: 4px" href="'+vl+'">'+this.title()+"</a>"}}}};return BindedLink}(BindedReadonly);exports.BindedLink=BindedLink;var BindedImage=function(_super){__extends(BindedImage,_super);function BindedImage(){var _this=_super.call(this,"span")||this;_this.height=150;return _this}BindedImage.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.service.label(vl,this._binding.type());if(this.needLabel()){cnt="<span class='fieldCaption' style='display: inline'>"+this.title()+":</span><span class='fieldValue' style='margin-left: 5px'>"+cnt+"</span>"}if(vl){c.innerHTML='<img height="'+this.height+'" src="'+vl+'"></img>'}}};return BindedImage}(BindedReadonly);exports.BindedImage=BindedImage;var BindedIcon=function(_super){__extends(BindedIcon,_super);function BindedIcon(){var _this=_super.call(this)||this;_this.height=24;return _this}return BindedIcon}(BindedImage);exports.BindedIcon=BindedIcon;var Thumbnail=function(_super){__extends(Thumbnail,_super);function Thumbnail(){var _this=_super.call(this)||this;_this.height=64;return _this}return Thumbnail}(BindedImage);exports.Thumbnail=Thumbnail;var BindedFrame=function(_super){__extends(BindedFrame,_super);function BindedFrame(){return _super.call(this,"span")||this}BindedFrame.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.service.label(vl,this._binding.type());if(this.needLabel()){cnt="<span class='fieldCaption' style='display: inline'>"+this.title()+":</span><span class='fieldValue' style='margin-left: 5px'>"+cnt+"</span>"}if(vl){c.innerHTML='<iframe width="100%" src="'+vl+'"></iframe>'}}};return BindedFrame}(BindedReadonly);exports.BindedFrame=BindedFrame;var BindedCode=function(_super){__extends(BindedCode,_super);function BindedCode(){return _super.call(this,"pre")||this}BindedCode.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();if(!vl){vl=""}var language=this._binding.type().language;if(language){if(this._binding.parent()){var val=this._binding.parent().lookupVar(language);if(val&&val[language]){language=val[language]}}}else language="javascript";c.innerHTML="<code class='"+language+"'>"+controls.escapeHtml(vl)+"</code>";setTimeout(function(){if(window.hljs){window.hljs.highlightBlock(c)}},100)}};return BindedCode}(BindedReadonly);exports.BindedCode=BindedCode;var BindedLabel=function(_super){__extends(BindedLabel,_super);function BindedLabel(){return _super.apply(this,arguments)||this}BindedLabel.prototype.onAttach=function(x){_super.prototype.onAttach.call(this,x)};BindedLabel.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.service.label(vl,this._binding.type());if(!this._binding.type().htmlLabel&&!exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_HTML)){cnt=controls.escapeHtml(cnt)}if(this._binding.parent()){var label=this._binding.parent().type().label;var id=this._binding.id();if(label==id||!label&&(id=="name"||id=="title"||id=="label")){var options=this.getRenderingOptions();if(options.level<=3){cnt="<h3>"+cnt+"</h3>";c.innerHTML=cnt;return}if(options.level<=6){cnt="<h5>"+cnt+"</h5>";c.innerHTML=cnt;return}}}if(this.needLabel()){cnt="<span class='fieldCaption' style='display: inline'>"+this.title()+":</span><span class='fieldValue' style='margin-left: 5px'>"+cnt+"</span>"}c.innerHTML='<span style="padding: 4px">'+cnt+"</span>"}};return BindedLabel}(BindedReadonly);exports.BindedLabel=BindedLabel;var BindedHeader=function(_super){__extends(BindedHeader,_super);function BindedHeader(level){if(level===void 0){level=3}return _super.call(this,"h"+level)||this}BindedHeader.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.service.label(vl,this._binding.type());if(!this._binding.type().htmlLabel&&!exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_HTML)){cnt=controls.escapeHtml(cnt)}c.innerHTML='<span style="padding: 4px">'+cnt+"</span>"}};return BindedHeader}(BindedReadonly);exports.BindedHeader=BindedHeader;var AlignedContainer=function(_super){__extends(AlignedContainer,_super);function AlignedContainer(right){if(right===void 0){right=true}var _this=_super.call(this,"div")||this;_this.fl=new controls_1.HorizontalFlex;if(right){_this.fl._style.cssFloat="right"}else{_this.fl._style.cssFloat="left"}_this.children.push(_this.fl);_this.fl.parent=_this;return _this}AlignedContainer.prototype.add=function(c){this.fl.add(c)};AlignedContainer.prototype.remove=function(c){this.fl.remove(c)};return AlignedContainer}(controls_1.Composite);exports.AlignedContainer=AlignedContainer;var BindedButton=function(_super){__extends(BindedButton,_super);function BindedButton(){var _this=_super.call(this,"button")||this;_this.addClassName("btn");_this.addClassName("btn-default");_this._style.margin="5px";return _this}BindedButton.prototype.renderContent=function(c){var _this=this;_super.prototype.renderContent.call(this,c);if(this._binding){c.innerText=exports.tps.service.caption(this._binding.type());c.onclick=function(x){var exp=_this._binding.type().body;exports.tps.calcExpression(exp,_this._binding,false);_this._binding.root().refresh()}}};return BindedButton}(BindedReadonly);exports.BindedButton=BindedButton;var Interpolator=function(_super){__extends(Interpolator,_super);function Interpolator(level){if(level===void 0){level=3}return _super.call(this,"span")||this}Interpolator.prototype.renderContent=function(c){_super.prototype.renderContent.call(this,c);if(this._binding){var vl=this._binding.get();var cnt=exports.tps.ts.interpolate(this.label,vl,this._binding.type());if(!this._binding.type().htmlLabel&&!exports.tps.service.isSubtypeOf(this._binding.type(),exports.tps.TYPE_HTML)){cnt=controls.escapeHtml(cnt)}c.innerHTML='<span style="padding: 4px">'+cnt+"</span>"}};return Interpolator}(BindedReadonly);exports.Interpolator=Interpolator},{"./auth":2,"./controls":4,"./extraCss":5,"./renderingOptions":9,"./uifactory":11,"./workbench":12,"javascript-detect-element-resize":16,moment:18,"raml-type-bindings":26}],7:[function(require,module,exports){"use strict";var controls_1=require("./controls");function adjustLayout(c){c.children.forEach(function(x){if(x instanceof controls_1.Composite){adjustLayout(x)}});if(!c.parent){}}exports.adjustLayout=adjustLayout},{"./controls":4}],8:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};require("headjs/dist/1.0.0/head.js");var display=require("./uifactory");exports.wb=require("./workbench");exports.controls=require("./controls");exports.forms=require("./forms");var prepared=false;exports.wb.defaultNavBar.brandRight="";function prepare(f){if(prepared){f();return}head.load(["https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"],function(){head.load(["https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js","https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.6/marked.min.js","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js","https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.4.2/jquery.contextMenu.js","https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js","https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.45/js/bootstrap-datetimepicker.min.js","https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.9/js/bootstrap-dialog.min.js","https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css","https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css","https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.45/css/bootstrap-datetimepicker.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.4.2/jquery.contextMenu.min.css","https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.9/css/bootstrap-dialog.min.css"],function(){prepared=true;f()})})}exports.prepare=prepare;function render(el,b,o){prepare(function(){var control=display.service.createControl(b,o);control.render(el)})}exports.render=render;function simpleListView(title,value,icon,labelField){var result=new exports.wb.TreeView(title,title);result.setLabelProvider(new exports.wb.SimpleLabelProvider(icon,labelField));result.setInput(value);return result}exports.simpleListView=simpleListView;function application(el,title,defaultPespective,initialPerspective,cb){prepare(function(){var app=new exports.wb.Application(title,initialPerspective,el,defaultPespective);if(cb){cb(app)}})}exports.application=application;var SimpleView=function(_super){__extends(SimpleView,_super);function SimpleView(title,f){var _this=_super.call(this,title,title)||this;_this.f=f;return _this}SimpleView.prototype.innerRender=function(e){this.f(e)};return SimpleView}(exports.wb.ViewPart);function view(title,f){return new SimpleView(title,f)}exports.view=view;exports.ViewPart=exports.wb.ViewPart;exports.Application=exports.wb.Application;exports.Relation=exports.wb.Relation},{"./controls":4,"./forms":6,"./uifactory":11,"./workbench":12,"headjs/dist/1.0.0/head.js":15}],9:[function(require,module,exports){"use strict";function defaultOptions(){return{maxMasterDetailsLevel:2,noStatusDecorations:false}}exports.defaultOptions=defaultOptions;function clone(f,overrides){if(overrides===void 0){overrides={}}var rs={};Object.keys(f).forEach(function(x){return rs[x]=f[x]});Object.keys(overrides).forEach(function(x){return rs[x]=overrides[x]});return rs}exports.clone=clone},{}],10:[function(require,module,exports){"use strict";var tps=require("raml-type-bindings");var uif=require("./uifactory");var ic=require("./controls");var frms=require("./forms");var controls_1=require("./controls");var RepresentationRegistry=function(){function RepresentationRegistry(){this.representations={};this.bindable={}}return RepresentationRegistry}();exports.RepresentationRegistry=RepresentationRegistry;var RepresentationProcessor=function(){function RepresentationProcessor(){this.registry=new RepresentationRegistry;this.registry["hc"]=function(){return new ic.HorizontalFlex};this.registry["rc"]=function(){return new frms.AlignedContainer(true)};this.registry["lc"]=function(){return new frms.AlignedContainer(false)};this.registry["vc"]=function(){return new ic.VerticalFlex};this.registry["tf"]=function(){return new frms.TabFolder};this.registry["htf"]=function(){return new ic.HorizontalTabFolder};this.registry["accordition"]=function(){return new ic.AccorditionContainer};this.registry["h3"]=function(){return new frms.BindedHeader(3)};this.registry["h1"]=function(){return new frms.BindedHeader(1)};this.registry["list"]=function(b,r){return uif.createList(b,r,"list")};this.registry["list-only"]=function(b,r){return uif.createList(b,r,"list-only")};this.registry["table"]=function(b,r){return uif.createList(b,r,"table")};this.registry["table-only"]=function(b,r){return uif.createList(b,r,"table-only")};this.registry["elements"]=function(b,r){return uif.createList(b,r,"elements")};this.registry["inline"]=function(b,r){return uif.service.createControl(b,r)};this.registry["h2"]=function(){return new frms.BindedHeader(2)};this.registry["h4"]=function(){return new frms.BindedHeader(4)};this.registry["h5"]=function(){return new frms.BindedHeader(5)};this.registry["label"]=function(){return new frms.Interpolator(5)};this.registry["tag-list"]=function(){return new frms.ButtonMultiSelectControl};this.registry["icon"]=function(){return new frms.BindedIcon};this.registry["thumbnail"]=function(){return new frms.Thumbnail};this.registry.bindable["tag-list"]=true;this.registry.bindable["thumbnail"]=true;this.registry.bindable["h3"]=true;this.registry.bindable["list"]=true;this.registry.bindable["list-only"]=true;this.registry.bindable["table"]=true;this.registry.bindable["table-only"]=true;this.registry.bindable["elements"]=true;this.registry.bindable["inline"]=true;this.registry.bindable["h1"]=true;this.registry.bindable["h2"]=true;this.registry.bindable["h4"]=true;this.registry.bindable["h5"]=true;this.registry.bindable["label"]=true}RepresentationProcessor.prototype.processRepresentation=function(b,representation,pc,options){var _this=this;if(!representation){return uif.service.createControl(b,options)}if(typeof representation=="string"){var key=representation;var cp=key.indexOf("(");var argArray=[];if(cp!=-1){var args=key.substring(cp+1,key.length-1);key=key.substring(0,cp);argArray=args.split(",")}if(this.registry[key]){var val=this.registry[key];var rs=val(b,options);processArgs(rs,argArray);return rs}var subBnd=b.binding(key);if(subBnd.type()==tps.TYPE_ANY){if(representation=="----"){var cnt=new controls_1.Composite("hr");return cnt}var i=new frms.Interpolator;i.label=representation;i._binding=b;return i}var tp=subBnd.type();var rep=tp.representation;var result=this.processRepresentation(subBnd,rep,pc,options);processArgs(result,argArray);return result}if(typeof representation=="object"){if(Array.isArray(representation)){var ls=representation;ls.forEach(function(x){pc.add(_this.processRepresentation(b,x,pc,options))});return pc}else{var keys=Object.keys(representation);if(keys.length==1){var key=keys[0];var val=representation[key];var cp=key.indexOf("(");var argArray=[];if(cp!=-1){var args=key.substring(cp+1,key.length-1);key=key.substring(0,cp);argArray=args.split(",")}var isBinding=this.registry.bindable[key];var ff=this.registry[key];if(ff){if(isBinding){if(key=="label"){var rs=ff(vb,options);rs._binding=b;rs.label=val}else{var vb=b.binding(val);var rs=ff(vb,options);rs._binding=vb}}else{var rs=ff(b,options);this.processRepresentation(b,val,rs,options)}processArgs(rs,argArray);return rs}}}}};return RepresentationProcessor}();exports.RepresentationProcessor=RepresentationProcessor;function processArgs(v,array){array.forEach(function(x){x=x.trim();if(x=="grabVertical"){v._style.flex="1 1 auto"}if(x=="grab"){v._style.flex="1 1 auto"}if(x=="no-min-size"){v._style.flexBasis="0"}if(x=="no-margin"){v._style.margin="0px"}if(x=="padTop"){v._style.paddingTop="5px"}if(x=="padBottom"){v._style.paddingBottom="5px"}if(x=="no-selection"){v.setSelectionVisible(false)}if(x=="padLeft"){v._style.paddingLeft="5px"}if(x=="padRight"){v._style.paddingRight="5px"}if(x=="pad"){v._style.padding="5px"}if(x=="eq"){v.children.forEach(function(y){y._style.flex="1 1 0"})}})}},{"./controls":4,"./forms":6,"./uifactory":11,"raml-type-bindings":26}],11:[function(require,module,exports){"use strict";var controls=require("./controls");var tps=require("raml-type-bindings");var forms=require("./forms");var controlPanel=require("./controlPanel");var actions=require("./actions");var ro=require("./renderingOptions");var forms_1=require("./forms");var raml_type_bindings_1=require("raml-type-bindings");var controls_1=require("./controls");var rm=require("./representationManager");var BooleanControlFactory={createControl:function(b,r){var rs=new forms.CheckBox(b.type().displayName);rs._binding=b;if(b.type().description){var h=new forms.Help(b.type().description);h._style.paddingRight="10px";h._style.marginTop="2px";var s=new controls.Composite("span");s.add(rs);s.add(h);return s}return rs}};var ActionControlFactory={createControl:function(b,r){var rs=new forms.BindedButton;rs._binding=b;return rs}};var UnionControlFactory={createControl:function(b,r){var u=b.type();var allScalar=true;var allObject=true;var allArray=true;var allMap=true;u.options.forEach(function(x){allScalar=x&&tps.service.isScalar(tps.service.resolvedType(x))});if(allScalar){return StringControlFactory.createControl(b)}var s=new controls.Composite("span");s.addLabel("Can not represent type: "+u.displayName);return s}};var URLControlFactory={createControl:function(b,r){if(b.accessControl().canEditSelf()){return StringControlFactory.createControl(b,r)}else{var bLink=new forms.BindedLink("span");if(tps.service.isSubtypeOf(b.type(),tps.TYPE_HTMLURL)){}if(tps.service.isSubtypeOf(b.type(),tps.TYPE_IMAGEURL)){bLink=new forms.BindedImage}bLink._binding=b;return bLink}}};tps.declareMeta(tps.TYPE_URL,URLControlFactory);tps.declareMeta(tps.TYPE_ACTION,ActionControlFactory);tps.declareMeta(tps.TYPE_UNION,UnionControlFactory);tps.declareMeta(tps.TYPE_BOOLEAN,BooleanControlFactory);var StringControlFactory={createControl:function(b,rc){if(b.type().reference){return referenceControl(b)}var repre=b.type();var representation=repre.representation;if(!b.accessControl().canEditSelf()){var hh=tps.service.isSubtypeOf(b.type(),tps.TYPE_CODE);if(hh){var mmm=new forms.BindedCode;mmm._binding=b;return mmm}var bl=new forms.BindedLabel("div");bl._binding=b;return bl}var r=new forms.InputGroup;var nAddon=new forms.InputGroupAddOn;if(rc.kind!="filter"){r._style.width="100%"}else{r._style.padding="0px";r._style.marginRight="3px"}r.add(nAddon);nAddon._style.textAlign="left";var ll=new controls.Composite("span");var gtitle=b.type().displayName+(b.type().required?"* ":" ");ll.addLabel(gtitle);if(b.type().description){ll.add(new forms.Help(b.type().description))}ll._style.cssFloat="left";nAddon.add(ll);var mm=b.type();if(mm.enum||mm.enumValues){if(mm.enum){var mv=rc.maxValuesForRadio;if(mv===null||mv===undefined){mv=6}if(representation=="radio"||mm.enum.length<mv&&rc.kind!="filter"&&representation!="select"){var res=new forms_1.RadioSelect;res._binding=b;return res}}var select=new forms.Select;select._binding=b;r.add(select)}else{var w=new forms.Input;if(b.type().multiline){w=new forms.TextArea;w._style.minHeight="200px";w._style.borderRadius="0px";if(rc.tabsTop){w._style.borderTopWidth="0px";return w}w._style.borderWidth="0px";w._style.height="100%";w._style.flex="1 1 auto";w._binding=b;var vm=new controls.Composite("div");var s=new forms.Section(b.type().displayName,true);if(!rc.noMargin){s._style.margin="5px"}s.body._style.padding="0px";s.add(w);return s}w._binding=b;r.add(w)}return r}};function createList(b,rc,rep){var repre=b.type();var representation=rep?rep:repre.representation;var r=new forms.Section(b.type().displayName,true);var params=b.type().parameters;var menuOnlyItems=[];var contributors=[];if(b instanceof tps.ViewBinding){var ps=b.parameterBindings();if(ps.length>0){var hs=new controlPanel.CollectionControlPanel(b);if(hs.visibleParameters().length>0){r.heading._style.padding="5px";hs._style.cssFloat="right";r.heading.add(hs);contributors.push(hs)}}}if(tps.service.isMultiSelect(b.type())){if(!b.accessControl().canEditSelf()){var bm=new forms.ButtonMultiSelectControl;bm._binding=b;return bm}var bm=new forms.ButtonMultiSelectControl;var ct=tps.service.componentType(b.type());var ll=tps.enumOptionsBinding(b.type(),b);if(ll){var cl;if(ll){cl=ll.collection}else{var cl=new tps.Binding("");cl.value=forms.enumOptions(ct,b);cl._type=b.type()}bm._binding=cl;tps.bidirectional(b,cl,ll.transformer,ll.btrasform);var cmm=new controls.Composite("span");cmm.setTitle(tps.service.caption(b.type()));bm.setTitle(tps.service.caption(b.type()));cmm.add(bm);return cmm}if(true){var cl=new tps.Binding("");cl.value=forms.enumOptions(ct,b);cl._type=b.type();bm._binding=cl;tps.bidirectional(b,cl,null,null);var cmm=new controls.Composite("span");cmm.setTitle(tps.service.caption(b.type()));bm.setTitle(tps.service.caption(b.type()));cmm.add(bm);return cmm}}r.setDescription(b.type().description);var lst=new forms.SimpleListControl;var props=tps.service.visibleProperties(b.collectionBinding().componentType());if(representation=="elements"){var result=new forms.FullRenderList;result._binding=b;return result}if(props.length>1){var repre=b.type();if(representation!="list"&&representation!="list-only"){var tb=new forms.TableControl;tb._binding=b;lst=tb}}lst._binding=b;var items=[];if(b.accessControl().supportsAdd()){if(b.addOperation()){items.push(new actions.CreateWithConstructorAction(b,b.addOperation()))}else{items.push(new actions.CreateAction(b))}}if(b.accessControl().supportsUpdate()){
items.push(new actions.EditAction(b))}if(b.accessControl().supportsRemove()){items.push(new actions.DeleteAction(b))}r.toolbar.items=items;var dr=new forms.DropDown;dr.items=items.concat(menuOnlyItems);dr.contributors=contributors;dr.addTo(lst);var v=function(v){r.setVisible(v)};if(representation!="list-only"&&representation!="table-only"&&(props.length>2&&representation!="list"||props.length>1&&representation=="list")&&rc.maxMasterDetailsLevel>0){var md=new forms.MasterDetails(lst);r.body._style.padding="0px";r.body._style.paddingRight="3px";r.add(md);md.onVisibilityChanged=v}else{r.add(lst);lst.onVisibilityChanged=v}return r}exports.createList=createList;var ArrayControlFactory={createControl:function(b,rc){return createList(b,rc,null)}};tps.declareMeta(tps.TYPE_SCALAR,StringControlFactory);tps.declareMeta(tps.TYPE_ARRAY,ArrayControlFactory);tps.declareMeta(tps.TYPE_MAP,ArrayControlFactory);var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s]})}tps.declareMeta(tps.TYPE_MARKDOWN,{label:function(v){if(!v){return""}return marked(v)},htmlLabel:true});tps.declareMeta(tps.TYPE_BOOLEAN,{cellSize:1,label:function(v){if(!v){return"<span class='glyphicon glyphicon-unchecked'></span>"}return"<span class='glyphicon glyphicon-chevron-down'></span>"},htmlLabel:true});function referenceControl(b){if(!b.accessControl().canEditSelf()){var bm=new forms.ButtonMultiSelectControl;var bl=new raml_type_bindings_1.Binding("val");bl._type=tps.array(b.type());bl._type.displayName=tps.service.caption(b.type());bm._binding=bl;tps.unidirectional(b,bl);return bm}var bm=new forms.ButtonMultiSelectControl;var ct=tps.service.componentType(b.type());bm.setSingle(true);var ll=tps.enumOptionsBinding(b.type(),b);var cl;if(ll){cl=ll.collection}if(!ll){var rs=new controls_1.Composite("span");rs.addLabel("Can not bind reference");return rs}bm._binding=cl;tps.bidirectional(b,cl,ll.transformer,ll.btrasform);var cmm=new controls.Composite("span");cmm.setTitle(tps.service.caption(b.type()));bm.setTitle(tps.service.caption(b.type()));cmm.add(bm);return cmm}var DisplayManager=function(){function DisplayManager(){this.manager=new rm.RepresentationProcessor}DisplayManager.prototype.createOperationControl=function(op,r){return new controls.Label(op.displayName)};DisplayManager.prototype.createControl=function(b,r){r=this.copyContext(r,true);var c=b.type();if(!b.get()&&b.get()!==false){var dv=b.type().default;if(dv){b.set(dv)}}if(c.createControl){var tp=c.createControl(b,r);tp.setRenderingOptions(r);if(r.dialog&&!tps.service.isObject(b.type())){var result=new controls.VerticalFlex;var rnd=new forms.StatusRender;rnd._binding=b;result.add(rnd);result.add(tp);return result}return tp}if(b.type().reference){return referenceControl(b)}var repre=b.type();var representation=repre.representation;if(representation&&typeof representation=="object"){var flx=new controls.VerticalFlex;var rnd=new forms.StatusRender;if(!r.noStatus){if(r.noStatus){rnd.displayMessage=false}if(r.noStatusDecorations){rnd.displayDecorations=false}rnd._binding=b;flx.add(rnd)}flx._style.flex="1 1 auto";var mm=this.copyContext(r,false);mm.noStatus=true;return this.manager.processRepresentation(b,representation,flx,mm)}var groups=tps.service.propertyGroups(b.type());if(groups.length==0){return new controls.Label(tps.service.label(b.get(),b.type()))}if(groups.length==1){var group=this.renderGroup(b,groups[0],r,r.noStatus?false:true);group.setTitle(b.type().displayName);group.setRenderingOptions(r);return group}else{if(groups[0].properties.length<6||true){var rs=this.renderGroup(b,groups[0],r,true&&!r.noStatus);rs.setRenderingOptions(r);var tf=groups.length<=4?new forms.TabFolder:new controls.HorizontalTabFolder("div");var headers=false;if(representation=="inline"){headers=true;tf=new controls.VerticalFlex;tf._style.flex="0 0 auto"}tf._style.padding="5px";for(var i=1;i<groups.length;i++){var cm=ro.clone(r,{noStatus:true,noStatusDecorations:true,noMargin:true});var ss=this.renderGroup(b,groups[i],cm,false);if(ss instanceof controls.VerticalFlex){if(ss.children.length==1){var vv=ss.children[0];ss=vv}}if(headers){tf.addHTML("<h4>"+ss.title()+"</h4>")}tf.add(ss)}rs.add(tf);return rs}}};DisplayManager.prototype.copyContext=function(r,incLevel){if(!r){r={}}var dfo=ro.defaultOptions();Object.keys(dfo).forEach(function(x){if(r[x]==undefined){r[x]=dfo[x]}});if(r){var o={};Object.keys(r).forEach(function(x){return o[x]=r[x]});r=o}else{r={}}if(incLevel){r.level=r.level?r.level+1:1}return r};DisplayManager.prototype.renderGroup=function(b,g,r,needStatus){var _this=this;if(needStatus===void 0){needStatus=false}var result=new controls.VerticalFlex;result._style.flex="1 1 auto";result.setTitle(g.caption);if(!r){r={noStatus:!needStatus,noStatusDecorations:true}}if(needStatus||!r.noStatusDecorations){var rnd=new forms.StatusRender;if(!needStatus){rnd.displayMessage=false}if(r.noStatusDecorations){rnd.displayDecorations=false}rnd._binding=b;result.add(rnd)}if(!r){r={}}g.properties.forEach(function(x){var o=_this.copyContext(r,false);o.dialog=false;o.noStatus=true;result.add(_this.createControl(b.binding(x.id),o))});if(result.children.length==2){if(result.children[1]instanceof forms.Section&&result.children[0]instanceof forms_1.StatusRender){var rr=result.children[1];rr.add(result.children[0]);return rr}}return result};return DisplayManager}();exports.DisplayManager=DisplayManager;exports.service=new DisplayManager},{"./actions":1,"./controlPanel":3,"./controls":4,"./forms":6,"./renderingOptions":9,"./representationManager":10,"raml-type-bindings":26}],12:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var controls=require("./controls");var globalId=0;function nextId(){return"split"+globalId++}exports.ToolbarRenderer=controls.ToolbarRenderer;exports.Context=controls.Context;exports.DrowpdownMenu=controls.DrowpdownMenu;var controls_1=require("./controls");var forms_1=require("./forms");var Split=require("../lib/Split").Split;var SimpleLabelProvider=function(){function SimpleLabelProvider(image,tlabel){this.image=image;this.tlabel=tlabel}SimpleLabelProvider.prototype.label=function(v){return'<img src="'+this.image+'"></img>'+v[this.tlabel]};return SimpleLabelProvider}();exports.SimpleLabelProvider=SimpleLabelProvider;var LayoutPart=function(){function LayoutPart(_el){this._el=_el}LayoutPart.prototype.splitHorizontal=function(sizes,grabHorizonatal){if(grabHorizonatal===void 0){grabHorizonatal=false}var fid=nextId();var nid=nextId();var ss="height: 100%";var ss1=!grabHorizonatal?"height:100%":"";if(grabHorizonatal){ss="width: 100%; display:flex"}var content='<div style="'+ss+'"><div  id="'+fid+'" class="split split-horizontal" style="'+ss1+'"></div>\n            <div id="'+nid+'" class="split split-horizontal" style="'+ss1+'"></div></div>';if(grabHorizonatal){this._el.classList.add("grabHorizontal")}this._el.innerHTML=content;var r1=new LayoutPart(document.getElementById(fid));var r2=new LayoutPart(document.getElementById(nid));Split(["#"+fid,"#"+nid],{gutterSize:8,cursor:"col-resize",sizes:sizes});if(grabHorizonatal){r1.element().style.display="flex";r1.element().style.flexDirection="column";r1.element().style.maxHeight="100%";r2.element().style.display="flex";r2.element().style.flexDirection="column";r2.element().style.maxHeight="100%"}return[r1,r2]};LayoutPart.prototype.splitVertical=function(sizes){var fid=nextId();var nid=nextId();var content='<div id="'+fid+'"  class="split" ></div><div  id="'+nid+'" class="split"></div>';this._el.innerHTML=content;var r1=new LayoutPart(document.getElementById(fid));var r2=new LayoutPart(document.getElementById(nid));Split(["#"+fid,"#"+nid],{gutterSize:8,sizes:sizes,direction:"vertical",cursor:"row-resize"});return[r1,r2]};LayoutPart.prototype.element=function(){return this._el};return LayoutPart}();exports.LayoutPart=LayoutPart;var Pane=function(){function Pane(_part){this._part=_part;this.drop=new forms_1.DropDown}Pane.prototype.setStatusMessage=function(m){this._application.setStatusMessage(m)};Pane.prototype.setContextMenu=function(m){this.drop.items=m.items;if(m.items.length>0){this.drop.renderElement(null)}};Pane.prototype.setViewMenu=function(m){this.menuContentElement.innerHTML="";if(m.items.length==0){this.viewMenuButton.setAttribute("style","display:none")}else{this.viewMenuButton.setAttribute("style","display:inherit")}new exports.DrowpdownMenu(m).render(this.menuContentElement)};Pane.prototype.setToolbar=function(m){this.toolbarContentElement.innerHTML="";new exports.ToolbarRenderer(m).render(this.toolbarContentElement)};Pane.prototype.addPart=function(v){this._v=v;this.render()};Pane.prototype.render=function(){var hid=nextId();var bid=nextId();var mid=nextId();this.hid=hid;var menuId=nextId();var cmenuInnerId=nextId();var tid=nextId();var searchId=nextId();var cnt='<div style=\'display: flex;flex-direction: column;height: 100%;width: 99.9%;margin-bottom:0px;overflow: hidden\' class="panel panel-primary"><div id="'+hid+'" class="panel-heading" style="flex: 0 0 auto;display: flex"></div>\n        <div class="panel-body" id="'+cmenuInnerId+'" style="flex: 1 1 0;display: flex;overflow: hidden;margin: 0;padding: 0" ><div style="width: 100%" id="'+bid+'"></div></div></div>';this._part.element().innerHTML=cnt;this.updateHeader(searchId,tid,mid,menuId);this.menuContentElement=document.getElementById(menuId);this.toolbarContentElement=document.getElementById(tid);this.viewMenuButton=document.getElementById(mid);var bel=document.getElementById(bid);this.panelElement=bel.parentElement;if(this._v){this._v.render(bel)}if(this._v.init){this._v.init(this)}var hel=document.getElementById(this.hid);var pe=this._part.element();function handleResize(){var h=hel.getBoundingClientRect().height;bel.style.minHeight="50px";bel.style.display="flex";bel.style.flexDirection="column"}pe.addEventListener("resize",handleResize);if(this._v.searchable){var ie=document.getElementById(searchId);var view=this._v;ie.onkeyup=function(){setTimeout(function(){view.onSearch(ie.value)},200)}}this.drop.ownerId=cmenuInnerId;if(this.drop.items.length>0){this.drop.renderElement(null)}handleResize()};Pane.prototype.updateTitle=function(newTitle){document.getElementById(this.titleId).innerText=newTitle};Pane.prototype.updateHeader=function(searchId,tid,mid,menuId){var hel=document.getElementById(this.hid);var tid2=nextId();this.titleId=tid2;var headerHtml='<div style="display: flex;flex-direction: row;width: 100%"><div id=\''+tid2+'\'style="flex:1 1 auto">'+this._v.title()+"</div>";var searchHtml='<input type="text"style="color: black;border-radius: 3px;height: 23px;margin-right: 4px" id="'+searchId+'"/>';if(!this._v.searchable){searchHtml=""}var th='<span id="'+tid+'"></span>';var dropMenu='<div class="dropdown" style="flex: 0 0 auto"/><button class="btn btn-primary dropdown-toggle btn-xs" style="display: none" type="button" id="'+mid+'" data-toggle="dropdown">\n  <span class="caret"></span></button>\n  <ul class="dropdown-menu dropdown-menu-left" style="right: 0;left: auto" role="menu" id=\''+menuId+"' aria-labelledby=\""+mid+'"/></div>';headerHtml=headerHtml+searchHtml+th+dropMenu+"</div>";hel.innerHTML=headerHtml;return headerHtml};return Pane}();exports.Pane=Pane;var ContributionManager=function(){function ContributionManager(onChange){this.onChange=onChange;this.menu={items:[]}}ContributionManager.prototype.add=function(item){this.menu.items.push(item);this.onChange(this.menu)};ContributionManager.prototype.remove=function(item){this.menu.items=this.menu.items.filter(function(x){return x!=item});this.onChange(this.menu)};return ContributionManager}();exports.ContributionManager=ContributionManager;var nh={setViewMenu:function(m){},setToolbar:function(m){},setContextMenu:function(m){},setStatusMessage:function(m){},updateTitle:function(s){}};var ViewPart=function(){function ViewPart(_id,_title){var _this=this;this._id=_id;this._title=_title;this.selectionListeners=[];this.holder=nh;this.selection=[];this.contextMenu=new ContributionManager(function(m){return _this.holder.setContextMenu(m)});this.toolbar=new ContributionManager(function(m){return _this.holder.setToolbar(m)});this.viewMenu=new ContributionManager(function(m){return _this.holder.setViewMenu(m)})}ViewPart.prototype.addSelectionConsumer=function(t){if(typeof t=="function"){this.addSelectionListener({selectionChanged:function(v){if(v.length>0){t(v[0])}else{t(null)}}});return}this.addSelectionListener({selectionChanged:function(v){if(v.length>0){t.setInput(v[0])}else{t.setInput(null)}}})};ViewPart.prototype.setStatusMessage=function(m){this.holder.setStatusMessage(m)};ViewPart.prototype.getContextMenu=function(){return this.contextMenu};ViewPart.prototype.getToolbar=function(){return this.toolbar};ViewPart.prototype.getViewMenu=function(){return this.viewMenu};ViewPart.prototype.getHolder=function(){return this.holder};ViewPart.prototype.addSelectionListener=function(l){this.selectionListeners.push(l)};ViewPart.prototype.setTitle=function(t){this._title=t;this.holder.updateTitle(t)};ViewPart.prototype.removeSelectionListener=function(l){this.selectionListeners=this.selectionListeners.filter(function(x){return x!=l})};ViewPart.prototype.getSelection=function(){return this.selection};ViewPart.prototype.onSelection=function(v){this.selection=v;this.selectionListeners.forEach(function(x){return x.selectionChanged(v)})};ViewPart.prototype.title=function(){return this._title};ViewPart.prototype.id=function(){return this._id};ViewPart.prototype.init=function(holder){this.holder=holder;this.holder.setViewMenu(this.viewMenu.menu);this.holder.setToolbar(this.toolbar.menu);this.holder.setContextMenu(this.contextMenu.menu)};ViewPart.prototype.render=function(e){this.contentElement=e;this.innerRender(e);e.view=this};ViewPart.prototype.hide=function(){if(this.contentElement){this.contentElement.style.display="none"}};ViewPart.prototype.show=function(){if(this.contentElement){this.contentElement.style.display="visible"}};ViewPart.prototype.refresh=function(){if(this.contentElement){this.innerRender(this.contentElement)}};ViewPart.prototype.dispose=function(){this.contentElement=null};return ViewPart}();exports.ViewPart=ViewPart;function getView(e){while(e){var vl=e;if(vl.view){return vl.view}e=e.parentElement}return null}exports.getView=getView;function buildTreeNode(x,t,l,selection){var nodes=t.children(x).map(function(n){return buildTreeNode(n,t,l,selection)});if(nodes.length==0){nodes=undefined}var icon=undefined;if(l.icon){icon=l.icon(x)}var selected=selection.indexOf(x)!=-1;return{original:x,text:l.label(x),icon:icon,nodes:nodes,state:{selected:selected}}}var ArrayContentProvider=function(){function ArrayContentProvider(){}ArrayContentProvider.prototype.children=function(x){return[]};ArrayContentProvider.prototype.elements=function(x){return x};return ArrayContentProvider}();exports.ArrayContentProvider=ArrayContentProvider;var ContentProviderProxy=function(){function ContentProviderProxy(_inner){this._inner=_inner;this.filters=[]}ContentProviderProxy.prototype.elements=function(x){var _this=this;var rs=this._inner.elements(x).filter(function(x){var accept=true;_this.filters.forEach(function(x){return accept=accept&&x.accept(x)});return accept});if(this.sorter){return rs.sort(function(x,y){return _this.sorter.compare(x,y)})}return rs};ContentProviderProxy.prototype.children=function(x){var _this=this;var rs=this._inner.children(x).filter(function(x){var accept=true;_this.filters.forEach(function(x){return accept=accept&&x.accept(x)});return accept});if(this.sorter){return rs.sort(function(x,y){return _this.sorter.compare(x,y)})}return rs};return ContentProviderProxy}();exports.ContentProviderProxy=ContentProviderProxy;var BasicSorter=function(){function BasicSorter(){}BasicSorter.prototype.init=function(v){this._labelProvider=v.labelProvider};BasicSorter.prototype.compare=function(a,b){var l1=this._labelProvider.label(a);var l2=this._labelProvider.label(b);return l1.localeCompare(l2)};return BasicSorter}();exports.BasicSorter=BasicSorter;function findNodeNoRecursion(nodes,v){for(var i=0;i<nodes.length;i++){var ch=nodes[i];if(ch.original===v){return ch}}return null}function findNode(nodes,v){for(var i=0;i<nodes.length;i++){var ch=nodes[i];if(ch.original===v){return ch}if(ch.nodes){var n=findNode(ch.nodes,v);if(n){return n}}}return null}var TreeView=function(_super){__extends(TreeView,_super);function TreeView(id,title){var _this=_super.call(this,id,title)||this;_this.searchable=true;_this.styleString="width:100%;overflow: auto;flex: 1 1 0; min-height: 50px;display: block";_this.setContentProvider(new ArrayContentProvider);_this.labelProvider={label:function(e){return e}};return _this}TreeView.prototype.setSorter=function(s){this.contentProvider.sorter=s;s.init(this);this.refresh()};TreeView.prototype.addFilter=function(f){this.contentProvider.filters.push(f);this.refresh()};TreeView.prototype.removeFilter=function(f){this.contentProvider.filters=this.contentProvider.filters.filter(function(x){return x!=f});this.refresh()};TreeView.prototype.select=function(model){var vs=$("#"+this.treeId).treeview(true);if(!vs||!vs.all){return}var n=findNode(vs.all(),model);if(n){this.selection=[model];this.refresh();$("#"+this.treeId).treeview("revealNode",n)}};TreeView.prototype.expand=function(l){var vs=$("#"+this.treeId).treeview(true);vs.expandNode(0)};TreeView.prototype.hasModel=function(model){if(!this.treeNodes){this.getTree()}if(findNode(this.treeNodes,model)){return true}return false};TreeView.prototype.onSearch=function(s){if(!this.treeId){return false}this.pattern=s;$("#"+this.treeId).treeview("search",s,{revealResults:true});return this.afterSearch(s)};TreeView.prototype.afterSearch=function(s){var lst=document.getElementById(this.treeId).getElementsByTagName("li");var parents={};var found=false;for(var i=0;i<lst.length;i++){var el=lst.item(i);if(el.classList.contains("search-result")){el.style.display="inherit";found=true;var id=el.attributes.getNamedItem("data-nodeid").value;var rs=$("#"+this.treeId).treeview("getParent",parseInt(id));parents[rs.nodeId]=true;while(rs.parentId!==undefined){parents[rs.parentId]=true;rs=$("#"+this.treeId).treeview("getParent",rs.parentId);parents[rs.nodeId]=true}}else{el.style.display=s.length==0?"inherit":"none"}}for(var i=0;i<lst.length;i++){var el=lst.item(i);var id=el.attributes.getNamedItem("data-nodeid").value;if(parents[parseInt(id)]){el.style.display="inherit"}}return found};TreeView.prototype.setContentProvider=function(i){this.contentProvider=new ContentProviderProxy(i);this.refresh()};TreeView.prototype.setLabelProvider=function(l){this.labelProvider=l;this.refresh()};TreeView.prototype.getInput=function(){return this.input};TreeView.prototype.setInput=function(x){this.input=x;this.refresh()};TreeView.prototype.innerRender=function(e){var _this=this;var treeId=nextId();this.treeId=treeId;var view=this;e.innerHTML="<div id='"+treeId+"' style='"+this.styleString+"'></div>";if(this.asyncRender){setTimeout(function(){return _this.renderTreeControl(treeId,view)},200)}else{this.renderTreeControl(treeId,view)}};TreeView.prototype.renderTreeControl=function(treeId,view){$("#"+treeId).treeview({data:this.getTree(),expandIcon:"glyphicon glyphicon-chevron-right",onNodeSelected:function(x){var sel=$("#"+treeId).treeview("getSelected");view.onSelection(sel.map(function(x){return x.original}))},onNodeExpanded:function(x){var sel=$("#"+treeId).treeview("getSelected");if(view.pattern){view.afterSearch(view.pattern)}},collapseIcon:"glyphicon glyphicon-chevron-down",borderColor:"0xFFFFFF",levels:0});var sel=$("#"+treeId).treeview("getSelected");if(this.autoExpand){this.expand(this.autoExpand)}view.onSelection(sel.map(function(x){return x.original}))};TreeView.prototype.getTree=function(){var _this=this;if(this.input&&this.contentProvider&&this.labelProvider){var els=this.contentProvider.elements(this.input);var nodes=els.map(function(x){return buildTreeNode(x,_this.contentProvider,_this.labelProvider,_this.selection)});this.treeNodes=nodes;return nodes}return[]};return TreeView}(ViewPart);exports.TreeView=TreeView;var Relation;(function(Relation){Relation[Relation["LEFT"]=0]="LEFT";Relation[Relation["RIGHT"]=1]="RIGHT";Relation[Relation["BOTTOM"]=2]="BOTTOM";Relation[Relation["TOP"]=3]="TOP";Relation[Relation["STACk"]=4]="STACk"})(Relation=exports.Relation||(exports.Relation={}));var Page=function(){function Page(r){this.panes=[];this.root=new LayoutPart(document.getElementById(r))}Page.prototype.addView=function(v,relatedTo,ratio,r){var p=this.createPane(relatedTo,ratio,r);p._application=this.app;p.addPart(v)};Page.prototype.createPane=function(relatedTo,ratio,r){if(this.panes.length==0){var p=new Pane(this.root);this.panes.push(p);return p}var p=this.findPane(relatedTo);var newPart=null;var oldPart=null;if(r==Relation.LEFT){var newParts=p._part.splitHorizontal([ratio,100-ratio]);newPart=newParts[0];oldPart=newParts[1]}if(r==Relation.RIGHT){var newParts=p._part.splitHorizontal([100-ratio,ratio]);newPart=newParts[1];oldPart=newParts[0]}if(r==Relation.BOTTOM){var newParts=p._part.splitVertical([100-ratio,ratio]);newPart=newParts[1];oldPart=newParts[0]}if(r==Relation.TOP){var newParts=p._part.splitHorizontal([ratio,100-ratio]);newPart=newParts[0];oldPart=newParts[1]}p._part=oldPart;p.render();var newPane=new Pane(newPart);this.panes.push(newPane);return newPane};Page.prototype.findPane=function(s){for(var i=0;i<this.panes.length;i++){if(this.panes[i]._v){if(this.panes[i]._v.id()==s){return this.panes[i]}}}return null};return Page}();exports.Page=Page;var AccorditionTreeView=function(_super){__extends(AccorditionTreeView,_super);function AccorditionTreeView(title){var _this=_super.call(this,title,title)||this;_this.seachable=true;_this.trees=[];return _this}AccorditionTreeView.prototype.createTree=function(name){var tree=new TreeView(name,name);this.customize(tree);var view=this;tree.addSelectionListener({selectionChanged:function(z){view.onSelection(z)}});return tree};AccorditionTreeView.prototype.addTree=function(label,at){var types=this.createTree(label);types.setInput(at);this.control.add(types);this.trees.push(types)};AccorditionTreeView.prototype.onSearch=function(searchStr){var _this=this;var num=0;var index=-1;var selectedIndexIsOk=false;this.control.children.forEach(function(x){if(x instanceof TreeView){var has=x.onSearch(searchStr);if(searchStr.length>0){if(!has){_this.control.disable(x)}else{_this.control.enable(x);if(num==_this.control.getSelectedIndex()){selectedIndexIsOk=true}index=num}}else{_this.control.enable(x)}}num++});if(searchStr.length>0){if(!selectedIndexIsOk&&index!=-1){this.control.expandIndex(index)}}};AccorditionTreeView.prototype.setSelection=function(o){var sel=this.getSelection();if(sel){if(sel[0]==o){return}}for(var i=0;i<this.trees.length;i++){if(this.trees[i].hasModel(o)){this.control.expand(this.trees[i]);this.trees[i].select(o)}}};AccorditionTreeView.prototype.showTab=function(title){for(var i=0;i<this.control.children.length;i++){if(this.control.children[i].title().toLowerCase()==title.toLowerCase()||this.control.children[i].controlId==title){this.control.expandIndex(i)}}};AccorditionTreeView.prototype.innerRender=function(e){if(!this.node){(new controls.Loading).render(e);this.load()}else{var title=null;if(this.control){title=this.control.getSelectedTitleId()}var a=new controls.Accordition;this.control=a;this.trees=[];this.customizeAccordition(a,this.node);a.render(e);if(title){this.showTab(title)}}};return AccorditionTreeView}(ViewPart);exports.AccorditionTreeView=AccorditionTreeView;var n=1;exports.defaultNavBar={style:" margin-bottom: 5px;background-image: url(https://github.com/themes/midnight/images/nav-bg.gif)",brandImage:"http://marketplace.eclipse.org/sites/default/files/styles/ds_medium/public/Logo110_80_1.png",brandImageHeight:"46px",brandImageStyle:"margin-left: 2px;margin-top:2px;margin-right: 10px",brandRight:'<a class="header-logo-invertocat" href="https://github.com/apiregistry/registry" \n                   aria-label="Homepage" >\n                   <img src="./images/GitHub-Mark-Light-32px.png" height="32" style="margin: 8px"/>\n                </a>'};var NavBar=function(){function NavBar(){var _this=this;this._title="";this._theme=exports.defaultNavBar;this.globalMenu=new ContributionManager(function(x){_this.renderMenu()})}NavBar.prototype.id=function(){return"n"+n++};NavBar.prototype.title=function(){return this._title};NavBar.prototype.getMenuBar=function(){return this.globalMenu};NavBar.prototype.setTitle=function(t){this._title=t;if(this.element){this.element.innerHTML="";this.render(this.element)}};NavBar.prototype.render=function(e){this.element=e;var id=nextId();var tmplt='<nav class="navbar navbar-inverse" id="header"\n         style="'+this._theme.style+'">\n         <div class="container-fluid" style="padding-left: 0px">\n            <div class="navbar-header">\n                \n                <a class="navbar-brand" href="#" style="margin: 0px;padding: 0px">\n                    \n                    <img src="'+this._theme.brandImage+'"\n                         height="'+this._theme.brandImageHeight+'" style="'+this._theme.brandImageStyle+'"/>\n                    \n                    <a class="navbar-brand" href="#" >\n                    <span class="glyphicon glyphicon-home" onclick="Workbench.open(\'home\')" style="display: '+(this.homeDisplay?"visible":"none")+'">\n                    </span>\n                    '+this._title+'\n                    </a>\n                </a>\n            </div>\n         \n            <div class="navbar-right">\n                <ul class="nav navbar-nav" id="'+id+'"></ul>\n                '+this._theme.brandRight+"\n            </div>\n        </div>        \n    </nav>";e.innerHTML=tmplt;this.globalMenuElement=document.getElementById(id);this.renderMenu()};NavBar.prototype.renderMenu=function(){if(this.globalMenuElement){this.globalMenuElement.innerHTML="";new controls.DrowpdownMenu(this.globalMenu.menu,false).render(this.globalMenuElement)}};return NavBar}();exports.NavBar=NavBar;var a=1;var Application=function(){function Application(_title,initialPerspective,element,currentP,theme){var _this=this;this._title=_title;this.initialPerspective=initialPerspective;this.nb=new NavBar;this.perspective=currentP?currentP:initialPerspective;if(this.perspective.actions){this.perspective.actions.forEach(function(a){return _this.nb.getMenuBar().add(a)})}if(element){if(typeof element=="string"){this.render(document.getElementById(element))}else{this.render(element)}}var v=this;addCommand({id:"home",run:function(){v.home()}})}Application.prototype.title=function(){return this._title};Application.prototype.id=function(){return"a"+a++};Application.prototype.currentPerspective=function(){return this.perspective};Application.prototype.homePerspective=function(){return this.initialPerspective};Application.prototype.home=function(){this.openPerspective(this.initialPerspective)};Application.prototype.setStatusMessage=function(m){if(this.status){this.status.innerHTML=m}};Application.prototype.getMenuBar=function(){return this.nb.getMenuBar()};Application.prototype.openPerspective=function(perspective){var _this=this;this.nb.getMenuBar().menu.items=[];this._title=perspective.title;this.perspective.actions.forEach(function(a){return _this.nb.getMenuBar().add(a)});this.perspective=perspective;this.render(this.element)};Application.prototype.render=function(e){this.element=e;var nb=nextId();var main=nextId();var status=nextId();if(this.currentPerspective()!=this.initialPerspective){this.nb.homeDisplay=true}else{this.nb.homeDisplay=false}this.nb.setTitle(this.title());var tmplt='<div style="height: 100%;display: flex;flex-direction: column">\n        <div id="'+nb+'"></div>    \n        <div id="'+main+'" style="flex: 1 0 0;display: flex;flex-direction: column;"></div>\n        <div>\n            <p class="navbar-text" id="'+status+'" style="margin: 0px;padding: 0px;float: right;">...</p>\n        </div>\n        </div>';e.innerHTML=tmplt;this.nb.render(document.getElementById(nb));this.page=new Page(main);this.page.app=this;this.status=document.getElementById(status);function resize(){var r0=document.getElementById(nb).getBoundingClientRect();var r1=document.getElementById(status).getBoundingClientRect();document.getElementById(main).style.height=""+(e.getBoundingClientRect().height-r0.height-r1.height-3)+"px"}resize();this.openViews();window.onresize=resize};Application.prototype.openViews=function(){var _this=this;this.perspective.views.forEach(function(v){_this.page.addView(v.view,v.ref,v.ratio,v.relation)})};return Application}();exports.Application=Application;var ShowDialogAction=function(){function ShowDialogAction(title,control,buttons){if(buttons===void 0){buttons=[]}this.title=title;this.control=control;this.buttons=buttons}ShowDialogAction.prototype.run=function(){var _this=this;var title=this.title;var bs=[];var bNum=0;this.buttons.forEach(function(x){var csCl="";if(x.primary){csCl="btn-primary"}if(x.warning){csCl="btn-warning"}if(x.success){csCl="btn-success"}if(x.danger){csCl="btn-danger"}bs.push({id:"b"+bNum,label:x.title,action:function(dlg){dlg.close();x.run()},cssClass:csCl});bNum=bNum+1});if(bs.length==0){bs.push({label:"Close",action:function(dlg){dlg.close()}})}var dlgThis=this;var lst={valueChanged:function(c){var index=dlgThis.buttons.indexOf(c.target);var id="b"+index;var btn=dlg.getButton(id);var cm=c.target;if(cm.disabled){btn.disable()}else{btn.enable()}}};var dlg=BootstrapDialog.show({title:title,buttons:bs,onhidden:function(){_this.buttons.forEach(function(x){if(x.addListener){x.removeListener(lst)}})}});if(this.buttons.length>0){this.buttons.forEach(function(x){if(x.addListener){x.addListener(lst)}});for(var i=0;i<this.buttons.length;i++){if(this.buttons[i].disabled){var id="b"+i;var btn=dlg.getButton(id);btn.disable()}}}if(typeof this.control=="string"){dlg.$modalBody.html(this.control)}else{this.control.render(dlg.$modalBody[0])}};return ShowDialogAction}();exports.ShowDialogAction=ShowDialogAction;function showInDialog(title,control,btns){new ShowDialogAction(title,control,btns).run()}exports.showInDialog=showInDialog;function selectDialog(title,description,func,root,lp,cp){if(cp===void 0){cp=new ArrayContentProvider}if(!lp){lp={label:function(x){if(x.name){if(typeof x.name==="function"){return x.name()}return x.name}if(x.title){if(typeof x.title==="function"){return x.title()}return x.title}if(x.id){if(typeof x.id==="function"){return x.id()}return x.id}}}}var tree=new TreeView("","");tree.asyncRender=true;tree.autoExpand=2;tree.setContentProvider(cp);tree.setLabelProvider(lp);tree.setInput(root);var composite=new controls.VerticalFlex;composite._style.maxHeight="700px";tree.styleString+=";max-height:600px;min-height:600px";composite.add(new controls_1.Label(description));composite.add(tree);showInDialog(title,composite,[{title:"Ok",run:function(){func(tree.getSelection()[0])}},{title:"Cancel"}])}exports.selectDialog=selectDialog;var w=window;var handlers=[];function registerHandler(f){handlers.push(f)}exports.registerHandler=registerHandler;function unregisterHandler(f){handlers=handlers.filter(function(x){return x!==f})}exports.unregisterHandler=unregisterHandler;w.Workbench={open:function(url){processUrl(url)}};function back(){history.back()}exports.back=back;var commands={};function addCommand(ci){commands[ci.id]=ci}exports.addCommand=addCommand;function processUrl(url){if(commands[url]){commands[url].run();return}var sState=true;Object.keys(commands).forEach(function(x){if(url.indexOf(x)==0){url=url.substring(x.length)
;commands[x].run(url);sState=false}});if(sState){setState({hash:url})}}exports.processUrl=processUrl;function processState(s){for(var i=0;i<handlers.length;i++){if(handlers[i](s.hash)){return}}}exports.processState=processState;var currentHash=null;exports.notifyState=function(s){if(history&&history.pushState&&s.hash.indexOf("#")==0){if(currentHash&&s.hash.indexOf(currentHash)==0){history.replaceState(s,"",s.hash)}else{history.pushState(s,"",s.hash)}currentHash=s.hash}};function setState(s){exports.notifyState(s);processState(s)}exports.setState=setState;if(history&&history.pushState){window.onpopstate=function(event){if(event.state){processState(event.state)}else{processState({hash:document.location.hash})}}}function exportGlobalHandler(name,handler){var w=window;w[name]=handler}exports.exportGlobalHandler=exportGlobalHandler;var BackAction=function(){function BackAction(){this.title="Back"}BackAction.prototype.run=function(){back()};return BackAction}();exports.BackAction=BackAction;var w=window;w.WorkbenchUtils={};w.WorkbenchUtils.getView=getView},{"../lib/Split":13,"./controls":4,"./forms":6}],13:[function(require,module,exports){"use strict";(function(){var global=this,addEventListener="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect="getBoundingClientRect",isIE8=global.attachEvent&&!global[addEventListener],document=global.document,calc=function(){var el,prefixes=["","-webkit-","-moz-","-o-"];for(var i=0;i<prefixes.length;i++){el=document.createElement("div");el.style.cssText="width:"+prefixes[i]+"calc(9px)";if(el.style.length){return prefixes[i]+"calc"}}}(),elementOrSelector=function(el){if(typeof el==="string"||el instanceof String){return document.querySelector(el)}else{return el}},Split=function(ids,options){var dimension,i,clientDimension,clientAxis,position,gutterClass,paddingA,paddingB,pairs=[];options=typeof options!=="undefined"?options:{};if(typeof options.gutterSize==="undefined")options.gutterSize=10;if(typeof options.minSize==="undefined")options.minSize=100;if(typeof options.snapOffset==="undefined")options.snapOffset=30;if(typeof options.direction==="undefined")options.direction="horizontal";if(options.direction=="horizontal"){dimension="width";clientDimension="clientWidth";clientAxis="clientX";position="left";gutterClass="gutter gutter-horizontal";paddingA="paddingLeft";paddingB="paddingRight";if(!options.cursor)options.cursor="ew-resize"}else if(options.direction=="vertical"){dimension="height";clientDimension="clientHeight";clientAxis="clientY";position="top";gutterClass="gutter gutter-vertical";paddingA="paddingTop";paddingB="paddingBottom";if(!options.cursor)options.cursor="ns-resize"}var startDragging=function(e){var self=this,a=self.a,b=self.b;if(!self.dragging&&options.onDragStart){options.onDragStart()}e.preventDefault();self.dragging=true;self.move=drag.bind(self);self.stop=stopDragging.bind(self);global[addEventListener]("mouseup",self.stop);global[addEventListener]("touchend",self.stop);global[addEventListener]("touchcancel",self.stop);self.parent[addEventListener]("mousemove",self.move);self.parent[addEventListener]("touchmove",self.move);a[addEventListener]("selectstart",preventSelection);a[addEventListener]("dragstart",preventSelection);b[addEventListener]("selectstart",preventSelection);b[addEventListener]("dragstart",preventSelection);a.style.userSelect="none";a.style.webkitUserSelect="none";a.style.MozUserSelect="none";a.style.pointerEvents="none";b.style.userSelect="none";b.style.webkitUserSelect="none";b.style.MozUserSelect="none";b.style.pointerEvents="none";self.gutter.style.cursor=options.cursor;self.parent.style.cursor=options.cursor;calculateSizes.call(self)},stopDragging=function(){var self=this,a=self.a,b=self.b;if(self.dragging&&options.onDragEnd){options.onDragEnd()}self.dragging=false;global[removeEventListener]("mouseup",self.stop);global[removeEventListener]("touchend",self.stop);global[removeEventListener]("touchcancel",self.stop);self.parent[removeEventListener]("mousemove",self.move);self.parent[removeEventListener]("touchmove",self.move);delete self.stop;delete self.move;a[removeEventListener]("selectstart",preventSelection);a[removeEventListener]("dragstart",preventSelection);b[removeEventListener]("selectstart",preventSelection);b[removeEventListener]("dragstart",preventSelection);a.style.userSelect="";a.style.webkitUserSelect="";a.style.MozUserSelect="";a.style.pointerEvents="";b.style.userSelect="";b.style.webkitUserSelect="";b.style.MozUserSelect="";b.style.pointerEvents="";self.gutter.style.cursor="";self.parent.style.cursor=""},drag=function(e){var offset;if(!this.dragging)return;if("touches"in e){offset=e.touches[0][clientAxis]-this.start}else{offset=e[clientAxis]-this.start}if(offset<=this.aMin+options.snapOffset){offset=this.aMin}else if(offset>=this.size-this.bMin-options.snapOffset){offset=this.size-this.bMin}adjust.call(this,offset);if(options.onDrag){options.onDrag()}},calculateSizes=function(){var computedStyle=global.getComputedStyle(this.parent),parentSize=this.parent[clientDimension]-parseFloat(computedStyle[paddingA])-parseFloat(computedStyle[paddingB]);this.size=this.a[getBoundingClientRect]()[dimension]+this.b[getBoundingClientRect]()[dimension]+this.aGutterSize+this.bGutterSize;this.percentage=Math.min(100,100);this.start=this.a[getBoundingClientRect]()[position]},adjust=function(offset){this.a.style[dimension]=calc+"("+offset/this.size*this.percentage+"% - "+this.aGutterSize+"px)";this.b.style[dimension]=calc+"("+(this.percentage-offset/this.size*this.percentage)+"% - "+this.bGutterSize+"px)"},rebalance=function(){var offset=this.a[clientDimension];this.a.style[dimension]=calc+"("+offset/this.size*this.percentage+"% - "+this.aGutterSize+"px)";this.b.style[dimension]=calc+"("+(this.percentage-offset/this.size*this.percentage)+"% - "+this.bGutterSize+"px)"},fitMin=function(){var self=this,a=self.a,b=self.b;if(a[getBoundingClientRect]()[dimension]<self.aMin){a.style[dimension]=self.aMin-self.aGutterSize+"px";b.style[dimension]=self.size-self.aMin-self.aGutterSize+"px"}else if(b[getBoundingClientRect]()[dimension]<self.bMin){a.style[dimension]=self.size-self.bMin-self.bGutterSize+"px";b.style[dimension]=self.bMin-self.bGutterSize+"px"}},fitMinReverse=function(){var self=this,a=self.a,b=self.b;if(b[getBoundingClientRect]()[dimension]<self.bMin){a.style[dimension]=self.size-self.bMin-self.bGutterSize+"px";b.style[dimension]=self.bMin-self.bGutterSize+"px"}else if(a[getBoundingClientRect]()[dimension]<self.aMin){a.style[dimension]=self.aMin-self.aGutterSize+"px";b.style[dimension]=self.size-self.aMin-self.aGutterSize+"px"}},balancePairs=function(pairs){for(var i=0;i<pairs.length;i++){calculateSizes.call(pairs[i]);fitMin.call(pairs[i]);pairs[i].calculateSizes=calculateSizes;pairs[i].fitMin=fitMin;pairs[i].rebalance=rebalance}for(i=pairs.length-1;i>=0;i--){calculateSizes.call(pairs[i]);fitMinReverse.call(pairs[i])}},preventSelection=function(){return false},parent=elementOrSelector(ids[0]).parentNode;parent.onresize=rebalance;parent.pairs=pairs;if(!options.sizes){var percent=100/ids.length;options.sizes=[];for(i=0;i<ids.length;i++){options.sizes.push(percent)}}if(!Array.isArray(options.minSize)){var minSizes=[];for(i=0;i<ids.length;i++){minSizes.push(options.minSize)}options.minSize=minSizes}for(i=0;i<ids.length;i++){var el=elementOrSelector(ids[i]),isFirst=i==1,isLast=i==ids.length-1,size,gutterSize=options.gutterSize,pair;if(i>0){pair={a:elementOrSelector(ids[i-1]),b:el,aMin:options.minSize[i-1],bMin:options.minSize[i],dragging:false,parent:parent,isFirst:isFirst,isLast:isLast,direction:options.direction};pair.aGutterSize=options.gutterSize;pair.bGutterSize=options.gutterSize;if(isFirst){pair.aGutterSize=options.gutterSize/2}if(isLast){pair.bGutterSize=options.gutterSize/2}}if(!isIE8){if(i>0){var gutter=document.createElement("div");gutter.className=gutterClass;gutter.style[dimension]=options.gutterSize+"px";gutter[addEventListener]("mousedown",startDragging.bind(pair));gutter[addEventListener]("touchstart",startDragging.bind(pair));parent.insertBefore(gutter,el);pair.gutter=gutter}if(i===0||i==ids.length-1){gutterSize=options.gutterSize/2}if(typeof options.sizes[i]==="string"||options.sizes[i]instanceof String){size=options.sizes[i]}else{size=calc+"("+options.sizes[i]+"% - "+gutterSize+"px)"}}else{if(typeof options.sizes[i]==="string"||options.sizes[i]instanceof String){size=options.sizes[i]}else{size=options.sizes[i]+"%"}}el.style[dimension]=size;if(i>0){pairs.push(pair)}}balancePairs(pairs)};if(typeof exports!=="undefined"){exports.Split=Split}else{global.Split=Split}}).call(window)},{}],14:[function(require,module,exports){(function($,window,document,undefined){"use strict";var pluginName="treeview";var _default={};_default.settings={injectStyle:true,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:undefined,backColor:undefined,borderColor:undefined,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:undefined,enableLinks:false,highlightSelected:true,highlightSearchResults:true,showBorder:true,showIcon:true,showCheckbox:false,showTags:false,multiSelect:false,onNodeChecked:undefined,onNodeCollapsed:undefined,onNodeDisabled:undefined,onNodeEnabled:undefined,onNodeExpanded:undefined,onNodeSelected:undefined,onNodeUnchecked:undefined,onNodeUnselected:undefined,onSearchComplete:undefined,onSearchCleared:undefined};_default.options={silent:false,ignoreChildren:false};_default.searchOptions={ignoreCase:true,exactMatch:false,revealResults:true};var Tree=function(element,options){this.$element=$(element);this.elementId=element.id;this.styleId=this.elementId+"-style";this.init(options);return{options:this.options,init:$.proxy(this.init,this),remove:$.proxy(this.remove,this),getNode:$.proxy(this.getNode,this),getParent:$.proxy(this.getParent,this),getSiblings:$.proxy(this.getSiblings,this),getSelected:$.proxy(this.getSelected,this),getUnselected:$.proxy(this.getUnselected,this),getExpanded:$.proxy(this.getExpanded,this),getCollapsed:$.proxy(this.getCollapsed,this),getChecked:$.proxy(this.getChecked,this),getUnchecked:$.proxy(this.getUnchecked,this),getDisabled:$.proxy(this.getDisabled,this),getEnabled:$.proxy(this.getEnabled,this),selectNode:$.proxy(this.selectNode,this),unselectNode:$.proxy(this.unselectNode,this),toggleNodeSelected:$.proxy(this.toggleNodeSelected,this),collapseAll:$.proxy(this.collapseAll,this),collapseNode:$.proxy(this.collapseNode,this),expandAll:$.proxy(this.expandAll,this),expandNode:$.proxy(this.expandNode,this),toggleNodeExpanded:$.proxy(this.toggleNodeExpanded,this),revealNode:$.proxy(this.revealNode,this),checkAll:$.proxy(this.checkAll,this),checkNode:$.proxy(this.checkNode,this),uncheckAll:$.proxy(this.uncheckAll,this),uncheckNode:$.proxy(this.uncheckNode,this),toggleNodeChecked:$.proxy(this.toggleNodeChecked,this),disableAll:$.proxy(this.disableAll,this),disableNode:$.proxy(this.disableNode,this),enableAll:$.proxy(this.enableAll,this),enableNode:$.proxy(this.enableNode,this),toggleNodeDisabled:$.proxy(this.toggleNodeDisabled,this),search:$.proxy(this.search,this),clearSearch:$.proxy(this.clearSearch,this),all:$.proxy(this.all,this)}};Tree.prototype.init=function(options){this.tree=[];this.nodes=[];if(options.data){if(typeof options.data==="string"){options.data=$.parseJSON(options.data)}this.tree=$.extend(true,[],options.data);delete options.data}this.options=$.extend({},_default.settings,options);this.destroy();this.subscribeEvents();this.setInitialStates({nodes:this.tree},0);this.render()};Tree.prototype.remove=function(){this.destroy();$.removeData(this,pluginName);$("#"+this.styleId).remove()};Tree.prototype.destroy=function(){if(!this.initialized)return;this.$wrapper.remove();this.$wrapper=null;this.unsubscribeEvents();this.initialized=false};Tree.prototype.unsubscribeEvents=function(){this.$element.off("click");this.$element.off("nodeChecked");this.$element.off("nodeCollapsed");this.$element.off("nodeDisabled");this.$element.off("nodeEnabled");this.$element.off("nodeExpanded");this.$element.off("nodeSelected");this.$element.off("nodeUnchecked");this.$element.off("nodeUnselected");this.$element.off("searchComplete");this.$element.off("searchCleared")};Tree.prototype.subscribeEvents=function(){this.unsubscribeEvents();this.$element.on("click",$.proxy(this.clickHandler,this));if(typeof this.options.onNodeChecked==="function"){this.$element.on("nodeChecked",this.options.onNodeChecked)}if(typeof this.options.onNodeCollapsed==="function"){this.$element.on("nodeCollapsed",this.options.onNodeCollapsed)}if(typeof this.options.onNodeDisabled==="function"){this.$element.on("nodeDisabled",this.options.onNodeDisabled)}if(typeof this.options.onNodeEnabled==="function"){this.$element.on("nodeEnabled",this.options.onNodeEnabled)}if(typeof this.options.onNodeExpanded==="function"){this.$element.on("nodeExpanded",this.options.onNodeExpanded)}if(typeof this.options.onNodeSelected==="function"){this.$element.on("nodeSelected",this.options.onNodeSelected)}if(typeof this.options.onNodeUnchecked==="function"){this.$element.on("nodeUnchecked",this.options.onNodeUnchecked)}if(typeof this.options.onNodeUnselected==="function"){this.$element.on("nodeUnselected",this.options.onNodeUnselected)}if(typeof this.options.onSearchComplete==="function"){this.$element.on("searchComplete",this.options.onSearchComplete)}if(typeof this.options.onSearchCleared==="function"){this.$element.on("searchCleared",this.options.onSearchCleared)}};Tree.prototype.setInitialStates=function(node,level){if(!node.nodes)return;level+=1;var parent=node;var _this=this;$.each(node.nodes,function checkStates(index,node){node.nodeId=_this.nodes.length;node.parentId=parent.nodeId;if(!node.hasOwnProperty("selectable")){node.selectable=true}node.state=node.state||{};if(!node.state.hasOwnProperty("checked")){node.state.checked=false}if(!node.state.hasOwnProperty("disabled")){node.state.disabled=false}if(!node.state.hasOwnProperty("expanded")){if(!node.state.disabled&&level<_this.options.levels&&(node.nodes&&node.nodes.length>0)){node.state.expanded=true}else{node.state.expanded=false}}if(!node.state.hasOwnProperty("selected")){node.state.selected=false}_this.nodes.push(node);if(node.nodes){_this.setInitialStates(node,level)}})};Tree.prototype.clickHandler=function(event){if(!this.options.enableLinks)event.preventDefault();var target=$(event.target);var node=this.findNode(target);if(!node||node.state.disabled)return;var classList=target.attr("class")?target.attr("class").split(" "):[];if(classList.indexOf("expand-icon")!==-1){this.toggleExpandedState(node,_default.options);this.render()}else if(classList.indexOf("check-icon")!==-1){this.toggleCheckedState(node,_default.options);this.render()}else{if(node.selectable){this.toggleSelectedState(node,_default.options);return}else{this.toggleExpandedState(node,_default.options)}this.render()}};Tree.prototype.findNode=function(target){var nodeId=target.closest("li.list-group-item").attr("data-nodeid");var node=this.nodes[nodeId];if(!node){console.log("Error: node does not exist")}return node};Tree.prototype.toggleExpandedState=function(node,options){if(!node)return;this.setExpandedState(node,!node.state.expanded,options)};Tree.prototype.setExpandedState=function(node,state,options){if(state===node.state.expanded)return;if(state&&node.nodes){node.state.expanded=true;if(!options.silent){this.$element.trigger("nodeExpanded",$.extend(true,{},node))}}else if(!state){node.state.expanded=false;if(!options.silent){this.$element.trigger("nodeCollapsed",$.extend(true,{},node))}if(node.nodes&&!options.ignoreChildren){$.each(node.nodes,$.proxy(function(index,node){this.setExpandedState(node,false,options)},this))}}};Tree.prototype.toggleSelectedState=function(node,options){if(!node)return;this.setSelectedState(node,!node.state.selected,options)};Tree.prototype.setSelectedState=function(node,state,options){if(state===node.state.selected)return;if(state){if(!this.options.multiSelect){$.each(this.findNodes("true","g","state.selected"),$.proxy(function(index,node){this.setSelectedState(node,false,options)},this))}node.state.selected=true;try{var nodeel=document.getElementById(this.elementId).querySelector('[data-nodeid="'+node.nodeId+'"]');if(nodeel){nodeel.classList.add("node-selected");nodeel.setAttribute("style",this.buildStyleOverride(node))}else{this.render()}}catch(e){this.render()}if(!options.silent){this.$element.trigger("nodeSelected",$.extend(true,{},node))}}else{node.state.selected=false;try{var nodeel=document.getElementById(this.elementId).querySelector('[data-nodeid="'+node.nodeId+'"]');if(nodeel){nodeel.classList.remove("node-selected");nodeel.setAttribute("style",this.buildStyleOverride(node))}else{this.render()}}catch(e){this.render()}if(!options.silent){this.$element.trigger("nodeUnselected",$.extend(true,{},node))}}};Tree.prototype.toggleCheckedState=function(node,options){if(!node)return;this.setCheckedState(node,!node.state.checked,options)};Tree.prototype.setCheckedState=function(node,state,options){if(state===node.state.checked)return;if(state){node.state.checked=true;if(!options.silent){this.$element.trigger("nodeChecked",$.extend(true,{},node))}}else{node.state.checked=false;if(!options.silent){this.$element.trigger("nodeUnchecked",$.extend(true,{},node))}}};Tree.prototype.setDisabledState=function(node,state,options){if(state===node.state.disabled)return;if(state){node.state.disabled=true;this.setExpandedState(node,false,options);this.setSelectedState(node,false,options);this.setCheckedState(node,false,options);if(!options.silent){this.$element.trigger("nodeDisabled",$.extend(true,{},node))}}else{node.state.disabled=false;if(!options.silent){this.$element.trigger("nodeEnabled",$.extend(true,{},node))}}};Tree.prototype.render=function(){if(!this.initialized){this.$element.addClass(pluginName);this.$wrapper=$(this.template.list);this.injectStyle();this.initialized=true}this.$element.empty().append(this.$wrapper.empty());this.buildTree(this.tree,0)};Tree.prototype.buildTree=function(nodes,level){if(!nodes)return;level+=1;var _this=this;$.each(nodes,function addNodes(id,node){var treeItem=$(_this.template.item).addClass("node-"+_this.elementId).addClass(node.state.checked?"node-checked":"").addClass(node.state.disabled?"node-disabled":"").addClass(node.state.selected?"node-selected":"").addClass(node.searchResult?"search-result":"").attr("data-nodeid",node.nodeId).attr("style",_this.buildStyleOverride(node));for(var i=0;i<level-1;i++){treeItem.append(_this.template.indent)}var classList=[];if(node.nodes){classList.push("expand-icon");if(node.state.expanded){classList.push(_this.options.collapseIcon)}else{classList.push(_this.options.expandIcon)}}else{classList.push(_this.options.emptyIcon)}treeItem.append($(_this.template.icon).addClass(classList.join(" ")));if(_this.options.showIcon){var classList=["node-icon"];classList.push(node.icon||_this.options.nodeIcon);if(node.state.selected){classList.pop();classList.push(node.selectedIcon||_this.options.selectedIcon||node.icon||_this.options.nodeIcon)}treeItem.append($(_this.template.icon).addClass(classList.join(" ")))}if(_this.options.showCheckbox){var classList=["check-icon"];if(node.state.checked){classList.push(_this.options.checkedIcon)}else{classList.push(_this.options.uncheckedIcon)}treeItem.append($(_this.template.icon).addClass(classList.join(" ")))}if(_this.options.enableLinks){treeItem.append($(_this.template.link).attr("href",node.href).append(node.text))}else{treeItem.append(node.text)}if(_this.options.showTags&&node.tags){$.each(node.tags,function addTag(id,tag){treeItem.append($(_this.template.badge).append(tag))})}_this.$wrapper.append(treeItem);if(node.nodes&&node.state.expanded&&!node.state.disabled){return _this.buildTree(node.nodes,level)}})};Tree.prototype.buildStyleOverride=function(node){if(node.state.disabled)return"";var color=node.color;var backColor=node.backColor;if(this.options.highlightSelected&&node.state.selected){if(this.options.selectedColor){color=this.options.selectedColor}if(this.options.selectedBackColor){backColor=this.options.selectedBackColor}}if(this.options.highlightSearchResults&&node.searchResult&&!node.state.disabled){if(this.options.searchResultColor){color=this.options.searchResultColor}if(this.options.searchResultBackColor){backColor=this.options.searchResultBackColor}}return"color:"+color+";background-color:"+backColor+";"};Tree.prototype.injectStyle=function(){if(this.options.injectStyle&&!document.getElementById(this.styleId)){$('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")}};Tree.prototype.buildStyle=function(){var style=".node-"+this.elementId+"{";if(this.options.color){style+="color:"+this.options.color+";"}if(this.options.backColor){style+="background-color:"+this.options.backColor+";"}if(!this.options.showBorder){style+="border:none;"}else if(this.options.borderColor){style+="border:1px solid "+this.options.borderColor+";"}style+="}";if(this.options.onhoverColor){style+=".node-"+this.elementId+":not(.node-disabled):hover{"+"background-color:"+this.options.onhoverColor+";"+"}"}return this.css+style};Tree.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'};Tree.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}";Tree.prototype.getNode=function(nodeId){return this.nodes[nodeId]};Tree.prototype.getParent=function(identifier){var node=this.identifyNode(identifier);return this.nodes[node.parentId]};Tree.prototype.getSiblings=function(identifier){var node=this.identifyNode(identifier);var parent=this.getParent(node);var nodes=parent?parent.nodes:this.tree;return nodes.filter(function(obj){return obj.nodeId!==node.nodeId})};Tree.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")};Tree.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")};Tree.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")};Tree.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")};Tree.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")};Tree.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")};Tree.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")};Tree.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")};Tree.prototype.selectNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setSelectedState(node,true,options)},this));this.render()};Tree.prototype.unselectNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setSelectedState(node,false,options)},this));this.render()};Tree.prototype.toggleNodeSelected=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.toggleSelectedState(node,options)},this));this.render()};Tree.prototype.collapseAll=function(options){var identifiers=this.findNodes("true","g","state.expanded");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setExpandedState(node,false,options)},this));this.render()};Tree.prototype.collapseNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setExpandedState(node,false,options)},this));this.render()};Tree.prototype.expandAll=function(options){options=$.extend({},_default.options,options);if(options&&options.levels){this.expandLevels(this.tree,options.levels,options)}else{var identifiers=this.findNodes("false","g","state.expanded");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setExpandedState(node,true,options)},this))}this.render()};Tree.prototype.expandNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setExpandedState(node,true,options);if(node.nodes&&(options&&options.levels)){this.expandLevels(node.nodes,options.levels-1,options)}},this));this.render()};Tree.prototype.expandLevels=function(nodes,level,options){options=$.extend({},_default.options,options);$.each(nodes,$.proxy(function(index,node){this.setExpandedState(node,level>0?true:false,options);if(node.nodes){this.expandLevels(node.nodes,level-1,options)}},this))};Tree.prototype.revealNode=function(identifiers,options){var n=null;this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){n=node;var parentNode=this.getParent(node);while(parentNode){this.setExpandedState(parentNode,true,options);parentNode=this.getParent(parentNode)}},this));this.render()};Tree.prototype.toggleNodeExpanded=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.toggleExpandedState(node,options)},this));this.render()};Tree.prototype.checkAll=function(options){var identifiers=this.findNodes("false","g","state.checked");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setCheckedState(node,true,options)},this));this.render()};Tree.prototype.all=function(options){return this.nodes};Tree.prototype.checkNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setCheckedState(node,true,options)},this));this.render()};Tree.prototype.uncheckAll=function(options){var identifiers=this.findNodes("true","g","state.checked");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setCheckedState(node,false,options)},this));this.render()};Tree.prototype.uncheckNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setCheckedState(node,false,options)},this));this.render()};Tree.prototype.toggleNodeChecked=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.toggleCheckedState(node,options)},this));this.render()};Tree.prototype.disableAll=function(options){var identifiers=this.findNodes("false","g","state.disabled");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setDisabledState(node,true,options)},this));this.render()};Tree.prototype.disableNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setDisabledState(node,true,options)},this));this.render()};Tree.prototype.enableAll=function(options){var identifiers=this.findNodes("true","g","state.disabled");this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setDisabledState(node,false,options)},this));this.render()};Tree.prototype.enableNode=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setDisabledState(node,false,options)},this));this.render()};Tree.prototype.toggleNodeDisabled=function(identifiers,options){this.forEachIdentifier(identifiers,options,$.proxy(function(node,options){this.setDisabledState(node,!node.state.disabled,options)},this));this.render()};Tree.prototype.forEachIdentifier=function(identifiers,options,callback){options=$.extend({},_default.options,options);if(!(identifiers instanceof Array)){identifiers=[identifiers]}$.each(identifiers,$.proxy(function(index,identifier){callback(this.identifyNode(identifier),options)},this))};Tree.prototype.identifyNode=function(identifier){return typeof identifier==="number"?this.nodes[identifier]:identifier};Tree.prototype.search=function(pattern,options){options=$.extend({},_default.searchOptions,options);this.clearSearch({render:false});var results=[];if(pattern&&pattern.length>0){if(options.exactMatch){pattern="^"+pattern+"$"}var modifier="g";if(options.ignoreCase){modifier+="i"}results=this.findNodes(pattern,modifier);$.each(results,function(index,node){node.searchResult=true})}if(options.revealResults){this.revealNode(results)}else{this.render()}this.$element.trigger("searchComplete",$.extend(true,{},results));return results};Tree.prototype.clearSearch=function(options){options=$.extend({},{render:true},options);var results=$.each(this.findNodes("true","g","searchResult"),function(index,node){node.searchResult=false});if(options.render){this.render()}this.$element.trigger("searchCleared",$.extend(true,{},results))};Tree.prototype.findNodes=function(pattern,modifier,attribute){modifier=modifier||"g";attribute=attribute||"text";var _this=this;return $.grep(this.nodes,function(node){var val=_this.getNodeValue(node,attribute);if(typeof val==="string"){return val.match(new RegExp(pattern,modifier))}})};Tree.prototype.getNodeValue=function(obj,attr){var index=attr.indexOf(".");if(index>0){var _obj=obj[attr.substring(0,index)];var _attr=attr.substring(index+1,attr.length);return this.getNodeValue(_obj,_attr)}else{if(obj.hasOwnProperty(attr)){return obj[attr].toString()}else{return undefined}}};var logError=function(message){if(window.console){window.console.error(message)}};$.fn[pluginName]=function(options,args){var result;this.each(function(){var _this=$.data(this,pluginName);if(typeof options==="string"){if(!_this){logError("Not initialized, can not call method : "+options)}else if(!$.isFunction(_this[options])||options.charAt(0)==="_"){logError("No such method : "+options)}else{if(!(args instanceof Array)){args=[args]}result=_this[options].apply(_this,args)}}else if(typeof options==="boolean"){result=_this}else{$.data(this,pluginName,new Tree(this,$.extend(true,{},options)))}});return result||this}})(jQuery,window,document)},{}],15:[function(require,module,exports){(function(win,undefined){"use strict";var doc=win.document,nav=win.navigator,loc=win.location,html=doc.documentElement,klass=[],conf={screens:[240,320,480,640,768,800,1024,1280,1440,1680,1920],screensCss:{gt:true,gte:false,lt:true,lte:false,eq:false},browsers:[{ie:{min:6,max:11}}],browserCss:{gt:true,gte:false,lt:true,lte:false,eq:true},html5:true,page:"-page",section:"-section",head:"head"};if(win.head_conf){for(var item in win.head_conf){if(win.head_conf[item]!==undefined){conf[item]=win.head_conf[item]}}}function pushClass(name){klass[klass.length]=name}function removeClass(name){var re=new RegExp(" ?\\b"+name+"\\b");html.className=html.className.replace(re,"")}function each(arr,fn){for(var i=0,l=arr.length;i<l;i++){fn.call(arr,arr[i],i)}}var api=win[conf.head]=function(){api.ready.apply(null,arguments)};api.feature=function(key,enabled,queue){if(!key){html.className+=" "+klass.join(" ");klass=[];return api}if(Object.prototype.toString.call(enabled)==="[object Function]"){enabled=enabled.call()}pushClass((enabled?"":"no-")+key);api[key]=!!enabled;if(!queue){removeClass("no-"+key);removeClass(key);api.feature()}return api};api.feature("js",true);var ua=nav.userAgent.toLowerCase(),mobile=/mobile|android|kindle|silk|midp|phone|(windows .+arm|touch)/.test(ua);api.feature("mobile",mobile,true);api.feature("desktop",!mobile,true);ua=/(chrome|firefox)[ \/]([\w.]+)/.exec(ua)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident).+rv:(\w.)+/.exec(ua)||[];var browser=ua[1],version=parseFloat(ua[2]);switch(browser){case"msie":case"trident":browser="ie";version=doc.documentMode||version
;break;case"firefox":browser="ff";break;case"ipod":case"ipad":case"iphone":browser="ios";break;case"webkit":browser="safari";break}api.browser={name:browser,version:version};api.browser[browser]=true;for(var i=0,l=conf.browsers.length;i<l;i++){for(var key in conf.browsers[i]){if(browser===key){pushClass(key);var min=conf.browsers[i][key].min;var max=conf.browsers[i][key].max;for(var v=min;v<=max;v++){if(version>v){if(conf.browserCss.gt){pushClass("gt-"+key+v)}if(conf.browserCss.gte){pushClass("gte-"+key+v)}}else if(version<v){if(conf.browserCss.lt){pushClass("lt-"+key+v)}if(conf.browserCss.lte){pushClass("lte-"+key+v)}}else if(version===v){if(conf.browserCss.lte){pushClass("lte-"+key+v)}if(conf.browserCss.eq){pushClass("eq-"+key+v)}if(conf.browserCss.gte){pushClass("gte-"+key+v)}}}}else{pushClass("no-"+key)}}}pushClass(browser);pushClass(browser+parseInt(version,10));if(conf.html5&&browser==="ie"&&version<9){each("abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|progress|section|summary|time|video".split("|"),function(el){doc.createElement(el)})}each(loc.pathname.split("/"),function(el,i){if(this.length>2&&this[i+1]!==undefined){if(i){pushClass(this.slice(i,i+1).join("-").toLowerCase()+conf.section)}}else{var id=el||"index",index=id.indexOf(".");if(index>0){id=id.substring(0,index)}html.id=id.toLowerCase()+conf.page;if(!i){pushClass("root"+conf.section)}}});api.screen={height:win.screen.height,width:win.screen.width};function screenSize(){html.className=html.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,"");var iw=win.innerWidth||html.clientWidth,ow=win.outerWidth||win.screen.width;api.screen.innerWidth=iw;api.screen.outerWidth=ow;pushClass("w-"+iw);each(conf.screens,function(width){if(iw>width){if(conf.screensCss.gt){pushClass("gt-"+width)}if(conf.screensCss.gte){pushClass("gte-"+width)}}else if(iw<width){if(conf.screensCss.lt){pushClass("lt-"+width)}if(conf.screensCss.lte){pushClass("lte-"+width)}}else if(iw===width){if(conf.screensCss.lte){pushClass("lte-"+width)}if(conf.screensCss.eq){pushClass("e-q"+width)}if(conf.screensCss.gte){pushClass("gte-"+width)}}});var ih=win.innerHeight||html.clientHeight,oh=win.outerHeight||win.screen.height;api.screen.innerHeight=ih;api.screen.outerHeight=oh;api.feature("portrait",ih>iw);api.feature("landscape",ih<iw)}screenSize();var resizeId=0;function onResize(){win.clearTimeout(resizeId);resizeId=win.setTimeout(screenSize,50)}if(win.addEventListener){win.addEventListener("resize",onResize,false)}else{win.attachEvent("onresize",onResize)}})(window);(function(win,undefined){"use strict";var doc=win.document,el=doc.createElement("i"),style=el.style,prefs=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),domPrefs="Webkit Moz O ms Khtml".split(" "),headVar=win.head_conf&&win.head_conf.head||"head",api=win[headVar];function testProps(props){for(var i in props){if(style[props[i]]!==undefined){return true}}return false}function testAll(prop){var camel=prop.charAt(0).toUpperCase()+prop.substr(1),props=(prop+" "+domPrefs.join(camel+" ")+camel).split(" ");return!!testProps(props)}var tests={gradient:function(){var s1="background-image:",s2="gradient(linear,left top,right bottom,from(#9f9),to(#fff));",s3="linear-gradient(left top,#eee,#fff);";style.cssText=(s1+prefs.join(s2+s1)+prefs.join(s3+s1)).slice(0,-s1.length);return!!style.backgroundImage},rgba:function(){style.cssText="background-color:rgba(0,0,0,0.5)";return!!style.backgroundColor},opacity:function(){return el.style.opacity===""},textshadow:function(){return style.textShadow===""},multiplebgs:function(){style.cssText="background:url(https://),url(https://),red url(https://)";var result=(style.background||"").match(/url/g);return Object.prototype.toString.call(result)==="[object Array]"&&result.length===3},boxshadow:function(){return testAll("boxShadow")},borderimage:function(){return testAll("borderImage")},borderradius:function(){return testAll("borderRadius")},cssreflections:function(){return testAll("boxReflect")},csstransforms:function(){return testAll("transform")},csstransitions:function(){return testAll("transition")},touch:function(){return"ontouchstart"in win},retina:function(){return win.devicePixelRatio>1},fontface:function(){var browser=api.browser.name,version=api.browser.version;switch(browser){case"ie":return version>=9;case"chrome":return version>=13;case"ff":return version>=6;case"ios":return version>=5;case"android":return false;case"webkit":return version>=5.1;case"opera":return version>=10;default:return false}}};for(var key in tests){if(tests[key]){api.feature(key,tests[key].call(),true)}}api.feature()})(window);(function(win,undefined){"use strict";var doc=win.document,domWaiters=[],handlers={},assets={},isAsync="async"in doc.createElement("script")||"MozAppearance"in doc.documentElement.style||win.opera,isDomReady,headVar=win.head_conf&&win.head_conf.head||"head",api=win[headVar]=win[headVar]||function(){api.ready.apply(null,arguments)},PRELOADING=1,PRELOADED=2,LOADING=3,LOADED=4;function noop(){}function each(arr,callback){if(!arr){return}if(typeof arr==="object"){arr=[].slice.call(arr)}for(var i=0,l=arr.length;i<l;i++){callback.call(arr,arr[i],i)}}function is(type,obj){var clas=Object.prototype.toString.call(obj).slice(8,-1);return obj!==undefined&&obj!==null&&clas===type}function isFunction(item){return is("Function",item)}function isArray(item){return is("Array",item)}function toLabel(url){var items=url.split("/"),name=items[items.length-1],i=name.indexOf("?");return i!==-1?name.substring(0,i):name}function one(callback){callback=callback||noop;if(callback._done){return}callback();callback._done=1}function conditional(test,success,failure,callback){var obj=typeof test==="object"?test:{test:test,success:!!success?isArray(success)?success:[success]:false,failure:!!failure?isArray(failure)?failure:[failure]:false,callback:callback||noop};var passed=!!obj.test;if(passed&&!!obj.success){obj.success.push(obj.callback);api.load.apply(null,obj.success)}else if(!passed&&!!obj.failure){obj.failure.push(obj.callback);api.load.apply(null,obj.failure)}else{callback()}return api}function getAsset(item){var asset={};if(typeof item==="object"){for(var label in item){if(!!item[label]){asset={name:label,url:item[label]}}}}else{asset={name:toLabel(item),url:item}}var existing=assets[asset.name];if(existing&&existing.url===asset.url){return existing}assets[asset.name]=asset;return asset}function allLoaded(items){items=items||assets;for(var name in items){if(items.hasOwnProperty(name)&&items[name].state!==LOADED){return false}}return true}function onPreload(asset){asset.state=PRELOADED;each(asset.onpreload,function(afterPreload){afterPreload.call()})}function preLoad(asset,callback){if(asset.state===undefined){asset.state=PRELOADING;asset.onpreload=[];loadAsset({url:asset.url,type:"cache"},function(){onPreload(asset)})}}function apiLoadHack(){var args=arguments,callback=args[args.length-1],rest=[].slice.call(args,1),next=rest[0];if(!isFunction(callback)){callback=null}if(isArray(args[0])){args[0].push(callback);api.load.apply(null,args[0]);return api}if(!!next){each(rest,function(item){if(!isFunction(item)&&!!item){preLoad(getAsset(item))}});load(getAsset(args[0]),isFunction(next)?next:function(){api.load.apply(null,rest)})}else{load(getAsset(args[0]))}return api}function apiLoadAsync(){var args=arguments,callback=args[args.length-1],items={};if(!isFunction(callback)){callback=null}if(isArray(args[0])){args[0].push(callback);api.load.apply(null,args[0]);return api}each(args,function(item,i){if(item!==callback){item=getAsset(item);items[item.name]=item}});each(args,function(item,i){if(item!==callback){item=getAsset(item);load(item,function(){if(allLoaded(items)){one(callback)}})}});return api}function load(asset,callback){callback=callback||noop;if(asset.state===LOADED){callback();return}if(asset.state===LOADING){api.ready(asset.name,callback);return}if(asset.state===PRELOADING){asset.onpreload.push(function(){load(asset,callback)});return}asset.state=LOADING;loadAsset(asset,function(){asset.state=LOADED;callback();each(handlers[asset.name],function(fn){one(fn)});if(isDomReady&&allLoaded()){each(handlers.ALL,function(fn){one(fn)})}})}function getExtension(url){url=url||"";var items=url.split("?")[0].split(".");return items[items.length-1].toLowerCase()}function loadAsset(asset,callback){callback=callback||noop;function error(event){event=event||win.event;ele.onload=ele.onreadystatechange=ele.onerror=null;callback()}function process(event){event=event||win.event;if(event.type==="load"||/loaded|complete/.test(ele.readyState)&&(!doc.documentMode||doc.documentMode<9)){win.clearTimeout(asset.errorTimeout);win.clearTimeout(asset.cssTimeout);ele.onload=ele.onreadystatechange=ele.onerror=null;callback()}}function isCssLoaded(){if(asset.state!==LOADED&&asset.cssRetries<=20){for(var i=0,l=doc.styleSheets.length;i<l;i++){if(doc.styleSheets[i].href===ele.href){process({type:"load"});return}}asset.cssRetries++;asset.cssTimeout=win.setTimeout(isCssLoaded,250)}}var ele;var ext=getExtension(asset.url);if(ext==="css"){ele=doc.createElement("link");ele.type="text/"+(asset.type||"css");ele.rel="stylesheet";ele.href=asset.url;asset.cssRetries=0;asset.cssTimeout=win.setTimeout(isCssLoaded,500)}else{ele=doc.createElement("script");ele.type="text/"+(asset.type||"javascript");ele.src=asset.url}ele.onload=ele.onreadystatechange=process;ele.onerror=error;ele.async=false;ele.defer=false;asset.errorTimeout=win.setTimeout(function(){error({type:"timeout"})},7e3);var head=doc.head||doc.getElementsByTagName("head")[0];head.insertBefore(ele,head.lastChild)}function init(){var items=doc.getElementsByTagName("script");for(var i=0,l=items.length;i<l;i++){var dataMain=items[i].getAttribute("data-headjs-load");if(!!dataMain){api.load(dataMain);return}}}function ready(key,callback){if(key===doc){if(isDomReady){one(callback)}else{domWaiters.push(callback)}return api}if(isFunction(key)){callback=key;key="ALL"}if(isArray(key)){var items={};each(key,function(item){items[item]=assets[item];api.ready(item,function(){if(allLoaded(items)){one(callback)}})});return api}if(typeof key!=="string"||!isFunction(callback)){return api}var asset=assets[key];if(asset&&asset.state===LOADED||key==="ALL"&&allLoaded()&&isDomReady){one(callback);return api}var arr=handlers[key];if(!arr){arr=handlers[key]=[callback]}else{arr.push(callback)}return api}function domReady(){if(!doc.body){win.clearTimeout(api.readyTimeout);api.readyTimeout=win.setTimeout(domReady,50);return}if(!isDomReady){isDomReady=true;init();each(domWaiters,function(fn){one(fn)})}}function domContentLoaded(){if(doc.addEventListener){doc.removeEventListener("DOMContentLoaded",domContentLoaded,false);domReady()}else if(doc.readyState==="complete"){doc.detachEvent("onreadystatechange",domContentLoaded);domReady()}}if(doc.readyState==="complete"){domReady()}else if(doc.addEventListener){doc.addEventListener("DOMContentLoaded",domContentLoaded,false);win.addEventListener("load",domReady,false)}else{doc.attachEvent("onreadystatechange",domContentLoaded);win.attachEvent("onload",domReady);var top=false;try{top=!win.frameElement&&doc.documentElement}catch(e){}if(top&&top.doScroll){(function doScrollCheck(){if(!isDomReady){try{top.doScroll("left")}catch(error){win.clearTimeout(api.readyTimeout);api.readyTimeout=win.setTimeout(doScrollCheck,50);return}domReady()}})()}}api.load=api.js=isAsync?apiLoadAsync:apiLoadHack;api.test=conditional;api.ready=ready;api.ready(doc,function(){if(allLoaded()){each(handlers.ALL,function(callback){one(callback)})}if(api.feature){api.feature("domloaded",true)}})})(window)},{}],16:[function(require,module,exports){(function(){var attachEvent=document.attachEvent,stylesCreated=false;if(!attachEvent){var requestFrame=function(){var raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20)};return function(fn){return raf(fn)}}();var cancelFrame=function(){var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(id){return cancel(id)}}();function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth;contract.scrollTop=contract.scrollHeight;expandChild.style.width=expand.offsetWidth+1+"px";expandChild.style.height=expand.offsetHeight+1+"px";expand.scrollLeft=expand.scrollWidth;expand.scrollTop=expand.scrollHeight}function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height}function scrollListener(e){var element=this;resetTriggers(this);if(this.__resizeRAF__)cancelFrame(this.__resizeRAF__);this.__resizeRAF__=requestFrame(function(){if(checkTriggers(element)){element.__resizeLast__.width=element.offsetWidth;element.__resizeLast__.height=element.offsetHeight;element.__resizeListeners__.forEach(function(fn){fn.call(element,e)})}})}var animation=false,animationstring="animation",keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),pfx="";{var elm=document.createElement("fakeelement");if(elm.style.animationName!==undefined){animation=true}if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+"AnimationName"]!==undefined){pfx=domPrefixes[i];animationstring=pfx+"Animation";keyframeprefix="-"+pfx.toLowerCase()+"-";animationstartevent=startEvents[i];animation=true;break}}}}var animationName="resizeanim";var animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ";var animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}function createStyles(){if(!stylesCreated){var css=(animationKeyframes?animationKeyframes:"")+".resize-triggers { "+(animationStyle?animationStyle:"")+"visibility: hidden; opacity: 0; } "+'.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}head.appendChild(style);stylesCreated=true}}window.addResizeListener=function(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){if(getComputedStyle(element).position=="static")element.style.position="relative";createStyles();element.__resizeLast__={};element.__resizeListeners__=[];(element.__resizeTriggers__=document.createElement("div")).className="resize-triggers";element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div>'+'<div class="contract-trigger"></div>';element.appendChild(element.__resizeTriggers__);resetTriggers(element);element.addEventListener("scroll",scrollListener,true);animationstartevent&&element.__resizeTriggers__.addEventListener(animationstartevent,function(e){if(e.animationName==animationName)resetTriggers(element)})}element.__resizeListeners__.push(fn)}};window.removeResizeListener=function(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else{element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1);if(!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener);element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}}}})()},{}],17:[function(require,module,exports){(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var document=window.document;var getProto=Object.getPrototypeOf;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};function DOMEval(code,doc){doc=doc||document;var script=doc.createElement("script");script.text=code;doc.head.appendChild(script).parentNode.removeChild(script)}var version="3.1.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this)},get:function(num){if(num==null){return slice.call(this)}return num<0?this[num+this.length]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj))},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false}proto=getProto(obj);if(!proto){return true}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){DOMEval(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return""}return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" "}return"\\"+ch},unloadHandler=function(){setDocument()},disabledAncestor=addCombinator(function(elem){return elem.disabled===true&&("form"in elem||"label"in elem)},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rcssescape,fcssescape)}else{context.setAttribute("id",nid=expando)}groups=tokenize(selector);i=groups.length;while(i--){groups[i]="#"+nid+" "+toSelector(groups[i])}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id")}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return false}finally{if(el.parentNode){el.parentNode.removeChild(el)}el=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled}else{return elem.disabled===disabled}}return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled}return elem.disabled===disabled}else if("label"in elem){return elem.disabled===disabled}return false}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false)}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler)}}support.attributes=assert(function(el){el.className="i";return!el.getAttribute("className")});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return!el.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[]}}}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}elems=context.getElementsByName(id);i=0;while(elem=elems[i++]){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}}}return[]}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}
if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled")}docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled")}el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(false),disabled:createDisabledPseudo(true),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}return false}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{uniqueCache[key]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}return false}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(el){return el.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements);return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not&&elem.nodeType===1})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[]}return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}return len>1?jQuery.uniqueSort(ret):ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1}return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(locked){if(memory){list=[]}else{list=""}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list){list=[]}return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory=""}return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject){var method;try{if(value&&jQuery.isFunction(method=value.promise)){method.call(value).done(resolve).fail(reject)}else if(value&&jQuery.isFunction(method=value.then)){method.call(value,resolve,reject)}else{resolve.call(undefined,value)}}catch(value){reject.call(undefined,value)}}jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},catch:function(fn){return promise.then(null,fn)},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)}})});fns=null}).promise()},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return}returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution")}then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(jQuery.isFunction(then)){if(special){
then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special))}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))}}else{if(handler!==Identity){that=undefined;args=[returned]}(special||deferred.resolveWith)(that,args)}},process=special?mightThrow:function(){try{mightThrow()}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace)}if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e]}deferred.rejectWith(that,args)}}};if(depth){process()}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook()}window.setTimeout(process)}}}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower))}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[3-i][2].disable,tuples[0][2].lock)}list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(!--remaining){master.resolveWith(resolveContexts,resolveValues)}}};if(remaining<=1){adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject);if(master.state()==="pending"||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then)){return master.then()}}while(i--){adoptValue(resolveValues[i],updateFunc(i),master.reject)}return master.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack)}};jQuery.readyException=function(error){window.setTimeout(function(){throw error})};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn).catch(function(error){jQuery.readyException(error)});return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery])}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}if(chainable){return elems}if(bulk){return fn.call(elems)}return len?fn(elems[0],key):emptyGet};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[jQuery.camelCase(data)]=value}else{for(prop in data){cache[jQuery.camelCase(prop)]=data[prop]}}return cache},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)]},access:function(owner,key,value){if(key===undefined||key&&typeof key==="string"&&value===undefined){return this.get(owner,key)}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return}if(key!==undefined){if(jQuery.isArray(key)){key=key.map(jQuery.camelCase)}else{key=jQuery.camelCase(key);key=key in cache?[key]:key.match(rnothtmlwhite)||[]}i=key.length;while(i--){delete cache[key[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true}if(data==="false"){return false}if(data==="null"){return null}if(data===+data+""){return+data}if(rbrace.test(data)){return JSON.parse(data)}return data}function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data)}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data}data=dataAttr(elem,key);if(data!==undefined){return data}return}this.each(function(){dataUser.set(this,key,value)})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&jQuery.contains(elem.ownerDocument,elem)&&jQuery.css(elem,"display")==="none"};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display}temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block"}defaultDisplayMap[nodeName]=display;return display}function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display=""}}if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem)}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display)}}}for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index]}}return elements}jQuery.fn.extend({show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var rscriptType=/^$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*")}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*")}else{ret=[]}if(tag===undefined||tag&&jQuery.nodeName(context,tag)){return jQuery.merge([context],ret)}return ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var documentElement=document.documentElement;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(selector){jQuery.find.matchesSelector(documentElement,selector)}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function(nativeEvent){var event=jQuery.event.fix(nativeEvent);var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i]}event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matchedSelectors[sel]){matchedHandlers.push(handleObj)}}if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers})}}}}cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)})}return handlerQueue},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:jQuery.isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[name]}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value})}})},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=src.target&&src.target.nodeType===3?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(event){var button=event.button;if(event.which==null&&rkeyEvent.test(event.type)){return event.charCode!=null?event.charCode:event.keyCode}if(!event.which&&button!==undefined&&rmouseEvent.test(event.type)){if(button&1){return 1}if(button&2){return 3}if(button&4){return 2}return 0}return event.which}},jQuery.event.addProp);jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){if(jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return elem.getElementsByTagName("tbody")[0]||elem}return elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{DOMEval(node.textContent.replace(rcleanScript,""),doc)}}}}}}return collection}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}
return this.pushStack(ret)}});var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};(function(){function computeStyleTests(){if(!div){return}div.style.cssText="box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container);div=null}var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal},boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal},pixelMarginRight:function(){computeStyleTests();return pixelMarginRightVal},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i,val=0;if(extra===(isBorderBox?"border":"content")){i=4}else{i=name==="width"?1:0}for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=true,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(elem.getClientRects().length){val=elem.getBoundingClientRect()[name]}if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function raf(){if(timerId){window.requestAnimationFrame(raf);jQuery.fx.tick()}}function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}}propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return}if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display")}display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem])}}if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display}}style.display="inline-block"}}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay})}if(toggle){dataShow.hidden=!hidden}if(hidden){showHide([elem],true)}anim.done(function(){if(!hidden){showHide([elem])}dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}})}propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)}return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnothtmlwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(jQuery.fx.off||document.hidden){opt.duration=0}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration]}else{opt.duration=jQuery.fx.speeds._default}}}if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.requestAnimationFrame?window.requestAnimationFrame(raf):window.setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){if(window.cancelAnimationFrame){window.cancelAnimationFrame(timerId)}else{window.clearInterval(timerId)}timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){elem.removeAttribute(name)}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10)}if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ")}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ")}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnothtmlwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"")}return ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem))}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max}else{i=one?index:0}for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix)}else{dataPriv.access(doc,fix,attaches)}}}})}
var location=window.location;var nonce=jQuery.now();var rquery=/\?/;jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value==null?"":value)};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();if(val==null){return null}if(jQuery.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})}return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s.throws){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return completed?responseHeadersString:null},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(completed==null){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status])}else{for(code in map){statusCode[code]=[statusCode[code],map[code]]}}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce+++uncached}s.url=cacheURL+uncached}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+")}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort()}strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(completed){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{completed=false;transport.send(requestHeaders,done)}catch(e){if(completed){throw e}done(-1,e)}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return}completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(jQuery.isFunction(html)){html=html.call(this[0])}wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes)});return this}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback()}})}}}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});support.createHTMLDocument=function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2}();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[]}if(typeof context==="boolean"){keepScripts=context;context=false}var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base)}else{context=document}}parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,rect,doc,elem=this[0];if(!elem){return}if(!elem.getClientRects().length){return{top:0,left:0}}rect=elem.getBoundingClientRect();if(rect.width||rect.height){doc=elem.ownerDocument;win=getWindow(doc);docElem=doc.documentElement;return{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft}}return rect},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset={top:parentOffset.top+jQuery.css(offsetParent[0],"borderTopWidth",true),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",true)}}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});jQuery.parseJSON=JSON.parse;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(!noGlobal){window.jQuery=window.$=jQuery}return jQuery})},{}],18:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==="[object Object]"}function isObjectEmpty(obj){var k;for(k in obj){return false}return true}function isNumber(input){return typeof input==="number"||Object.prototype.toString.call(input)==="[object Number]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}var some;if(Array.prototype.some){some=Array.prototype.some}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true}}return false}}var some$1=some;function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some$1.call(flags.parsedDateParts,function(i){return i!=null});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid}else{return isNowValid}}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}function isUndefined(input){return input===void 0}var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject}if(!isUndefined(from._i)){to._i=from._i}if(!isUndefined(from._f)){to._f=from._f}if(!isUndefined(from._l)){to._l=from._l}if(!isUndefined(from._strict)){to._strict=from._strict}if(!isUndefined(from._tzm)){to._tzm=from._tzm}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC}if(!isUndefined(from._offset)){to._offset=from._offset}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from)}if(!isUndefined(from._locale)){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function absFloor(number){if(number<0){return Math.ceil(number)||0}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg)}if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg="";if(typeof arguments[i]==="object"){arg+="\n["+i+"] ";for(var key in arguments[0]){arg+=key+": "+arguments[0][key]+", "}arg=arg.slice(0,-2)}else{arg=arguments[i]}args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg)}if(!deprecations[name]){warn(msg);deprecations[name]=true}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop}else{this["_"+i]=prop}}this._config=config;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop])}else if(childConfig[prop]!=null){res[prop]=childConfig[prop]}else{delete res[prop]}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop])}}return res}function Locale(config){if(config!=null){this.set(config)}}var keys;if(Object.keys){keys=Object.keys}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i)}}return res}}var keys$1=keys;var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"]
;return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]})}units.sort(function(a,b){return a.priority-b.priority});return units}function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this}else{return get(this,unit)}}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){if(mom.isValid()){mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]()}return this}function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit])}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value)}}return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="",i;for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i}}return-1}}var indexOf$1=indexOf;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m,format){if(!m){return this._months}return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m,format){if(!m){return this._monthsShort}return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase()}}if(strict){if(format==="MMM"){ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null}}else{if(format==="MMM"){ii=indexOf$1.call(this._shortMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._longMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom}if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value)}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this}else{return get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2e3,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""))}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i])}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i])}this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y)}return date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year)}else{resYear=year;resDayOfYear=dayOfYear}return{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy)}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1}else{resYear=mom.year();resWeek=week}return{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7}return isNaN(input)?null:input}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m,format){if(!m){return this._weekdays}return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase()}}if(strict){if(format==="dddd"){ii=indexOf$1.call(this._weekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}}else{if(format==="dddd"){ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else{return this.day()||7}}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);minp=this.weekdaysMin(mom,"");shortp=this.weekdaysShort(mom,"");longp=this.weekdays(mom,"");minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp)}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i])}this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos))});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,config){if(config!==null){var parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[]}localeFamilies[config.parentLocale].push({name:name,config:config});return null}}locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)})}getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function updateLocale(name,config){if(config!=null){var locale,parentConfig=baseConfig;if(locales[name]!=null){parentConfig=locales[name]._config}config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name)}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale}else if(locales[name]!=null){delete locales[name]}}}return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}function listLocales(){return keys$1(locales)}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY}getParsingFlags(m).overflow=overflow}return m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break}}if(dateFormat==null){config._isValid=false;return}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}}if(timeFormat==null){config._isValid=false;return}}if(!allowTime&&timeFormat!=null){config._isValid=false;return}if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z"}else{config._isValid=false;return}}config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config)}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid;hooks.createFromInputFallback(config)}}hooks.createFromInputFallback=deprecate("value provided is not in a recognized ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]}
return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true}}else{weekday=dow}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}}hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)});configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||format===undefined&&input===""){return createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isDate(input)){config._d=input}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else{configFromInput(config)}if(!isValid(config)){config._d=null}return config}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date(hooks.now())}else if(isDate(input)){config._d=new Date(input.valueOf())}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(typeof input==="object"){configFromObject(config)}else if(isNumber(input)){config._d=new Date(input)}else{hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other}else{return createInvalid()}});var prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other}else{return createInvalid()}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date};function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1e3*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){if(number<0){return Math.round(-1*number)*-1}else{return Math.round(number)}}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher);if(matches===null){return null}var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res}else{return createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN}if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input);if(input===null){return this}}else if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone)}else{this.utcOffset(0,true)}}return this}function hasAlignedHourOffset(input){if(!this.isValid()){return false}input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(isNumber(input)){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1e3))*sign}}else if(!!(match=isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0}}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return}updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding)}if(days){set$1(mom,"Date",get(mom,"Date")+days*isAdding)}if(months){setMonth(mom,get(mom,"Month")+months*isAdding)}if(updateOffset){hooks.updateOffset(mom,days||months)}}var add=createAdder(1,"add");var subtract=createAdder(-1,"subtract");function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse";var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()>localInput.valueOf()}else{return localInput.valueOf()<this.clone().startOf(units).valueOf()}}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()<localInput.valueOf()}else{return this.clone().endOf(units).valueOf()<localInput.valueOf()}}function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||"()";return(inclusivity[0]==="("?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===")"?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units||"millisecond");if(units==="millisecond"){return this.valueOf()===localInput.valueOf()}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3}else if(units==="year"){output=output/12}}else{delta=this-that;output=units==="second"?delta/1e3:units==="minute"?delta/6e4:units==="hour"?delta/36e5:units==="day"?(delta-zoneDelta)/864e5:units==="week"?(delta-zoneDelta)/6048e5:delta}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if(isFunction(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var func="moment";var zone="";if(!this.isLocal()){func=this.utcOffset()===0?"moment.utc":"moment.parseZone";zone="Z"}var prefix="["+func+'("]';var year=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var datetime="-MM-DD[T]HH:mm:ss.SSS";var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat}var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}if(units==="date"){units="day"}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$1(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget}return setWeekAll.call(this,input,week,weekday,dow,doy)}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$1;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined}format=format||"";if(index!=null){return get$1(format,index,field,"month")}var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,"month")}return out}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(isNumber(format)){index=format;format=undefined}format=format||""}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined}format=format||""}var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,"day")}var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,"day")}return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale)
;hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==="month"?months:months/12}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function valueOf$1(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function get$2(units){units=normalizeUnits(units);return this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round}if(typeof roundingFunction==="function"){round=roundingFunction;return true}return false}function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;return true}function humanize(withSuffix){var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var abs$1=Math.abs;function toISOString$1(){var seconds=abs$1(this._milliseconds)/1e3;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return"P0D"}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"")}var proto$2=Duration.prototype;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});hooks.version="2.17.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;return hooks})},{}],19:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var types=require("./types");var ts=require("./typesService");var utils=require("./utils");var service=ts.INSTANCE;var ListenableValue=types.ListenableValue;var Binding=types.Binding;var pluralize=require("pluralize");var cu=require("./collectionUtils");var deepCopy=utils.deepCopy;var types_1=require("./types");var collectionUtils_1=require("./collectionUtils");var SelectionAccessControl=function(_super){__extends(SelectionAccessControl,_super);function SelectionAccessControl(selection,collection){var _this=_super.call(this,selection)||this;_this.selection=selection;_this.collection=collection;return _this}SelectionAccessControl.prototype.isEditable=function(){if(!this.collection.accessControl().canEditSelf()){return false}if(!this.collection.accessControl().canEditItem(this.selection.get())){return false}return true};SelectionAccessControl.prototype.canEditSelf=function(){return!this.selection.immutable};SelectionAccessControl.prototype.canEditChildren=function(){return this.isEditable()};return SelectionAccessControl}(types_1.DefaultAccessControl);exports.SelectionAccessControl=SelectionAccessControl;var AbstractCollectionBinding=function(_super){__extends(AbstractCollectionBinding,_super);function AbstractCollectionBinding(pb){var _this=_super.call(this)||this;_this.pb=pb;if(pb.type().groupBy){var gb=pb.type().groupBy;_this._groupByProp=gb.property}return _this}AbstractCollectionBinding.prototype.groupBy=function(){return this._groupByProp!=null};AbstractCollectionBinding.prototype.setGroupByProperty=function(property){this._groupByProp=property;this.change()};AbstractCollectionBinding.prototype.postransform=function(value){if(this._groupByProp){return cu.groupBy(value,this._groupByProp,this.componentType())}return value};AbstractCollectionBinding.prototype.tree=function(){return this._tree};AbstractCollectionBinding.prototype.children=function(x){if(this.groupBy()){if(x instanceof collectionUtils_1.GroupNode){return x.children}}if(this._tree){var vl=types.service.getValue(this.componentType(),x,this._treeProperty,null);if(vl){if(!Array.isArray(vl)){return[vl]}return vl}}return[]};AbstractCollectionBinding.prototype.expandValues=function(ac){var _this=this;if(ac){if(this.groupBy()||this.tree()){var rs=[];ac.forEach(function(x){rs.push(x);if(_this.expanded(x)){rs=rs.concat(_this.expandValues(_this.children(x)))}});return rs}}else{return[]}return ac};AbstractCollectionBinding.prototype.levels=function(ac,num){var _this=this;if(ac===void 0){ac=this.workingCopy()}if(num===void 0){num=0}if(this.groupBy()||this.tree()){var rs=[];ac.forEach(function(x){rs.push(num);if(_this.expanded(x)){rs=rs.concat(_this.levels(_this.children(x),num+1))}});return rs}return null};AbstractCollectionBinding.prototype.expanded=function(x){if(!this.expansionMap){return false}return this.expansionMap.has(x)};AbstractCollectionBinding.prototype.expand=function(m){if(!this.expansionMap){this.expansionMap=new WeakMap}this.expansionMap.set(m,true);this.change()};AbstractCollectionBinding.prototype.collapse=function(m){this.expansionMap.delete(m);this.change()};AbstractCollectionBinding.prototype.get=function(){return this.workingCopy()};AbstractCollectionBinding.prototype.selectionBinding=function(){if(!this._selection){this._selection=this.createSelectionBinding()}return this._selection};AbstractCollectionBinding.prototype.originalValue=function(){};AbstractCollectionBinding.prototype.createSelectionBinding=function(){var sb=new Binding("selection");sb._type={type:this.componentType(),owningCollection:this.pb,uniquinessException:sb};sb.context=this.pb;sb.autoinit=false;sb.readonly=true;this._selection=sb;var v=this;sb.addPrecomitListener({valueChanged:function(){if(!v.changing){v.applyChangesFromSelection()}}});sb._acccessor=new SelectionAccessControl(sb,this.pb);return sb};AbstractCollectionBinding.prototype.getSelection=function(){var vl=this.selectionBinding().get();if(!vl){return[]}if(!Array.isArray(vl)){return[vl]}return vl};AbstractCollectionBinding.prototype.setSelection=function(v,fireUp){if(fireUp===void 0){fireUp=false}var ll="<>";try{ll=JSON.stringify(v)}catch(e){}if(this.applyingSelection){return}this.changing=true;try{var s=this.selectionBinding();var r=s.readonly;var old=this.getSelection();s.readonly=false;if(v.length==1){s.set(v[0])}else if(v.length==0){s.set(null)}else{s.set([].concat(v))}this._selection.readonly=r}finally{this.changing=false;if(fireUp){this.change()}else{this.pb.fireEvent({kind:"change",source:s,target:this,oldValue:old,newValue:v,subKind:"selection"})}}};AbstractCollectionBinding.prototype.containsWithProp=function(prop,value,exceptions){var _this=this;return this.workingCopy().filter(function(x){return service.getValue(_this.componentType(),x,prop)==value}).filter(function(x){return exceptions.indexOf(x)==-1}).length>0};AbstractCollectionBinding.prototype.fireAdd=function(v){this.fireEvent({kind:"add",target:this,oldValue:null,newValue:v,source:this.pb});this.change()};AbstractCollectionBinding.prototype.change=function(){if(this.changing){return}this.changing=true;try{if(!this.pb.get()){this.pb.set(this.originalValue())}this.pb.changed()}finally{this.changing=false}};AbstractCollectionBinding.prototype.applyChangesFromSelection=function(){var _this=this;this.fireEvent({kind:"selectionchange",target:this,oldValue:null,newValue:this.selectionBinding().get(),source:this.pb});this.applyingSelection=true;try{this.getSelection().forEach(function(x){_this.applyChangedElement(x)});this.postApplySelection()}finally{this.applyingSelection=false}};AbstractCollectionBinding.prototype.applyChangedElement=function(x){var wcElement=this.getWCElement(x)};AbstractCollectionBinding.prototype.postApplySelection=function(){};AbstractCollectionBinding.prototype.getWCElement=function(x){return x};AbstractCollectionBinding.prototype.fireRemove=function(v){this.fireEvent({kind:"remove",target:this,oldValue:null,newValue:v,source:this.pb});if(this.isSelected(v)){var newSelection=this.getSelection().filter(function(x){return x!=v});this.setSelection(newSelection)}this.change()};AbstractCollectionBinding.prototype.fireReplace=function(old,v){this.fireEvent({kind:"change",target:this,oldValue:old,newValue:v,source:this.pb});this.change()};AbstractCollectionBinding.prototype.isSelected=function(v){return this.existInValue(v,this.getSelection())};AbstractCollectionBinding.prototype.existInValue=function(v,r){var plain=r.indexOf(v)!=-1;if(plain){return plain}if(v instanceof types_1.HasType){v=v.$value}var keyProp=service.keyProp(this.componentType());if(v){var has=false;r.forEach(function(x){if(x instanceof types_1.HasType){if(x.$value==v){has=true}}});if(has){return has}if(keyProp){var vl=v[keyProp];if(vl){plain=plain||r.filter(function(x){return x[keyProp]===vl}).length!=0}}else{}}return plain};AbstractCollectionBinding.prototype.isSame=function(oldValue,newValue){return utils.isSame(oldValue,newValue)};return AbstractCollectionBinding}(ListenableValue);exports.AbstractCollectionBinding=AbstractCollectionBinding;var ArrayCollectionBinding=function(_super){__extends(ArrayCollectionBinding,_super);function ArrayCollectionBinding(p){var _this=_super.call(this,p)||this;if(p.type().uniqueItems){_this._componentType={uniqueValue:true,owningCollection:_this,type:p.type().itemType}}else _this._componentType={owningCollection:_this,type:p.type().itemType};if(!_this._componentType.type.displayName&&p.type().displayName){_this._componentType.displayName=ts.nicerName(pluralize.singular(p.type().displayName))}return _this}ArrayCollectionBinding.prototype.expand=function(v){this._evalue=null;this._levels=null;_super.prototype.expand.call(this,v)};ArrayCollectionBinding.prototype.collapse=function(v){this._evalue=null;this._levels=null;_super.prototype.collapse.call(this,v)};ArrayCollectionBinding.prototype.postApplySelection=function(){this.change()};ArrayCollectionBinding.prototype.levels=function(ac,num){if(ac===void 0){ac=this.workingCopy()}if(num===void 0){num=0}if(num==0){if(this._levels){return this._levels}this._levels=_super.prototype.levels.call(this,ac,num);return this._levels}return _super.prototype.levels.call(this,ac,num)};ArrayCollectionBinding.prototype.setGroupByProperty=function(property){this._tvalue=null;this._evalue=null;this._levels=null;_super.prototype.setGroupByProperty.call(this,property)};ArrayCollectionBinding.prototype.setSelectionIndex=function(n){this.setSelection([this.value()[n]])};ArrayCollectionBinding.prototype.value=function(){if(!this._value||this._value.length==0){if(this.pb){this._value=this.pb.get()}}if(!this._value){this._value=[]}else if(!Array.isArray(this._value)){this._value=[]}if(this.pb instanceof types_1.ViewBinding){if(this._evalue){return this._evalue}if(this._tvalue){this._evalue=this.expandValues(this._tvalue);return this._evalue}this._tvalue=this.postransform(this._value);this._evalue=this.expandValues(this._tvalue);return this._evalue}return this._value};ArrayCollectionBinding.prototype.originalValue=function(){return this.value()};ArrayCollectionBinding.prototype.workingCopy=function(){return this.value()};ArrayCollectionBinding.prototype.componentType=function(){return service.resolvedType(this._componentType)};ArrayCollectionBinding.prototype.refresh=function(){var _this=this;this._value=null;this._tvalue=null;this._evalue=null;this._levels=null;if(this.applyingSelection){return}var newSelection=[];var oldSelection=this.getSelection();this.workingCopy().forEach(function(x){if(newSelection.length>=oldSelection.length){return}if(oldSelection.indexOf(x)!=-1){newSelection.push(x)}else{var kp=service.keyProp(_this.componentType());if(kp){var vl=service.getValue(_this.componentType(),x,kp,_this.pb);for(var i=0;i<oldSelection.length;i++){var ov=service.getValue(_this.componentType(),oldSelection[i],kp,_this.pb);if(ov==vl){newSelection.push(x)}}}}});var c=this.changing;this.changing=true;try{if(!this.applyingSelection){var selection=this.getSelection();if(selection.length==0&&newSelection.length==0){return}this.setSelection(newSelection,false)}}finally{this.changing=c}};ArrayCollectionBinding.prototype.contains=function(v){if(this.value().indexOf(v)!=-1){return true}return false};ArrayCollectionBinding.prototype.add=function(v){this.value().push(v);this.fireAdd(v)};ArrayCollectionBinding.prototype.remove=function(v){var i=this.value().indexOf(v);if(i!=-1){this.value().splice(i,1)}this.fireRemove(v)};ArrayCollectionBinding.prototype.replace=function(oldValue,newValue){if(this.isSame(oldValue,newValue)){return}var i=this.value().indexOf(oldValue);if(i!=-1){this.value()[i]=newValue}this.fireReplace(oldValue,newValue)};return ArrayCollectionBinding}(AbstractCollectionBinding);exports.ArrayCollectionBinding=ArrayCollectionBinding;var MapCollectionBinding=function(_super){__extends(MapCollectionBinding,_super);function MapCollectionBinding(p){var _this=_super.call(this,p)||this;_this.value=p.get();if(!_this.value){_this.value={};if(!p.parent()||!p.parent().get()){p.set(_this.value)}}_this._componentType=p.type().componentType;var nn="Name";var nd="";var kn=p.type().keyName;if(kn){nn=kn}var kd=p.type().keyDescription;if(kd){nd=kd}var kt=types.TYPE_STRING;if(p.type().keyType){kt=p.type().keyType}var ts={id:"",type:types.TYPE_OBJECT,properties:{$key:{type:kt,required:true,displayName:nn,description:kd,unique:true,owningCollection:_this}},keyProp:"$key",displayName:pluralize.singular(p.type().displayName)};if(service.isObject(_this._componentType)){ts.type=_this._componentType}else{var vn=_this._componentType.displayName;ts.properties["$value"]={type:_this._componentType,required:true,displayName:vn}}_this._componentType=ts;return _this}MapCollectionBinding.prototype.workingCopy=function(){if(this.wcopy){return this.wcopy}var res=this.buildWC();this.wcopy=res;return res};MapCollectionBinding.prototype.buildWC=function(){var _this=this;var res=[];var sel=this.getSelection();if(this.value){var num=0;Object.keys(this.value).forEach(function(k){var rs=deepCopy(_this.value[k]);if(typeof rs=="object"){rs.$key=k;res.push(rs);rs.$entryId=k}else{rs={$key:k,$value:_this.value[k]};rs.$entryId=k;res.push(rs);console.log("New!!!")}num++})}else{this.value={}}res.forEach(function(x,i){x.$position=i});return res};MapCollectionBinding.prototype.originalValue=function(){return this.value};MapCollectionBinding.prototype.refresh=function(){if(this.applyingSelection){return}this.value=this.pb.get();if(!this.value){this.value={}}this.wcopy=this.buildWC();var selectionKeys=this.getSelection().map(function(x){return x.$key});var newSelection=[];this.wcopy.forEach(function(x){if(selectionKeys.indexOf(x.$key)!=-1){newSelection.push(x)}});var c=this.changing;console.log("Refreshing working copy:"+this.pb.id()+":"+JSON.stringify(this.pb.value)+":"+this.pb.uid()+":"+JSON.stringify(this.wcopy));this.changing=true;try{if(!this.applyingSelection){var selection=this.getSelection();if(selection.length==0&&newSelection.length==0){return}this.setSelection(newSelection,false)}}finally{this.changing=c}};MapCollectionBinding.prototype.contains=function(v){var key=v.$key;if(this.value){if(Object.keys(this.value).indexOf(key)!=-1){return true}return false}};MapCollectionBinding.prototype.componentType=function(){return service.resolvedType(this._componentType)};MapCollectionBinding.prototype.applyChangedElement=function(e){console.log("Applying:"+JSON.stringify(e));this.replace({$key:e.$entryId},e);if(e.$key){e.$entryId=e.$key}};MapCollectionBinding.prototype.add=function(v){this.workingCopy();this.wcopy.push(v);if(!v.$key){return}var val=deepCopy(v);if(v.$value){val=v.$value}this.value[v.$key]=val;delete val["$key"];this.fireAdd(v)};MapCollectionBinding.prototype.remove=function(v){if(v==null){return}this.workingCopy();this.wcopy=this.wcopy.filter(function(x){return x!==v});if(!v.$key){throw new Error("Removing object with no key")}delete this.value[v.$key];this.fireRemove(v)};MapCollectionBinding.prototype.setSelectionIndex=function(n){var vvv=this.workingCopy();this.setSelection([vvv[n]])};MapCollectionBinding.prototype.replace=function(oldValue,newValue){if(!oldValue.$key){return}if(!newValue.$key){this.fireReplace(oldValue,newValue);return}if(oldValue.$key!=newValue.$key&&this.value[newValue.$key]){this.fireReplace(oldValue,newValue);return}delete this.value[oldValue.$key];var val=deepCopy(newValue);if(val.$value){val=val.$value}this.value[newValue.$key]=val;delete val["$key"];delete val["$entryId"];delete val["$position"];this.fireReplace(oldValue,newValue)};return MapCollectionBinding}(AbstractCollectionBinding);exports.MapCollectionBinding=MapCollectionBinding},{"./collectionUtils":20,"./types":26,"./typesService":27,"./utils":28,pluralize:31}],20:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var tps=require("./types");var types_1=require("./types");function sort(vl,t,property,asc){if(vl){var pr=tps.service.property(t,property);if(pr){var rst=tps.service.resolvedType(pr.type);var res=vl.sort(function(x1,x2){var vl1=tps.service.getValueWithProp(t,x1,pr);var vl2=tps.service.getValueWithProp(t,x2,pr);return tps.service.compare(vl1,vl2,rst)});if(!asc){res=res.reverse()}return res}}return vl}exports.sort=sort;var FilteredCollection=function(){function FilteredCollection(){this.filters={};this.filterDescriptions={};this.filterTypes={}}FilteredCollection.prototype.setBase=function(base,t){this.base=base;this.type=t;this.updateFiltered()};FilteredCollection.prototype.set=function(t,v){if(v){if(Array.isArray(v)){if(v.length==0){v=null}else if(v.length==1){v=v[0]}}}if(!v){delete this.filters[t.id];this.updateFiltered();return}this.filters[t.id]=v;this.filterDescriptions[t.id]=t.filter;this.filterTypes[t.id]=t;this.updateFiltered()};FilteredCollection.prototype.get=function(){return this.filtered};FilteredCollection.prototype.updated=function(v){if(!this.isFiltered(v)){this.filtered=this.filtered.filter(function(z){return z!=v})}else{if(this.base.indexOf(v)!=-1){if(this.filtered.indexOf(v)==-1){this.filtered.push(v)}}}};FilteredCollection.prototype.updateFiltered=function(){var _this=this;this.filtered=this.base;Object.keys(this.filterDescriptions).forEach(function(x){if(_this.filters[x]){_this.filtered=filter(_this.filtered,_this.filters[x],_this.type,_this.filterDescriptions[x])}})};FilteredCollection.prototype.isFiltered=function(v){var _this=this;var filtered=true;Object.keys(this.filterDescriptions).forEach(function(x){if(_this.filters[x]){filtered=filtered&&isFiltered(_this.filtered,_this.filters[x],_this.type,_this.filterDescriptions[x])}});return filtered};return FilteredCollection}();exports.FilteredCollection=FilteredCollection;function isFiltered(x,filterVal,t,d){var bnd=tps.binding(null,t);var filterOp=d.op;if(!filterOp){filterOp="eq"}bnd.value=x;var vl=tps.calcExpression(d.property,bnd);if(filterOp=="eq"){var rs=vl==filterVal;if(!rs&&Array.isArray(vl)){rs=vl.indexOf(filterVal)!=-1;if(!rs){if(Array.isArray(filterVal)){var mm=true;filterVal.forEach(function(y){mm=mm&&vl.indexOf(y)!=-1});rs=mm}}}else if(!rs&&Array.isArray(filterVal)){var mm=true;filterVal.forEach(function(y){mm=mm&&vl.indexOf(y)!=-1});rs=mm}return rs}if(filterOp=="neq"){var rs=vl==filterVal;if(!rs&&Array.isArray(vl)){rs=vl.indexOf(filterVal)!=-1}return!rs}var pr=bnd.binding(d.property);if(filterOp=="gt"){return tps.service.compare(vl,filterVal,pr.type())>0}if(filterOp=="lt"){return tps.service.compare(vl,filterVal,pr.type())<0}if(filterOp=="ge"){return tps.service.compare(vl,filterVal,pr.type())>=0}if(filterOp=="le"){return tps.service.compare(vl,filterVal,pr.type())<=0}return false}exports.isFiltered=isFiltered;function filter(vl,filterVal,t,d){if(!d){return vl}if(d.property){return vl.filter(function(x){return isFiltered(x,filterVal,t,d)})}else{return vl}}exports.filter=filter;function groupVal(vl,property,t){return tps.service.getValue(t,vl,property,null)}var None={name:"None"};var GroupNode=function(_super){__extends(GroupNode,_super);function GroupNode(value,children,property,type){var _this=_super.call(this,type,value)||this;_this.value=value;_this.children=children;_this.property=property;_this.type=type;return _this}return GroupNode}(types_1.HasType);exports.GroupNode=GroupNode;function groupBy(vl,property,t){var values=new Map;if(vl){vl.forEach(function(x){var gv=groupVal(x,property,t);if(!gv){gv=None}var vals=[gv];if(Array.isArray(gv)){if(vals.length==0){vals=[None]}vals=gv}vals.forEach(function(v){v=JSON.stringify(v);if(values.has(v)){values.get(v).push(x)}else{var rs=[x];values.set(v,rs)}})});var result=[];var type=tps.service.property(t,property);var tp=type?type.type:tps.TYPE_ANY;if(tps.service.isArray(tp)){tp=tps.service.componentType(tp)}values.forEach(function(k,v){result.push(new GroupNode(JSON.parse(v),k,property,tp))});return result}else{return[]}}exports.groupBy=groupBy},{"./types":26}],21:[function(require,module,exports){"use strict";var types=require("./types");var proxyCache=new WeakMap;function proxy(tv,t,bnd){if(typeof tv!="object"){return tv}if(tv==null||tv==undefined){return null}if(Proxy){if(proxyCache.has(tv)){return proxyCache.get(tv)}var val=new Proxy(tv,{get:function(target,property,receiver){return types.service.getValue(t,target,property,bnd)},set:function(target,property,value,receiver){types.service.setValue(t,target,property,value,bnd);return true}});proxyCache.set(tv,val);return val}else{var rs={};types.service.allProperties(t).forEach(function(x){rs[x.id]=types.service.getValue(t,tv,x.id,bnd)});return rs}}exports.proxy=proxy;function resolver(v,val,t){if(!v){return null}if(!val){return null}if(val[v]){var p=types.service.property(t,v);return{value:val[v],type:p?p.type:types.TYPE_ANY}}var point=v.indexOf(".");if(point!=-1){var base=v.substr(0,point);var q=val[base];if(q){var p=types.service.property(t,base);return resolver(v.substring(point+1),q,p?p.type:types.TYPE_ANY)}return null}if(Array.isArray(val)){var p=types.service.property(types.service.componentType(t),v);if(p){var rs=val.map(function(x){return x[v]});return{value:rs,type:types.array(p.type)}}}return null}exports.resolver=resolver;function calcExpression(c,v,append){if(append===void 0){append=true}try{if(typeof c=="string"){var vv=c.charAt(0);var val=resolver(c,v.get(),v.type());if(val){return val.value}if(vv=="@"){var mm=v;return mm.lookupVar(c.substring(1))}try{var func=new Function("$value","$","context",append?"return "+c:c);var contextProxy=new Proxy(v,{get:function(target,property,receiver){return v.lookupVar(property)}})}catch(e){console.log(e);return e}return func.apply(proxy(v.get(),v.type(),v),[v,v.root().get(),contextProxy])}else{if(typeof c=="boolean"){return c}if(typeof c=="number"){return c}return c(v)}}catch(e){return e}}exports.calcExpression=calcExpression;function calcCondition(c,v){var val=calcExpression(c,v);if(val){return true}return false}exports.calcCondition=calcCondition},{"./types":26}],22:[function(require,module,exports){"use strict";var tps=require("./types");var ts=require("./typesService");var util_1=require("util");var types_1=require("./types");function interpolate(str,props,t){return str.replace(/\${((\w|\.)+)\}/g,function(match,expr){var rs=ts.resolver(expr,props,t);if(rs){return tps.service.label(rs.value,rs.type)}return props[expr]})}exports.interpolate=interpolate;function calculateLabel(label2,v,t){if(label2){if(typeof label2=="function"){return label2(v)}else{if(label2.indexOf("{")!=-1){return interpolate(label2,v,t)}else{var rs=v[label2];var ps=tps.service.property(t,label2);if(ps){return tps.service.label(rs,ps.type)}if(!rs){return label2}return rs}}}if(v&&typeof v=="object"){if(Array.isArray(v)){var ll=v;var it=t.itemType;return ll.map(function(x){return tps.service.label(x,it)}).join(",")}if(v.$key){return v.$key}if(v.name){return tps.service.getValue(t,v,"name")}else if(v.title){return tps.service.getValue(t,v,"title")}else if(v.label){return tps.service.getValue(t,v,"label")}return t.displayName}if(v){return""+v}if(util_1.isNullOrUndefined(v)){return""}if(isNaN(v)){return""}}exports.calculateLabel=calculateLabel;function canJoin(t1,t2){if(t1.image&&t2.image){return false}if(t1.class||t1.background||t1.color||t1.align||t1.action){return false}if(t2.class||t2.background||t2.color||t2.align||t2.action){return false}return true}exports.canJoin=canJoin;function join(t1,t2){if(t2.text){if(!t1.text){t1.text=t2.text}else{t1.text=t1.text+t2.text}t1.html=t1.html||t2.html}if(t2.image){t1.image=t2.image}return t1}exports.join=join;function appendConditionally(target,condition,element,b,replace,direction){if(direction===void 0){direction="hc"}if(!element){return target}if(!target){return element}if(replace){return element}if(condition){if(!tps.calcCondition(condition,b)){return target}}if(target.type=="comprehension"){var ll=target;if(ll.kind==direction){ll.parts.push(element);return ll}}if(target.type=="part"&&element.type=="part"){if(canJoin(target,element)){return join(target,element)}}var comprehension={type:"comprehension",parts:[],kind:direction};comprehension.parts.push(target);comprehension.parts.push(element);return comprehension}exports.appendConditionally=appendConditionally;function icon(vl,v,t){if(vl){var re=ts.resolver(vl,v,t);if(re){if(typeof re.value=="string"){return re.value}return tps.service.icon(re.value,re.type)}if(t.defaultIcon){return t.defaultIcon}return vl}}exports.icon=icon;function calcVal(vl,v,t){if(vl){var re=ts.resolver(vl,v,t);if(re){return re.value}else{if(vl.indexOf("${")!=-1){var ent=interpolate(vl,v,t);return ent}}return vl}return null}exports.calcVal=calcVal;function textComprehension(condition,label,image,b,alwaysLabel){if(alwaysLabel===void 0){alwaysLabel=true}if(condition){if(!tps.calcCondition(condition,b)){return null}}var result={type:"part"};if(label||alwaysLabel){result.text=calculateLabel(label,b.get(),b.type())}if(image){result.image=icon(image,b.get(),b.type())}if(!result.text&&!result.image){return null}return result}exports.textComprehension=textComprehension;function update(t,d,b){if(!t){return null}if(d.class){t.class=d.class}if(d.background){t.background=calcVal(d.background,b.get(),b.type())}if(d.color){t.color=calcVal(d.color,b.get(),b.type())}if(d.align){t.align=d.align}
if(d.action){t.action=d.action}if(d.itemTransform){var fld=d.details;if(!fld){fld=d.title}if(!fld){fld=d.status}if(fld){var bnd=b.binding(fld);var val=b.get(fld);if(!val){val=[]}if(!Array.isArray(val)){val=[val]}var ct=tps.service.componentType(bnd.type());var parts=[];val.forEach(function(x){var z=new types_1.Binding("");z.value=x;z._type=ct;var layout=calculateLayout(z,d.itemTransform);parts.push(layout)});return{type:"comprehension",kind:"hc",parts:parts}}}return t}function calculateLayout(b,decs){var t=b.type();var icon=t.icon;var label=t.label;var html=t.htmlLabel;var rs=textComprehension(null,label,icon,b);if(rs){rs.html=true}var decorators=t.labelDecorators;if(decs){if(!decorators){decorators={}}else{var vd={};Object.keys(decorators).forEach(function(x){vd[x]=decorators[x]});decorators=vd}decorators["main"]=decs}var details=null;var status=null;if(decorators){Object.keys(decorators).forEach(function(x){var comprehension=null;var decorator=decorators[x];if(decorator.when){if(!tps.calcCondition(decorator.when,b)){return}}if(decorator.details){comprehension=textComprehension(null,decorator.details,decorator.image,b,false);comprehension=update(comprehension,decorator,b);if(comprehension){comprehension.role="details"}if(!details){details=comprehension}else{details=appendConditionally(details,null,comprehension,b,decorator.replace)}}if(decorator.status){comprehension=textComprehension(null,decorator.status,decorator.image,b,false);if(comprehension){comprehension.role="status"}comprehension=update(comprehension,decorator,b);if(!status){status=comprehension}else{status=appendConditionally(details,null,comprehension,b,decorator.replace)}}if(decorator.title){comprehension=textComprehension(null,decorator.title,decorator.image,b,false);if(comprehension){comprehension.role="title"}comprehension=update(comprehension,decorator,b);rs=appendConditionally(rs,null,comprehension,b,decorator.replace)}})}if(status){status.role="status";status.align="right";rs={parts:[rs,status],type:"comprehension",kind:"hc"}}if(details){details.role="details";rs={parts:[rs,details],type:"comprehension",kind:"vc"}}return rs}exports.calculateLayout=calculateLayout;var DecoratorsManager=function(){function DecoratorsManager(){this.decorators=new Map}return DecoratorsManager}()},{"./types":26,"./typesService":27,util:43}],23:[function(require,module,exports){"use strict";var ObjectRecord=function(){function ObjectRecord(){this.listeners=[]}return ObjectRecord}();exports.ObjectRecord=ObjectRecord;var ObjectChangeManager=function(){function ObjectChangeManager(){this.map=new Map;this.observers=[]}ObjectChangeManager.prototype.addListener=function(object,l){var record=this.entry(object);record.listeners.push(l)};ObjectChangeManager.prototype.removeListener=function(object,l){var record=this.entry(object);record.listeners=record.listeners.filter(function(x){return x!=object})};ObjectChangeManager.prototype.addSetObserver=function(object,l){this.observers.push(object)};ObjectChangeManager.prototype.removeSetObserver=function(object,l){var record=this.entry(object);this.observers=this.observers.filter(function(x){return x!=object})};ObjectChangeManager.prototype.fire=function(c){if(!c.target){return}var tr=this.entry(c.target);tr.listeners.forEach(function(x){return x.valueChanged(c)});this.observers.forEach(function(o){if(o.has(c)){o.valueChanged(c)}})};ObjectChangeManager.prototype.entry=function(obj){if(this.map.has(obj)){return this.map.get(obj)}var result=new ObjectRecord;if(typeof obj=="object"){this.map.set(obj,result)}return result};return ObjectChangeManager}();exports.ObjectChangeManager=ObjectChangeManager;exports.INSTANCE=new ObjectChangeManager},{}],24:[function(require,module,exports){"use strict"},{}],25:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var types=require("./types");var cb=require("./collectionBindings");var request=require("superagent");var util_1=require("util");var types_1=require("./types");var ParameterLocation;(function(ParameterLocation){ParameterLocation[ParameterLocation["URL"]=0]="URL";ParameterLocation[ParameterLocation["QUERY"]=1]="QUERY";ParameterLocation[ParameterLocation["HEADER"]=2]="HEADER";ParameterLocation[ParameterLocation["BODY"]=3]="BODY";ParameterLocation[ParameterLocation["FORM"]=4]="FORM"})(ParameterLocation=exports.ParameterLocation||(exports.ParameterLocation={}));var isBrowser=typeof window!=="undefined";var BasicThenable=function(){function BasicThenable(){}BasicThenable.prototype.then=function(f){this.cb=f};return BasicThenable}();var AllThenable=function(_super){__extends(AllThenable,_super);function AllThenable(all){var _this=_super.call(this)||this;_this.all=all;_this.map=new Map;all.forEach(function(x){return x.then(function(e,v,extra){_this.map.set(x,[e,v,extra]);if(_this.map.size==all.length){var result=[];var error=null;_this.map.forEach(function(v,k){var m=v;result.push([k,v[1]]);if(v[0]){error=v}});_this.cb(error,result,null)}})});return _this}return AllThenable}(BasicThenable);function all(b){return new AllThenable(b)}function parameterize(r,name,v){var rs={url:r.url,method:r.method,parameters:r.parameters.map(function(x){if(x.name==name){return{name:x.name,location:x.location,value:v}}else{return x}})};return rs}function getLocation(v){if(v=="query"){return ParameterLocation.QUERY}else if(v=="uri"){return ParameterLocation.URL}else if(v=="headers"){return ParameterLocation.HEADER}else if(v==="body"){return ParameterLocation.BODY}}function parameterizeBinding(r,b){var rs={url:r.url,method:r.method,parameters:r.parameters.concat(b.map(function(x){var val=x.get();if(x.type().collectionFormat){if(Array.isArray(val)&&x.type().collectionFormat=="csv"){val=val.join(",")}}return{name:x._id,location:getLocation(x.type().location),value:val}}))};return rs}function linkHeadersParser(lp){lp=lp.substring(1);var headers=lp.split('", <');return headers.map(function(x){var ri=x.lastIndexOf(";");var link=x.substring(0,ri-1);var rel=x.substring(x.lastIndexOf("=")+2);return{link:link,rel:rel}})}exports.linkHeadersParser=linkHeadersParser;var RequestExecutor=function(){function RequestExecutor(){}RequestExecutor.prototype.execute=function(r){var url=r.url;r.parameters.forEach(function(x){if(x.location==ParameterLocation.URL){var pm="{"+x.name+"}";var i=url.indexOf(pm);if(i!=-1){var c=x.value;if(!c){c=""}url=url.substring(0,i)+c+url.substring(i+pm.length)}}});var rr=request(r.method.toUpperCase(),url);r.parameters.forEach(function(x){if(x.location==ParameterLocation.QUERY){var c={};if(x.value){c[x.name]=x.value;rr=rr.query(c)}}if(x.location==ParameterLocation.HEADER){if(x.value){rr=rr.set(x.name,x.value)}}if(x.location==ParameterLocation.BODY){if(x.value){rr=rr.send(x.value)}}});if(r.auth){rr.auth(r.auth.user,r.auth.password)}rr=rr.query({$timestamp:""+(new Date).getMilliseconds()});var result=new BasicThenable;rr.end(function(err,res){if(res){var body=res.body;if(result.cb){result.cb(err,body,res)}}else{if(result.cb){result.cb(err,null,{})}}});return result};return RequestExecutor}();var OperationInfo=function(){function OperationInfo(t){var req={method:t.method?t.method.toUpperCase():"GET",url:t.location,parameters:[]};if(!req.url){if(t.url&&t.baseUri){req.url=t.baseUri+t.url.substring(1)}}this.template=req}return OperationInfo}();var PagedCollectionInfo=function(_super){__extends(PagedCollectionInfo,_super);function PagedCollectionInfo(t){var _this=_super.call(this,t)||this;_this.pageParameterName=t.pageNumberPointer;_this.totalValueField=t.total;_this.itemsValueField=t.results;_this.pagesStartFromZero=t.pagesStartFromZero;_this.errorMessage=t.errorIn;var method=t.method;var pb=t.basicPaging;if(pb){_this.totalValueField=pb.total;_this.itemsValueField=pb.results;_this.offsetField=pb.offset;_this.pageParameterName=pb.page}if(!t.errorIn){_this.errorMessage=t.errorMessageIn}var req={method:method?method.toUpperCase():"GET",url:t.location,parameters:[{location:ParameterLocation.QUERY,name:_this.pageParameterName,value:null}]};if(_this.offsetField){var req={method:method?method.toUpperCase():"GET",url:t.location,parameters:[{location:ParameterLocation.QUERY,name:_this.offsetField,value:null}]}}if(!req.url){if(t.url&&t.baseUri){req.url=t.baseUri+t.url.substring(1)}}_this.template=req;return _this}PagedCollectionInfo.prototype.getPage=function(num,itemsPerPage,pbnds){if(pbnds===void 0){pbnds=[]}if(!this.pagesStartFromZero){num=num+1}var withPage=null;if(this.offsetField){withPage=parameterize(this.template,this.offsetField,(num-1)*itemsPerPage)}else{withPage=parameterize(this.template,this.pageParameterName,num)}if(itemsPerPage&&this.itemsPerPageParameterName){withPage=parameterize(withPage,this.itemsPerPageParameterName,itemsPerPage)}withPage=parameterizeBinding(withPage,pbnds);return withPage};return PagedCollectionInfo}(OperationInfo);exports.authServiceHolder={service:null};function setAuthServive(c){exports.authServiceHolder.service=c}exports.setAuthServive=setAuthServive;var RESTAccessControl=function(_super){__extends(RESTAccessControl,_super);function RESTAccessControl(){return _super.apply(this,arguments)||this}RESTAccessControl.prototype.needsAuthentification=function(){var tp=this.binding.type();if(exports.authServiceHolder.service){return exports.authServiceHolder.service.needsAuth(this.binding)}if(needsAuthentification(tp)){return true}return false};RESTAccessControl.prototype.supportsAdd=function(){return this.binding.addOperation()!=null};RESTAccessControl.prototype.supportsRemove=function(){return this.binding.removeOperation()!=null};RESTAccessControl.prototype.supportsUpdate=function(){return this.binding.updateOperation()!=null};RESTAccessControl.prototype.canEditSelf=function(){return this.supportsUpdate()};RESTAccessControl.prototype.canAddItem=function(t){return true};RESTAccessControl.prototype.canRemoveItem=function(t){return true};RESTAccessControl.prototype.canEditItem=function(t){return this.binding.updateOperation()!=null};return RESTAccessControl}(types.DefaultAccessControl);exports.RESTAccessControl=RESTAccessControl;var PagedCollection=function(_super){__extends(PagedCollection,_super);function PagedCollection(){return _super.apply(this,arguments)||this}return PagedCollection}(types.ViewBinding);exports.PagedCollection=PagedCollection;function needsAuthentification(ts){if(ts.securedBy){if(ts.securedBy.length>0){return ts.securedBy[0]}}}var UpdatingArrayBinding=function(_super){__extends(UpdatingArrayBinding,_super);function UpdatingArrayBinding(p){var _this=_super.call(this,p)||this;_this.p=p;_this.updater=p.updateOperation();return _this}UpdatingArrayBinding.prototype.createSelectionBinding=function(){var selBind=_super.prototype.createSelectionBinding.call(this);selBind._autoCommit=false;return selBind};UpdatingArrayBinding.prototype.replace=function(oldValue,newValue){var _this=this;_super.prototype.replace.call(this,oldValue,newValue);var toUpdate=new types.OperationBinding(this.updater,this.pb);var bb=new types_1.Binding("context");bb.set(oldValue);bb._type=this.componentType();toUpdate.context=bb;this.p.lastRevision++;var ll=this.p.lastRevision;toUpdate.set(newValue);toUpdate.execute(function(x){if(_this.p.lastRevision==ll){_this.p.request()}})};UpdatingArrayBinding.prototype.postApplySelection=function(){};UpdatingArrayBinding.prototype.applyChangedElement=function(e){this.replace(e,e)};return UpdatingArrayBinding}(cb.ArrayCollectionBinding);exports.UpdatingArrayBinding=UpdatingArrayBinding;function getQueryVariable(query,variable){query=query.substring(query.indexOf("?")+1);var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(decodeURIComponent(pair[0])==variable){return decodeURIComponent(pair[1])}}return null}exports.RESULTS_TO_DOWNLOAD=600;var BasicPagedCollection=function(_super){__extends(BasicPagedCollection,_super);function BasicPagedCollection(id,t,g){var _this=_super.call(this,id)||this;_this.g=g;_this.executor=new RequestExecutor;_this.itemsPerPage=0;_this.currentPageNum=0;_this.lastRevision=0;_this._canSortLocally=false;_this._pageCount=-1;_this.info=new PagedCollectionInfo(t);_this._type=t;var cp=types.service.componentType(t);var constructors=types.service.constructors(cp);if(constructors.length>0){_this.adder=constructors[0]}var updaters=types.service.updaters(cp);if(updaters.length>0){_this.updater=updaters[0]}if(!_this.info.template.url){if(g.get()){_this.info.template.url=g.get()[id]}_this.dynamicUrl=true}return _this}BasicPagedCollection.prototype.request=function(){this.requestPage(this.currentPageNum)};BasicPagedCollection.prototype.addOperation=function(){return this.adder};BasicPagedCollection.prototype.removeOperation=function(){return this.remover};BasicPagedCollection.prototype.updateOperation=function(){return this.updater};BasicPagedCollection.prototype.accessControl=function(){return new RESTAccessControl(this)};BasicPagedCollection.prototype.innerParametersChanged=function(){this.currentPageNum=0;_super.prototype.innerParametersChanged.call(this)};BasicPagedCollection.prototype.all=function(){return this.collectionBinding().workingCopy()};BasicPagedCollection.prototype.refresh=function(){if(this.dynamicUrl&&this.g.get()){var vs=this.g.get()[this.id()];if(vs!=this.info.template.url){this.info.template.url=vs;this.value=null;this.changed()}}};BasicPagedCollection.prototype.createCollectionBinding=function(){if(this.updater){return new UpdatingArrayBinding(this)}return _super.prototype.createCollectionBinding.call(this)};BasicPagedCollection.prototype.total=function(){return this.totalResults};BasicPagedCollection.prototype.changed=function(){this.listeners.forEach(function(x){return x.valueChanged(null)})};BasicPagedCollection.prototype.isLoading=function(){if(this.info.template.url){return this._isLoading}return false};BasicPagedCollection.prototype.hasResults=function(){return!util_1.isNullOrUndefined(this.value)};BasicPagedCollection.prototype.errorMessage=function(){var ps=this.parameterStatus().valid;if(!ps){return this.parameterStatus().message}return this._errorMessage};BasicPagedCollection.prototype.isError=function(){return this.error};BasicPagedCollection.prototype.canRetry=function(){return this.parameterStatus().valid};BasicPagedCollection.prototype.clearError=function(){this.error=false;this.value=null;this.authError=false;this.changed()};BasicPagedCollection.prototype.errorKind=function(){if(this.authError){return"auth"}return null};BasicPagedCollection.prototype.hasAllData=function(){return this._canSortLocally};BasicPagedCollection.prototype.requestPage=function(num){var _this=this;if(!this._isLoading){this._isLoading=true;this.currentPageNum=num;this.changed()}var lr=this.info.getPage(num,this.itemsPerPage,this.allParameterBindings());if(exports.authServiceHolder.service){lr=exports.authServiceHolder.service.patchRequest(this,lr)}var q=this.lastRevision;this.executor.execute(lr).then(function(err,x,extra){if(_this.lastRevision!=q){return}if(err){if(err.status==401||err.status==403){_this.authError=true;exports.authServiceHolder.service.authError(_this,lr)}_this.error=true;if(err.status){_this._errorMessage=err.status+" "+err.message}if(_this.info.errorMessage){if(x){_this._errorMessage=x[_this.info.errorMessage]}}_this._isLoading=false;_this.changed();return}if(_this.info.itemsValueField){_this.value=x[_this.info.itemsValueField]}else{_this.value=x}_this._pageCount=-1;if(_this.info.totalValueField){_this.totalResults=x[_this.info.totalValueField]}else{if(extra.links){var lastUrl=extra.links.last;var firstUrl=extra.links.first;if(lastUrl){var maxPage=getQueryVariable(lastUrl,_this.info.pageParameterName);if(maxPage){_this._pageCount=parseInt(maxPage);_this.totalResults=-1}}else if(firstUrl){_this._pageCount=_this.currentPageNum+1;_this.totalResults=-1}else{_this.totalResults=_this.value.length}}else{_this.totalResults=_this.value.length}}if(_this.itemsPerPage==0){_this.itemsPerPage=_this.value.length}if(_this.shouldGetAll()){_this.requestAll().then(function(e,v){if(!e){_this.value=v;_this.totalResults=v.length;_this._isLoading=false;_this._canSortLocally=true;if(_this._cb){_this._cb.refresh()}_this.changed()}});_this._canSortLocally=false;_this.totalResults=_this.value.length}else{if(_this.pageCount()==1||_this.value&&_this.totalResults==_this.value.length){_this._canSortLocally=true}else{_this._canSortLocally=false}}if(_this._cb){_this._cb.refresh()}_this._isLoading=false;_this.changed()})};BasicPagedCollection.prototype.shouldGetAll=function(){if(this.collectionBinding().groupBy()||this._pageCount>1&&this.value.length*this._pageCount<exports.RESULTS_TO_DOWNLOAD||this.totalResults>0&&this.value&&this.totalResults!=this.value.length&&this.totalResults<exports.RESULTS_TO_DOWNLOAD){return true}return false};BasicPagedCollection.prototype.requestAll=function(){var _this=this;var components=[];var thenableResults=[];for(var i=0;i<this.pageCount();i++){var lr=this.info.getPage(i,this.itemsPerPage,this.allParameterBindings());if(exports.authServiceHolder.service){lr=exports.authServiceHolder.service.patchRequest(this,lr)}var ir=this.executor.execute(lr);ir.index=i;components.push(ir)}var allReady=new BasicThenable;all(components).then(function(e,v){var x=v;x.forEach(function(val){var vv=val[1];if(_this.info.itemsValueField){vv=vv[_this.info.itemsValueField]}thenableResults[val[0].index]=vv});var allResults=[];thenableResults.forEach(function(r){allResults=allResults.concat(r)});if(allReady.cb){allReady.cb(null,allResults,null)}});return allReady};BasicPagedCollection.prototype.get=function(){if(!this.info.template.url){return[]}if(!this.parameterStatus().valid){this.error=true;return[]}if(this.accessControl().needsAuthentification()){return[]}if(this.error){return[]}if(this.value){return this.value}if(this._isLoading){return[]}this.requestPage(this.currentPageNum)};BasicPagedCollection.prototype.set=function(v){};BasicPagedCollection.prototype.pageNum=function(){return this.currentPageNum};BasicPagedCollection.prototype.pageCount=function(){if(this._pageCount!=-1){return this._pageCount}if(this.totalResults){var vl=this.totalResults/this.itemsPerPage;if(this.totalResults%this.itemsPerPage!=0){return vl+1}return vl}return 0};return BasicPagedCollection}(PagedCollection);exports.BasicPagedCollection=BasicPagedCollection;types.service.registerExecutor("rest",{executeOperation:function(o,parameters,cb){var opInfo=new OperationInfo(o);o.parameters.forEach(function(x){if(parameters[x.id]){var l=ParameterLocation.QUERY;if(x.location=="body"){l=ParameterLocation.BODY}if(x.location=="header"){l=ParameterLocation.HEADER}if(x.location=="uri"){l=ParameterLocation.URL}opInfo.template.parameters.push({location:l,name:x.id,value:parameters[x.id]})}});var template=opInfo.template;var cm=new types_1.Binding(o.id);cm._type=o;if(exports.authServiceHolder.service){template=exports.authServiceHolder.service.patchRequest(cm,template)}(new RequestExecutor).execute(template).then(function(err,x){if(err){}cb(x)})}});if(isBrowser){var JSONP=function(global){var id=0,ns="MediaWikiJS",prefix="__JSONP__",document=global.document,documentElement=document.documentElement;return function(uri,callback){var src=prefix+id++,script=document.createElement("script"),JSONPResponse=function(){try{delete global[ns+"_"+src]}catch(e){global[ns+"_"+src]=null}documentElement.removeChild(script);callback.apply(this,arguments)};window[ns+"_"+src]=JSONPResponse;documentElement.insertBefore(script,documentElement.lastChild).src=uri+(uri.indexOf("?")>-1?"&":"?")+"callback="+ns+"_"+src}}(window)}var cache={};var RemoteValueBinding=function(_super){__extends(RemoteValueBinding,_super);function RemoteValueBinding(){var _this=_super.apply(this,arguments)||this;_this.executor=new RequestExecutor;return _this}RemoteValueBinding.prototype.refresh=function(){this.buildRequest();_super.prototype.refresh.call(this)};RemoteValueBinding.prototype.buildRequest=function(){var _this=this;var url=this.parent().get("wikiURL");if(url){var title=url.substring(url.lastIndexOf("/")+1);if(title){var url="https://en.wikipedia.org/w/api.php/?format=json&action=query&prop=extracts&exintro=&explaintext=&titles="+title;if(this.url==url){return}if(cache[url]){this.url=url;this.cval=cache[url];return}this.loading=true;JSONP(url,function(x){var kk=Object.keys(x.query.pages)[0];_this.cval=x.query.pages[kk].extract;_this.url=url;cache[url]=_this.cval;_this.loading=false;_this.changed()})}}};RemoteValueBinding.prototype.isLoading=function(){return this.loading};RemoteValueBinding.prototype.get=function(){this.buildRequest();return this.cval};return RemoteValueBinding}(types_1.Binding);exports.RemoteValueBinding=RemoteValueBinding},{"./collectionBindings":19,"./types":26,superagent:32,util:43}],26:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};exports.metakeys=require("./metaKeys");exports.manager=require("./manager");exports.ts=require("./typesService");var moments=require("moment");exports.service=exports.ts.INSTANCE;exports.utils=require("./utils");exports.decorators=require("./decorators");exports.TYPE_ANY={id:"any"};exports.TYPE_UNION={id:"union"};exports.TYPE_SCALAR={id:"scalar",type:exports.TYPE_ANY};exports.TYPE_STRING={id:"string",type:exports.TYPE_SCALAR};exports.TYPE_NUMBER={id:"number",type:exports.TYPE_SCALAR};exports.TYPE_INTEGER={id:"integer",type:exports.TYPE_NUMBER};exports.TYPE_OPERATION={id:"operation",type:exports.TYPE_ANY};exports.TYPE_ACTION={id:"action",type:exports.TYPE_OPERATION};exports.TYPE_DATE={id:"date",type:exports.TYPE_SCALAR,label:function(v){var m=moments(v);var vl=m.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"MM/DD/YYYY"});if(vl=="Today"){return m.fromNow()}return vl}};exports.TYPE_PASSWORD={id:"password",type:exports.TYPE_STRING};exports.TYPE_DATETIME={id:"datetime",type:exports.TYPE_DATE};exports.TYPE_DATEONLY={id:"date-only",type:exports.TYPE_DATE};exports.TYPE_URL={id:"url",type:"string"};exports.TYPE_HTMLURL={id:"htmlUrl",type:"url"};exports.TYPE_LINK={id:"link",type:"url"};exports.TYPE_HTML={id:"html",type:"text"};exports.TYPE_IMAGEURL={id:"imageUrl",type:"url"};exports.TYPE_BOOLEAN={id:"boolean",type:exports.TYPE_SCALAR};exports.TYPE_NULL={id:"null",type:exports.TYPE_SCALAR};exports.TYPE_OBJECT={id:"object"};exports.TYPE_ARRAY={id:"array"};exports.TYPE_MAP={id:"map"};exports.TYPE_RELATION={id:"relation",type:exports.TYPE_ARRAY};exports.TYPE_VIEW={id:"view",type:exports.TYPE_ARRAY};exports.TYPE_TEXT={id:"text",type:"string",multiline:true};exports.TYPE_MARKDOWN={id:"markdown",type:exports.TYPE_TEXT,needsOwnGroup:true};exports.TYPE_CODE={id:"code",type:exports.TYPE_TEXT,needsOwnGroup:true};var isBrowser=typeof window!=="undefined";if(isBrowser){window.moments=moments}exports.TYPE_DATE.compareFunction=function(x0,x1){if(x0&&x1){var d0=new Date(x0);var d1=new Date(x1);return d0.getTime()-d1.getTime()}if(x0){return 1}return-1};exports.TYPE_NUMBER.compareFunction=function(x0,x1){if(x0&&x1){return x0-x1}if(x0){return 1}return-1};function declareMeta(t,v){Object.keys(v).forEach(function(k){return t[k]=v[k]})}exports.declareMeta=declareMeta;function copy(t){var ttt=exports.service.resolvedType(t);var result={id:null,type:null};Object.keys(ttt).forEach(function(x){return result[x]=ttt[x]});delete result.$resolved;return result}exports.copy=copy;var HasType=function(){function HasType($type,$value){this.$type=$type;this.$value=$value}return HasType}();exports.HasType=HasType;function array(t){return{id:t.id+"[]",type:exports.TYPE_ARRAY,itemType:t}}exports.array=array;function map(t){return{id:t.id+"*",type:exports.TYPE_MAP,componentType:t,keyType:exports.TYPE_STRING}}exports.map=map;var Severity;(function(Severity){Severity[Severity["OK"]=0]="OK";Severity[Severity["WARNING"]=1]="WARNING";Severity[Severity["ERROR"]=2]="ERROR"})(Severity=exports.Severity||(exports.Severity={}));var ListenableValue=function(){function ListenableValue(){this.listeners=[]}ListenableValue.prototype.fireEvent=function(c){this.listeners.forEach(function(x){return x.valueChanged(c)})};ListenableValue.prototype.addListener=function(v){if(typeof v=="function"){this.listeners.push({valueChanged:function(e){v(e)}})}else{this.listeners.push(v)}};ListenableValue.prototype.removeListener=function(v){this.listeners=this.listeners.filter(function(x){return x!=v})};return ListenableValue}();exports.ListenableValue=ListenableValue;var DefaultAccessControl=function(){function DefaultAccessControl(binding){this.binding=binding}DefaultAccessControl.prototype.needsAuthentification=function(){return false};DefaultAccessControl.prototype.supportsAdd=function(){return this.isEditable()};DefaultAccessControl.prototype.isEditable=function(){if(this.binding.readonly){return false}if(this.binding.parent()){if(!this.binding.parent().accessControl().canEditChildren()){return false}}return!this.binding.type().readonly};DefaultAccessControl.prototype.canEditChildren=function(){if(this.binding.parent()){if(!this.binding.parent().accessControl().canEditChildren()){return false}}if(this.binding.immutable){return false}if(this.binding.type().immutable){return false}return true};DefaultAccessControl.prototype.supportsUpdate=function(){return this.isEditable()};DefaultAccessControl.prototype.supportsRemove=function(){return this.isEditable()};DefaultAccessControl.prototype.canEditSelf=function(){return this.isEditable()};DefaultAccessControl.prototype.canAddItem=function(t){return this.isEditable()};DefaultAccessControl.prototype.canRemoveItem=function(t){return this.isEditable()};DefaultAccessControl.prototype.canEditItem=function(t){return this.isEditable()};return DefaultAccessControl}();exports.DefaultAccessControl=DefaultAccessControl;var AbstractBinding=function(_super){__extends(AbstractBinding,_super);function AbstractBinding(){var _this=_super.apply(this,arguments)||this;_this._bnds={};_this._uid=buid++;return _this}AbstractBinding.prototype.lookupVar=function(v){return null};AbstractBinding.prototype.errorKind=function(){return null};AbstractBinding.prototype.addOperation=function(){return null};AbstractBinding.prototype.enumeratedValues=function(){return null};AbstractBinding.prototype.removeOperation=function(){return null};AbstractBinding.prototype.updateOperation=function(){return null};AbstractBinding.prototype.accessControl=function(){if(this._acccessor){return this._acccessor}return new DefaultAccessControl(this)};AbstractBinding.prototype.clearError=function(){};AbstractBinding.prototype.isLoading=function(){return false};AbstractBinding.prototype.isError=function(){return false};AbstractBinding.prototype.canRetry=function(){return false};AbstractBinding.prototype.errorMessage=function(){return null};AbstractBinding.prototype.autoCommit=function(){return true};AbstractBinding.prototype.status=function(){if(this._status){return this._status}};AbstractBinding.prototype.collectionBinding=function(){if(this._cb){return this._cb}this._cb=this.createCollectionBinding();return this._cb};AbstractBinding.prototype.path=function(){if(this.parent()){var ps=this.parent().path();if(ps){return ps+"."+this.id()}return this.id()}return""};AbstractBinding.prototype.type=function(){if(this._type){return exports.service.resolvedType(this._type)}return exports.TYPE_ANY};AbstractBinding.prototype.add=function(v){this.collectionBinding().add(v)};AbstractBinding.prototype.remove=function(v){this.collectionBinding().remove(v)};AbstractBinding.prototype.replace=function(oldValue,newValue){this.collectionBinding().replace(oldValue,newValue)};AbstractBinding.prototype.uid=function(){return this._uid};AbstractBinding.prototype.binding=function(p){return null};AbstractBinding.prototype.parent=function(){return this._parent};AbstractBinding.prototype.root=function(){if(this.parent()){return this.parent().root()}return this};AbstractBinding.prototype.innerBnds=function(){return this._bnds};return AbstractBinding}(ListenableValue);exports.AbstractBinding=AbstractBinding;var KeyBinding=function(_super){__extends(KeyBinding,_super);function KeyBinding(p){var _this=_super.call(this)||this;_this._parent=p;_this._type=exports.TYPE_STRING;return _this}KeyBinding.prototype.createCollectionBinding=function(){throw new Error("Key binding can not be viewed as collection")};KeyBinding.prototype.refresh=function(){};KeyBinding.prototype.get=function(){var _this=this;var res=null;Object.keys(this._parent._parent.value).forEach(function(k){if(_this._parent._parent.value[k]===_this._parent.value){res=k}});return res};KeyBinding.prototype.set=function(v){var _this=this;var res=null;Object.keys(this._parent._parent.value).forEach(function(k){if(_this._parent._parent.value[k]===_this._parent.value){res=k}});var ev={kind:"change",source:this,oldValue:res,newValue:v,target:this._parent?this._parent.get():null};if(res){delete this._parent._parent.value[res];this._parent._parent.value[v]=this._parent.value}delete this._parent._parent.innerBnds()[res];this._parent.id=v;this._parent._parent.innerBnds()[v]=this._parent;this.fireEvent(ev);return res};KeyBinding.prototype.id=function(){return"$key"};KeyBinding.prototype.binding=function(p){return null};return KeyBinding}(AbstractBinding);exports.enumOptions=function(type,b){if(!type){return[]}var enumv=type.enum;if(!enumv){var enumF=type.enumValues;enumv=exports.calcExpression(enumF,b);if(!Array.isArray(enumv)){if(typeof enumv=="object"){enumv=Object.keys(enumv)}}}if(!enumv){enumv=[]}var result=[];return enumv};var buid=0;var Binding=function(_super){__extends(Binding,_super);function Binding(n){var _this=_super.call(this)||this;_this.variables={};_this.autoinit=true;_this._autoCommit=true;_this.preCommitListeners=[];_this.beforeChangeListeners=[];_this.changing=false;_this.rc=0;_this.refreshing=false;_this._id=n;return _this}Binding.prototype.autoCommit=function(){return this._autoCommit};Binding.prototype.type=function(){if(this.value instanceof HasType){return exports.service.resolvedType(this.value.$type)}return _super.prototype.type.call(this)};Binding.prototype.addVar=function(name,value){this.variables[name]=value};Binding.prototype.addPrecomitListener=function(i){this.preCommitListeners.push(i)};Binding.prototype.removePrecomitListener=function(i){this.preCommitListeners=this.preCommitListeners.filter(function(x){return x!=i})};Binding.prototype.get=function(p){if(p){return this.binding(p).get()}if(this._parent&&this._id){var mm=exports.service.getValue(this._parent.type(),this._parent.value,this._id,this._parent);if(mm!=this.value){this.value=mm;var v=this.autoinit;this.inGet=true;if(exports.service.isArray(this.type())||exports.service.isMap(this.type())){this._cb=this.createCollectionBinding()}this.inGet=false}return mm}if(this.value instanceof HasType){return this.value.$value}return this.value};Binding.prototype.createCollectionBinding=function(){if(this.type().componentType){return new cb.MapCollectionBinding(this)}if(this.type().itemType){return new cb.ArrayCollectionBinding(this)}throw new Error("Collection bindings may be only used with map or array types")};Binding.prototype.set=function(v){if(this.readonly){return}if(v){if(exports.service.isNumber(this.type())){if(typeof v!="number"){if(exports.service.isInteger(this.type())){v=parseInt(v)}else{v=parseFloat(v)}}}if(exports.service.isArray(this.type())){if(!Array.isArray(v)){v=[v]}}}else{if(exports.service.isNumber(this.type())){if(v==""){v=null}}}if(Array.isArray(v)){if(!exports.service.isArray(this.type())){if(v.length==1){v=v[0]}if(v.length==0){v=null}}}if(v==this.value){if(v){if(typeof v!="object"){return}}else{
return}}if(Array.isArray(v)){if(v.length==0){if(Array.isArray(this.value)){if(this.value.length==0){return}}}}var c=this.value;var ev={kind:"change",source:this,oldValue:c,newValue:v,target:this._parent?this._parent.get():null};this.beforeChange(ev);if(this._parent&&this.id){var s=this._parent.get();if(!s){s={};if(this._parent.autoinit){this._parent.set(s)}}exports.service.setValue(this.type(),s,this._id,v,this)}this.value=v;if(!this.inGet){this.changing=true;exports.manager.INSTANCE.fire(ev);this.fireUp(ev);this.changing=false}};Binding.prototype.beforeChange=function(e){this.beforeChangeListeners.forEach(function(x){return x.valueChanged(e)});if(this._parent){this._parent.beforeChange(e)}};Binding.prototype.getLastEvent=function(){return this.lastEvent};Binding.prototype.fireUp=function(ev){this.lastEvent=ev;if(this._parent){this._parent.fireUp(ev)}else{this.refresh()}};Binding.prototype.changed=function(){var ev={kind:"change",source:this,oldValue:this.value,newValue:this.value,target:this._parent?this._parent.get():null};exports.manager.INSTANCE.fire(ev);this.fireUp(ev)};Binding.prototype.refreshChildren=function(){var _this=this;Object.keys(this._bnds).forEach(function(k){_this._bnds[k].refresh()});if(this._cb){this._cb.refresh()}};Binding.prototype.refresh=function(){if(this.refreshing){return}this.refreshing=true;try{this.preCommitListeners.forEach(function(x){return x.valueChanged(null)});this.rc++;if(this._parent&&this._id){var mm=exports.service.getValue(this._parent.type(),this._parent.value,this._id,this._parent);var chV=mm!=this.value;this.value=mm}this.refreshChildren();if(this._parent&&this.id){if(chV||typeof mm=="object"||this.type().enumValues||this.type().computeFunction){var v=this.autoinit;this.listeners.forEach(function(x){return x.valueChanged(null)})}}else if(this.changing||!this._parent){this.listeners.forEach(function(x){return x.valueChanged(null)})}}finally{this.refreshing=false}};Binding.prototype.fromReferenceToOriginal=function(v){if(!this._btransform){this.enumeratedValues()}if(!this._btransform){return v}return this._btransform(v)};Binding.prototype.fromOriginalToReference=function(x){if(!this._transform){this.enumeratedValues()}if(!this._transform){return x}return this._transform(x)};Binding.prototype.enumeratedValues=function(){if(this._enum){return this._enum}if(this.type().enum){this._enum=new Binding("$enum");this._enum.value=this.type().enum;this._enum._type=array(this._type)}var ev=this.type().enumValues;if(ev){var eb=new ComputedBinding("$enum",function(x){},false,this);this.addPrecomitListener({valueChanged:function(e){eb.refresh()}});eb._type=this._type;this._enum=eb}else{var _enumOptions=enumOptionsBinding(this.type(),this);if(_enumOptions){this._enum=_enumOptions.collection}}return this._enum};Binding.prototype.id=function(){return this._id};Binding.prototype.referencedType=function(){var ref=this.type().reference;if(ref){var tr=null;var btr=null;if(typeof ref=="string"){var cmp=exports.service.resolveTypeByName(ref);if(cmp.id=="any"){var nnn=ref;if(nnn.indexOf(".")!=-1){var cmp=exports.service.resolveTypeByName(nnn.substring(0,nnn.indexOf(".")));if(cmp.id!="any"){return cmp}}}}}return null};Binding.prototype.localBinding=function(name){if(this._bnds[name]){return this._bnds[name]}if(name=="$status"){var st=new StatusBinding(this);this._bnds["$status"]=st;return st}else if(name=="$key"){if(this.parent()&&this.parent().type().componentType){var kb=new KeyBinding(this);return kb}}var p=exports.service.property(this.type(),name);var b=null;if(p&&(exports.service.isRelation(p.type)||exports.service.isView(p.type))){b=new exports.storage.BasicPagedCollection(name,exports.service.resolvedType(p.type),this)}else{if(p&&p.type.remote){b=new exports.storage.RemoteValueBinding(name);b.context=this}else{b=new Binding(name)}if(name.charAt(0)=="@"){b.value=this.lookupVar(name.substring(1));return b}if(this.value){b.value=exports.service.getValue(this.type(),this.value,name)}b._id=name}b._parent=this;if(p){b._type=exports.service.resolvedType(p)}else if(this.type().componentType){b._type=this.type().componentType}this._bnds[name]=b;return b};Binding.prototype.lookupVar=function(v){if(this.variables[v]){return this.variables[v]}if(exports.service.property(this.type(),v)){return exports.service.getValue(this.type(),this.get(),v,this)}if(this._parent){return this._parent.lookupVar(v)}if(this.context){return this.context.lookupVar(v)}return null};Binding.prototype.binding=function(p){var id=p.indexOf(".");if(id!=-1){var name=p.substring(0,id);var l=this.localBinding(name);return l.binding(p.substring(id+1))}return this.localBinding(p)};Binding.prototype.put=function(id,v){this.binding(id).set(v)};return Binding}(AbstractBinding);exports.Binding=Binding;var compute=require("./computationalEngine");var DirtyController=function(_super){__extends(DirtyController,_super);function DirtyController(){var _this=_super.apply(this,arguments)||this;_this.isDirty=false;return _this}DirtyController.prototype.setSaved=function(v){this.saved=JSON.stringify(v)};DirtyController.prototype.setCurrent=function(c){this.current=JSON.stringify(c);this.updateState()};DirtyController.prototype.updateState=function(){var newDirty=this.current!=this.saved;if(newDirty!=this.isDirty){this.isDirty=newDirty;this.fireEvent(null)}};DirtyController.prototype.get=function(){return this.isDirty};return DirtyController}(ListenableValue);exports.DirtyController=DirtyController;var CachingBinding=function(_super){__extends(CachingBinding,_super);function CachingBinding(original){var _this=_super.call(this,original.id())||this;_this.original=original;_this.dirtyController=new DirtyController;_this.ol=null;_this.context=original;_this._type=original._type;var v=_this;_this.ol={valueChanged:function(){v.set(exports.utils.deepCopy(original.get()))}};original.addListener(_this.ol);_this.addListener({valueChanged:function(){v.dirtyController.setCurrent(v.get())}});return _this}CachingBinding.prototype.dispose=function(){this.original.removeListener(this.ol)};CachingBinding.prototype.set=function(v){this.dirtyController.setSaved(v);_super.prototype.set.call(this,v)};CachingBinding.prototype.commit=function(){var q=this.original.readonly;this.original.readonly=false;this.original.set(this.get());this.original.readonly=q};CachingBinding.prototype.revert=function(){this.set(exports.utils.deepCopy(this.original.get()))};return CachingBinding}(Binding);exports.CachingBinding=CachingBinding;var ComputedBinding=function(_super){__extends(ComputedBinding,_super);function ComputedBinding(id,f,listenToRoot,parent){var _this=_super.call(this,id)||this;_this.f=f;_this.listenToRoot=listenToRoot;_this._parent=parent;_this._lv=_this.get();return _this}ComputedBinding.prototype.valueChanged=function(v){if(this.ignore){return}var q=this.get();if(JSON.stringify(this._lv)===JSON.stringify(q)){return}this.fireEvent(null);this._lv=q;this.ignore=true;try{this.changed()}finally{this.ignore=false}};ComputedBinding.prototype.refresh=function(){this.valueChanged(null);_super.prototype.refresh.call(this)};ComputedBinding.prototype.get=function(){return this.f(this.parent())};return ComputedBinding}(Binding);exports.ComputedBinding=ComputedBinding;function canCompute(b,x,allowVar){if(allowVar===void 0){allowVar=true}if(b.type().basicPaging){var v=b.type().basicPaging;if(v.offset==x.id){return true}if(v.page==x.id){return true}if(v.limit==x.id){return true}}if(x.reference){var ref=x.reference;if(typeof ref=="string"){var rs=ref;var member=rs.indexOf(".");if(member!=-1){var typeName=rs.substring(0,member);var ts=exports.service.resolveTypeByName(typeName);var lll=b;while(lll){if(exports.service.isSubtypeOf(lll.type(),ts)){return true}if(!lll.parent()){if(lll.context){lll=lll.context}else{lll=null}}else{lll=lll.parent()}}}}}if(allowVar){if(b.lookupVar(x.id)){return true}}if(x.computeFunction){return true}if(x.equalTo){return true}}function computeParameter(b,x,allowVar){if(allowVar===void 0){allowVar=true}if(x.reference){var ref=x.reference;if(typeof ref=="string"){var rs=ref;var member=rs.indexOf(".");if(member!=-1){var typeName=rs.substring(0,member);var pname=rs.substring(member+1);var ts=exports.service.resolveTypeByName(typeName);var lll=b;while(lll){if(exports.service.isSubtypeOf(lll.type(),ts)){return lll.get(pname)}if(!lll.parent()){if(lll.context){lll=lll.context}else{lll=null}}else{lll=lll.parent()}}}}}if(allowVar){var v=b.lookupVar(x.id);if(v){return v}}if(x.computeFunction){var exp=exports.calcExpression(x.computeFunction,b);if(exp){return exp}}if(x.equalTo){var eq=x.equalTo;return exports.calcExpression(eq,b)}}function computeParameterBinding(b,x){if(x.reference){var ref=x.reference;if(typeof ref=="string"){var rs=ref;var member=rs.indexOf(".");if(member!=-1){var typeName=rs.substring(0,member);var pname=rs.substring(member+1);var ts=exports.service.resolveTypeByName(typeName);var lll=b;while(lll){if(exports.service.isSubtypeOf(lll.type(),ts)){return lll.binding(pname)}if(!lll.parent()){if(lll.context){lll=lll.context}else{lll=null}}else{lll=lll.parent()}}}}}var v=b.lookupVar(x.id);if(v){var b=new Binding(x.id);b._type=x;b.value=v;return b}if(x.computeFunction){var exp=exports.calcExpression(x.computeFunction,b);var b=new Binding(x.id);b._type=x;b.value=exp;return b}if(x.equalTo){var eq=x.equalTo;var b=new Binding(x.id);b._type=x;b.value=eq;return b}return null}var Parameterizeable=function(_super){__extends(Parameterizeable,_super);function Parameterizeable(){return _super.apply(this,arguments)||this}Parameterizeable.prototype.param=function(name){return this.lookupVar(name)};return Parameterizeable}(Binding);exports.Parameterizeable=Parameterizeable;var OperationBinding=function(_super){__extends(OperationBinding,_super);function OperationBinding(t,ctx){var _this=_super.call(this,t.id)||this;_this.t=t;_this.ctx=ctx;var ps=t.parameters.filter(function(x){return!_this.canCompute(x)});if(ps.length==0){_this._type=exports.TYPE_NULL}if(ps.length==1){_this._type={id:t.id,type:[t,ps[0]]};_this.value=exports.service.newInstance(_this._type)}else{var parameterType_1={id:t.id,type:"object",properties:{}};var b=_this;if(ps){ps.forEach(function(p){return parameterType_1.properties[p.id]={type:p,id:"",required:p.required,displayName:exports.service.caption(p)}})}_this._type=parameterType_1;_this.value=exports.service.newInstance(_this._type)}return _this}OperationBinding.prototype.canCompute=function(x){var vvl=canCompute(this.ctx,x);return vvl||canCompute(this,x,false)};OperationBinding.prototype.lookupVar=function(v){for(var i=0;i<this.t.parameters.length;i++){if(this.t.parameters[i].id==v){if(this.canCompute(this.t.parameters[i])){return this.compute(this.t.parameters[i])}}}return _super.prototype.lookupVar.call(this,v)};OperationBinding.prototype.compute=function(x){var vvl=computeParameter(this.ctx,x);if(vvl instanceof Error){vvl=false}return vvl||computeParameter(this,x,false)};OperationBinding.prototype.execute=function(cb){var _this=this;var vl=this.get();var rs={};var ps=[];this.t.parameters.forEach(function(x){var val=_this.compute(x);if(val){rs[x.id]=val}else{ps.push(x)}});if(ps.length==1){var tp=exports.service.resolvedType(ps[0].type);if(this.context){if(!exports.service.isSubtypeOf(tp,this.context.type())){vl=exports.service.convert(tp,this.context.type(),vl)}}rs[ps[0].id]=vl}else{Object.keys(vl).forEach(function(x){rs[x]=vl[x]})}exports.service.executeOperation(this.t,rs,cb)};return OperationBinding}(Parameterizeable);exports.OperationBinding=OperationBinding;var cu=require("./collectionUtils");var ViewBinding=function(_super){__extends(ViewBinding,_super);function ViewBinding(id){var _this=_super.call(this,id)||this;_this.parameterModifyCount=0;return _this}ViewBinding.prototype.processOrderingChange=function(){var ord=null;var v;this.parameterBindings().forEach(function(x){if(x.type().ordering){ord=x.type().ordering;v=x.value}});var o=ord[v];var asc=false;var prop=null;if(typeof o=="object"){asc=!o.descending;prop=o.property}else{prop=o}this.parameterBindings().forEach(function(x){if(x.type().sortDirection){var vl=x.value;if(vl=="asc"){asc=true}}});if(this.hasAllData()){if(this.localFilters){this.localFilters.base=cu.sort(this.localFilters.base,this.collectionBinding().componentType(),prop,asc);this.localFilters.setBase(this.value,this.collectionBinding().componentType());this.localFilters.set(ord,v);this.value=this.localFilters.filtered}else{this.value=cu.sort(this.value,this.collectionBinding().componentType(),prop,asc)}this._cb.refresh();this.changed()}else{this.innerParametersChanged()}};ViewBinding.prototype.sortDirectionParameter=function(){var result=null;this.parameterBindings().forEach(function(x){if(x.type().sortDirection){result=x}});return result};ViewBinding.prototype.processFilteringChange=function(pbnd,ord,v){if(this.hasAllData()){if(!this.localFilters){this.beforeLocalFilters=this.oldParameters;if(this.beforeLocalFilters[pbnd.id()]){this.potentiallyDelayChange(pbnd);return}this.localFilters=new cu.FilteredCollection;this.localFilters.setBase(this.value,this.collectionBinding().componentType());this.localFilters.set(ord,v);this.value=this.localFilters.filtered;this._cb.refresh();this.changed()}else{if(this.beforeLocalFilters[pbnd.id()]){this.localFilters=null;this.potentiallyDelayChange(pbnd);return}else{this.localFilters.set(ord,v);this.value=this.localFilters.filtered;this._cb.refresh();this.changed()}}}else{this.potentiallyDelayChange(pbnd)}};ViewBinding.prototype.potentiallyDelayChange=function(pbnd){var _this=this;if(pbnd&&pbnd.enumeratedValues()){this.innerParametersChanged();return}var cp=this.parameterModifyCount;setTimeout(function(x){if(cp==_this.parameterModifyCount){_this.innerParametersChanged()}},800)};ViewBinding.prototype.hasAllData=function(){return false};ViewBinding.prototype.parametersChanged=function(){this.parameterModifyCount++;var cp=this.parameterModifyCount;if(this._parametersOwnerBinding.getLastEvent()){var pdnd=this._parametersOwnerBinding.getLastEvent().source;if(pdnd.id()=="$groupBy"){var val=pdnd.get();if(val=="$none"){val=""}this.collectionBinding().setGroupByProperty(val);return}var tp=pdnd.type();var ordering=tp.ordering;if(ordering){var value=pdnd.get();this.processOrderingChange();return}var sd=tp.sortDirection;if(sd){var value=pdnd.get();this.processOrderingChange();return}var filter=tp.filter;if(filter){var value=pdnd.get();this.processFilteringChange(pdnd,tp,value);return}}this.potentiallyDelayChange(pdnd)};ViewBinding.prototype.innerParametersChanged=function(){this.value=null;this.changed()};ViewBinding.prototype.statusChanged=function(){this.value=null;if(this.parameterStatus().valid){this.clearError()}};ViewBinding.prototype.allParameterBindings=function(){if(this._allParamBindings){return this._allParamBindings}this.parameterBindings();return this._allParamBindings};ViewBinding.prototype.parameterBindings=function(){var _this=this;if(this._paramBindings){return this._paramBindings}this._paramBindings=[];this._allParamBindings=[];var ps=this.type().parameters;var parameterType={id:"Parameters",type:"object",properties:{}};var gb=this.type().groupBy;if(gb&&gb.allowUserConfiguration){var values=[];if(gb.allowedGropings){values=gb.allowedGropings}else{var vp=exports.service.visibleProperties(exports.service.componentType(this.type()));vp=vp.filter(function(x){var vl=exports.service.isMultiSelect(x.type)||exports.service.isFiniteSetOfInstances(x.type);return vl});values=vp.map(function(x){return x.id})}var ed=[];values.forEach(function(x){var p=exports.service.property(exports.service.componentType(_this.type()),x);if(p){ed.push(exports.service.caption(p))}});values.push("$none");ed.push("None");ps.push({id:"$groupBy",location:"other",displayName:"Group By",type:"string",enum:values,enumDescriptions:ed,default:gb.property,required:false});var pl=this.type().parametersLayout;if(pl){if(pl.initiallyVisible){pl.initiallyVisible.push("$groupBy")}}}var bnd=this;this._parametersOwnerBinding=new Binding("");this._parametersOwnerBinding._type=parameterType;this._parametersOwnerBinding.value={};this._parametersOwnerBinding.beforeChangeListeners.push({valueChanged:function(e){bnd.oldParameters=exports.utils.deepCopy(bnd._parametersOwnerBinding.value)}});var b=this;if(ps){ps.forEach(function(p){return parameterType.properties[p.id]={type:p,id:"",required:p.required,displayName:exports.service.caption(p)}});this._parametersOwnerBinding.set(exports.service.newInstance(this._parametersOwnerBinding.type()));if(ps){ps.forEach(function(x){if(canCompute(_this,x)){var b1=computeParameterBinding(_this,x);if(b1){b1.addListener({valueChanged:function(){b._parametersOwnerBinding.binding(x.id).set(b1.get())}});b._parametersOwnerBinding.binding(x.id).set(b1.get());_this._allParamBindings.push(b._parametersOwnerBinding.binding(x.id))}}else{var bnd=_this._parametersOwnerBinding.binding(x.id);_this._paramBindings.push(bnd);_this._allParamBindings.push(bnd)}})}}this._parametersOwnerBinding.addPrecomitListener({valueChanged:function(){var ev=b._parametersOwnerBinding.getLastEvent();if(b.parameterBindings().indexOf(ev.source)==-1){if(b.allParameterBindings().indexOf(ev.source)!=-1){b.innerParametersChanged();return}}b.parametersChanged()}});this._parametersOwnerBinding.binding("$status").addListener({valueChanged:function(){b.statusChanged()}});return this._paramBindings};ViewBinding.prototype.parameterStatus=function(){this.parameterBindings();return this._parametersOwnerBinding.binding("$status").get()};return ViewBinding}(Binding);exports.ViewBinding=ViewBinding;exports.storage=require("./storage");exports.vs=require("./validators");var cb=require("./collectionBindings");exports.ok=exports.vs.ok;exports.error=exports.vs.error;exports.warn=exports.vs.warn;exports.calcExpression=compute.calcExpression;exports.calcCondition=compute.calcCondition;var StatusBinding=function(_super){__extends(StatusBinding,_super);function StatusBinding(p){var _this=_super.call(this,"$status",function(v){var validator=exports.vs.INSTANCE.validator(p.type());return validator.validateBinding(p)},true,p)||this;_this.value=exports.ok();return _this}StatusBinding.prototype.refresh=function(){this.valueChanged(null)};return StatusBinding}(ComputedBinding);exports.StatusBinding=StatusBinding;function binding(v,t){var rs;if(exports.service.isView(t)||exports.service.isRelation(t)){rs=new exports.storage.BasicPagedCollection(t.id,t,new Binding(""));rs._type=t;return rs}rs=new Binding(t.id);rs.value=v;rs._type=t;return rs}exports.binding=binding;function enumOptionsBinding(t,c){var cmp=exports.service.isArray(t)?exports.service.componentType(t):t;var ref=t.reference;if(ref){var tr=null;var btr=null;if(typeof ref=="string"){cmp=exports.service.resolveTypeByName(ref);if(cmp.id=="any"){var nnn=ref;if(nnn.indexOf(".")!=-1){cmp=exports.service.resolveTypeByName(nnn.substring(0,nnn.indexOf(".")));var pName=nnn.substring(nnn.indexOf(".")+1);tr=function(x){return exports.service.getValue(cmp,x,pName,c)};btr=function(x){var wc=st.all();var rs=null;for(var i=0;i<wc.length;i++){if(tr(wc[i])==x){rs=wc[i];break}}return rs}}}}var lsts=exports.service.listers(cmp);if(lsts.length>0){if(c._enum){var st=c._enum;return{collection:c._enum,transformer:tr,btrasform:btr}}var st=new exports.storage.BasicPagedCollection(lsts[0].id,lsts[0],c);st.context=c;c._enum=st;c._btransform=btr;c._transform=tr;return{collection:st,transformer:tr,btrasform:btr}}}}exports.enumOptionsBinding=enumOptionsBinding;exports.setAuthService=exports.storage.setAuthServive;function unidirectional(b1,b2){b1.addListener({valueChanged:function(){var v=b1.get();if(!v){v=[]}if(!Array.isArray(v)){v=[v]}b2.collectionBinding().setSelection(v)}});var sb=b2.collectionBinding().selectionBinding();sb.immutable=true}exports.unidirectional=unidirectional;var CC=function(){function CC(b1,b2,transformer,btransformer){this.b1=b1;this.b2=b2;var holder=this;b1.addListener({valueChanged:function(){if(holder.isSetting){return}var vl=b1.get();vl=holder.ptransform(vl,btransformer);b2.collectionBinding().setSelection(vl)}});b2.collectionBinding().selectionBinding().addListener({valueChanged:function(){holder.isSetting=true;try{var sel=b2.collectionBinding().getSelection();if(transformer){sel=sel.map(function(x){return transformer(x)})}b1.set(sel)}finally{holder.isSetting=false}}});b2.collectionBinding().setSelection(this.ptransform(b1.get(),btransformer))}CC.prototype.ptransform=function(vl,btransformer){if(!vl){vl=[]}if(!Array.isArray(vl)){vl=[vl]}if(btransformer){vl=vl.map(function(x){return btransformer(x)})}return vl};return CC}();function bidirectional(b1,b2,transformer,btransformer){new CC(b1,b2,transformer,btransformer)}exports.bidirectional=bidirectional;exports.service.addRule({from:"scalar",to:"date-only",code:function(v){return moments(v).format("YYYY-MM-DD")}});exports.service.addRule({from:"datetime",to:"date-only",code:function(v){return moments(v).format("YYYY-MM-DD")}});exports.service.addRule({from:"scalar",to:"date",code:function(v){return moments(v).toISOString()}});function reinit(v){exports.service.clean();exports.service.register(exports.TYPE_UNION);exports.service.register(exports.TYPE_ANY);exports.service.register(exports.TYPE_LINK);exports.service.register(exports.TYPE_VIEW);exports.service.register(exports.TYPE_SCALAR);exports.service.register(exports.TYPE_DATE);exports.service.register(exports.TYPE_DATEONLY);exports.service.register(exports.TYPE_STRING);exports.service.register(exports.TYPE_URL);exports.service.register(exports.TYPE_HTMLURL);exports.service.register(exports.TYPE_IMAGEURL);exports.service.register(exports.TYPE_OPERATION);exports.service.register(exports.TYPE_ACTION);exports.service.register(exports.TYPE_NUMBER);exports.service.register(exports.TYPE_INTEGER);exports.service.register(exports.TYPE_BOOLEAN);exports.service.register(exports.TYPE_NULL);exports.service.register(exports.TYPE_DATETIME);exports.service.register(exports.TYPE_PASSWORD);exports.service.register(exports.TYPE_OBJECT);exports.service.register(exports.TYPE_ARRAY);exports.service.register(exports.TYPE_RELATION);exports.service.register(exports.TYPE_TEXT);exports.service.register(exports.TYPE_MARKDOWN);exports.service.register(exports.TYPE_CODE);exports.service.register(exports.TYPE_MAP);exports.service.register(exports.TYPE_HTML);if(v){Object.keys(v).forEach(function(x){exports.service.register(v[x])})}}exports.reinit=reinit;reinit()},{"./collectionBindings":19,"./collectionUtils":20,"./computationalEngine":21,"./decorators":22,"./manager":23,"./metaKeys":24,"./storage":25,"./typesService":27,"./utils":28,"./validators":29,moment:30}],27:[function(require,module,exports){"use strict";var types=require("./types");var pluralize=require("pluralize");var types_1=require("./types");var util_1=require("util");var utils=require("./utils");var decorators=require("./decorators");var ce=require("./computationalEngine");var applyProp=function(superP,result){if(superP){if(typeof superP=="string"){superP=exports.INSTANCE.resolveTypeByName(superP)}Object.keys(superP).forEach(function(x){return result[x]=superP[x]})}return superP};function mergeProp(dec,superP){if(!superP){return dec}if(!dec){return superP}var result={};applyProp(superP,result);applyProp(dec,result);return result}function apply(t,s){Object.keys(s).forEach(function(k){if(k=="properties"){if(!t[k]){t[k]={}}{var props=s[k];Object.keys(props).forEach(function(p){t[k][p]=mergeProp(props[p],t[k][p])})}return}if(k=="type"){return}else{t[k]=s[k]}});var props=s.properties;if(props&&t.required&&Array.isArray(t.required)){Object.keys(props).forEach(function(p){if(props[p].required){t.required.push(p)}})}}function nicerName(n){var result=[];var needUpperCase=true;var p="";for(var i=0;i<n.length;i++){var c=n.charAt(i);if(c=="_"){c=" "}if(p.toUpperCase()!=p){if(c.toLowerCase()!=c){result.push(" ")}}if(needUpperCase){c=c.toUpperCase();needUpperCase=false}result.push(c);p=c}return result.join("")}exports.nicerName=nicerName;var GENERIC_GROUP="Generic";var ADVANCED_GROUP="Advanced";var OTHER_GROUP="Other";function setupGroups(ps,t){if(!ps){return}var allProperties=new Map;if(t.propertyGroups){var pc=t.propertyGroups;Object.keys(pc).forEach(function(x){pc[x].forEach(function(y){ps.forEach(function(p){if(p.id==y){p.groupId=x}})})})}ps.forEach(function(x){if(x.required&&exports.INSTANCE.isScalar(x.type)||exports.INSTANCE.isReference(x.type)){x.groupId=GENERIC_GROUP;return}if(!x.groupId){allProperties.set(x.id,x)}});var it=allProperties.keys();while(true){var v=it.next();if(v.done){return}var val=v.value;var q=allProperties.get(val);if(exports.INSTANCE.isScalar(q.type)){q.groupId=GENERIC_GROUP;if(q.type.needsOwnGroup){q.groupId=q.id}}else{q.groupId=q.id}}}exports.interpolate=decorators.interpolate;var deps=function(p,x){var dependent=[];p.properties.forEach(function(y){if(dependencyString(y.type).indexOf(x.id)!=-1){dependent.push(y)}if(y.type.discriminationInfo){if(y.type.discriminationInfo[x.id]){dependent.push(y);x.discriminator=true}}});return dependent};function autoInit(t){if(t.enum){return true}if(exports.INSTANCE.isBoolean(t)){return true}}function labelProps(t){var m=exports.INSTANCE.resolvedType(t);if(m.label){if(typeof m.label=="function"){return""}else{return m.label}}return"name title label id"}function order(t,p){var copy=[];var inserted={};p.properties.forEach(function(x){var dependent=deps(p,x);x.dependents=dependent;x.dependents.forEach(function(y){return y.depends=x})});var properties=p.properties.filter(function(x){return!x.type.computeFunction});var lp=labelProps(t);var kp=t.keyProp;if(kp){properties.forEach(function(x){if(x.id==kp){insert(x,copy,inserted)}})}properties.forEach(function(x){if(lp.indexOf(x.id)!=-1){insert(x,copy,inserted)}});var kp=t.discriminator;if(kp){properties.forEach(function(x){if(x.id==kp){insert(x,copy,inserted)}})}properties.forEach(function(x){if(x.required&&!autoInit(x.type)&&util_1.isNullOrUndefined(x.depends)){insert(x,copy,inserted)}});properties.forEach(function(x){if(x.required&&(!autoInit(x.type)||x.discriminator)){insert(x,copy,inserted)}});var po=t;if(po.propOrder){po.propOrder.forEach(function(x){p.properties.forEach(function(y){if(y.id==x){insert(y,copy,inserted)}})})}properties.forEach(function(x){if(!types.service.isBoolean(x)&&!x.depends){insert(x,copy,inserted)}});properties.forEach(function(x){if(types.service.isBoolean(x)){insert(x,copy,inserted)}});properties.forEach(function(x){insert(x,copy,inserted)});p.properties.filter(function(x){return x.type.computeFunction}).forEach(function(x){insert(x,copy,inserted)});p.properties=copy}function insert(p,copy,inserted){if(inserted[p.id]){return}inserted[p.id]=true;copy.push(p);p.dependents.forEach(function(d){if(!types.service.isBoolean(d)){insert(d,copy,inserted)}});p.dependents.forEach(function(d){insert(d,copy,inserted)})}function dependencyString(t){var ft=t;var ds="";ds=ds+addDeps(ft.hiddenWhen);ds=ds+addDeps(ft.visibleWhen);ds=ds+addDeps(ft.requiredWhen);ds=ds+addDeps(ft.disabledWhen);return ds}function addDeps(v){if(typeof v=="string"){return v}return""}function resolver(v,val,t){return ce.resolver(v,val,t)}exports.resolver=resolver;var TypeService=function(){function TypeService(){this.instanceMap=new WeakMap;this.typeMap=new WeakMap;this.typeByName=new Map;this.executors={};this.conversionRules={}}TypeService.prototype.clean=function(){this.typeByName=new Map;this.typeMap=new WeakMap;this.instanceMap=new WeakMap};TypeService.prototype.isScalar=function(t){var _this=this;var m=this.isSubtypeOf(t,types.TYPE_SCALAR);if(!m){var options=t.options;if(options){var allScalar=true;options.forEach(function(x){allScalar=allScalar&&_this.isScalar(_this.resolvedType(x))});if(allScalar){return true}}}return m};TypeService.prototype.isReference=function(t){var r=this.resolvedType(t);if(r.reference){return true}return false};TypeService.prototype.icon=function(v,t){if(v instanceof types.HasType){t=v.$type;v=v.$value}t=this.resolvedType(t);var vl=t.icon;return decorators.icon(vl,v,t)};TypeService.prototype.isNumber=function(t){return this.isSubtypeOf(t,types.TYPE_NUMBER)};TypeService.prototype.isInteger=function(t){return this.isSubtypeOf(t,types.TYPE_INTEGER)};TypeService.prototype.isString=function(t){return this.isSubtypeOf(t,types.TYPE_STRING)};TypeService.prototype.isArray=function(t){return this.isSubtypeOf(t,types.TYPE_ARRAY)};TypeService.prototype.isRelation=function(t){return this.isSubtypeOf(t,types.TYPE_RELATION)};TypeService.prototype.isView=function(t){return this.isSubtypeOf(t,types.TYPE_VIEW)};TypeService.prototype.constructors=function(t){var _this=this;if(!t.constructors){return[]}return t.constructors.map(function(x){if(typeof x=="string"){return _this.resolveTypeByName(x)}return x})};TypeService.prototype.executeOperation=function(op,parameters,cb){this.executors[op.executorId].executeOperation(op,parameters,cb)};TypeService.prototype.registerExecutor=function(name,ex){this.executors[name]=ex};TypeService.prototype.registerModule=function(module){var _this=this;if(module.conversionRules){Object.keys(module.conversionRules).forEach(function(x){var cr=module.conversionRules[x];_this.addRule(cr)})}};TypeService.prototype.addRule=function(cr){var key=cr.from+"->"+cr.to;this.conversionRules[key]=cr};TypeService.prototype.resolvableId=function(t){if(typeof t=="string"){return t}if(t.id){return t.id}if(t.type){if(typeof t.type=="string"){return t.type}if(Array.isArray(t.type)){var m=t.type;if(m.length==1){if(typeof m[0]=="string"){return m[0]}return this.resolvableId(m[0])}return null}return this.resolvableId(t.type)}};TypeService.prototype.executeConversionRule=function(r,targetType,sourceType,vl){if(r.selfRule){var b=new types_1.Binding("");b.set(vl);var exp=types.calcExpression(r.selfRule,b);return exp}if(r.code){return r.code(vl)}return vl};TypeService.prototype.lookupConverionRule=function(targetType,sourceType){if(!sourceType){return null}if(!targetType){return null}var sid=this.resolvableId(sourceType);var tid=this.resolvableId(targetType);var cid=sid+"->"+tid;if(this.conversionRules[cid]){return this.conversionRules[cid]}var sm=[sourceType].concat(this.superTypes(sourceType));var qm=this.superTypes(targetType);for(var i=0;i<sm.length;i++){for(var j=0;j<qm.length;j++){var rules=this.lookupConverionRule(qm[j],sm[i]);if(rules){return rules}}}return null};TypeService.prototype.convert=function(targetType,sourceType,vl){var _this=this;if(this.isSubtypeOf(sourceType,targetType)){return vl}var rule=this.lookupConverionRule(targetType,sourceType);if(rule){return this.executeConversionRule(rule,targetType,sourceType,vl)}if(this.isArray(targetType)&&this.isArray(sourceType)){if(Array.isArray(vl)){return vl.map(function(x){return _this.convert(_this.componentType(targetType),_this.componentType(sourceType),x)})}}if(this.isString(targetType)){if(this.isObject(sourceType)){return this.label(vl,sourceType)}}if(this.isObject(targetType)){var rs={};this.allProperties(targetType).forEach(function(x){var cl=_this.getValue(sourceType,vl,x.id,null);if(cl){if(cl){cl=_this.convert(x.type,_this.property(sourceType,x.id).type,cl)}_this.setValue(targetType,rs,x.id,cl,null)}else{_this.setValue(targetType,rs,x.id,null,null)}});return rs}return vl};TypeService.prototype.updaters=function(t){var _this=this;if(!t.updaters){return[]}return t.updaters.map(function(x){if(typeof x=="string"){return _this.resolveTypeByName(x)}return x})};TypeService.prototype.destructors=function(t){var _this=this;if(!t.destructors){return[]}return t.destructors.map(function(x){if(typeof x=="string"){return _this.resolveTypeByName(x)}return x})};TypeService.prototype.listers=function(t){var _this=this;if(!t.listers){return[]}return t.listers.map(function(x){if(typeof x=="string"){return _this.resolveTypeByName(x)}return x})};TypeService.prototype.isVisible=function(t,b){var m=t;var visible=true;if(!util_1.isNullOrUndefined(m.visibleWhen)){
visible=visible&&types.calcCondition(m.visibleWhen,b)}var vl=t;if(vl.discriminationInfo){var map=vl.discriminationInfo;if(b.parent()){Object.keys(map).forEach(function(x){var actualDescValue=b.parent().binding(x).get();if(map[x].indexOf(actualDescValue)==-1){visible=false}})}}if(m.hiddenWhen){visible=visible&&!types.calcCondition(m.hiddenWhen,b)}return visible};TypeService.prototype.componentType=function(t){t=this.resolvedType(t);var cm=t;if(this.isArray(t)){return this.resolvedType(cm.itemType)}if(this.isMap(t)){return this.resolvedType(cm.componentType)}};TypeService.prototype.isFiniteSetOfInstances=function(t){return t.enum||t.enumValues||t.reference&&!this.isArray(t)};TypeService.prototype.normalize=function(r){if(typeof r=="string"){return this.resolveTypeByName(r)}else{return r}};TypeService.prototype.isMultiSelect=function(t){if(this.isArray(t)){var cm=t;if(cm.uniqueItems){if(this.isFiniteSetOfInstances(this.componentType(t))||this.resolvedType(t).reference){if(!t.ordered){return true}}}}return false};TypeService.prototype.isBoolean=function(t){return this.isSubtypeOf(t,types.TYPE_BOOLEAN)};TypeService.prototype.isSame=function(v0,v1,t){if(v0==v1){return true}var kp=this.keyProp(t);if(kp){var k0=this.getValue(t,v0,kp);var k1=this.getValue(t,v1,kp);return k0==k1}};TypeService.prototype.isDate=function(t){return this.isSubtypeOf(t,types.TYPE_DATE)};TypeService.prototype.isMap=function(t){return this.isSubtypeOf(t,types.TYPE_MAP)};TypeService.prototype.isObject=function(t){return this.isSubtypeOf(t,types.TYPE_OBJECT)};TypeService.prototype.isSubtypeOf=function(t,superT){if(t==superT){return true}if(t.$original==superT){return true}if(this.resolvedType(superT)==t){return true}var st=this.superTypes(t);for(var i=0;i<st.length;i++){if(this.isSubtypeOf(st[i],superT)){return true}}};TypeService.prototype.register=function(t){if(t.type=="module"){this.registerModule(t)}if(t.id){this.typeByName.set(t.id,t)}};TypeService.prototype.resolveTypeByName=function(name){if(this.typeByName.has(name)){return this.typeByName.get(name)}return types.TYPE_ANY};TypeService.prototype.superTypes=function(t){var rt=this.resolvedType(t);if(!rt.type){return[]}return rt.type};TypeService.prototype.discriminatorValue=function(t){var r=this.resolvedType(t);var dv=r.discriminatorValue;if(dv){return dv}if(t.id){return t.id}};TypeService.prototype.discriminator=function(t){var r=this.resolvedType(t);var dv=r.discriminator;return dv};TypeService.prototype.caption=function(t){var r=this.resolvedType(t);if(r.displayName){if(r.displayName==r.id){return nicerName(r.id)}return r.displayName}if(r.id){return nicerName(r.id)}return""};TypeService.prototype.label=function(v,t){if(v instanceof types.HasType){t=v.$type;v=v.$value}var m=this.resolvedType(t);var label2=m.label;return decorators.calculateLabel(label2,v,t)};TypeService.prototype.getValue=function(t,target,name,bnd){if(!target){return null}var prop=this.property(t,name);if(prop){var func=prop.type;if(func.computeFunction){if(!bnd){bnd=types.binding(target,t)}return types.calcExpression(func.computeFunction,bnd)}}var val=target[name];if(val){if(typeof val=="function"){val=val.apply(target)}}if(prop){var rt=this.resolvedType(prop);if(val===null||val==undefined){if(rt.NilInstance){return rt.NilInstance}}}return val};TypeService.prototype.compare=function(v0,v1,t){var cf=t.compareFunction;if(cf){return cf(v0,v1)}var lab0=this.label(v0,t);var lab1=this.label(v1,t);return lab0.localeCompare(lab1)};TypeService.prototype.getValueWithProp=function(t,target,prop){if(!target){return null}if(prop){var func=prop.type;if(func.computeFunction){var bnd=null;if(!bnd){bnd=types.binding(target,t)}return types.calcExpression(func.computeFunction,bnd)}}var val=target[prop.id];if(val){if(typeof val=="function"){val=val.apply(target)}}if(prop){var rt=this.resolvedType(prop);if(val===null||val==undefined){if(rt.NilInstance){return rt.NilInstance}}}return val};TypeService.prototype.isReadonly=function(t){if(t.readonly){return true}if(t.computeFunction){return true}};TypeService.prototype.setValue=function(t,target,name,v,bnd){var val=target[name];var prop=this.property(t,name);if(prop){var rt=this.resolvedType(prop);if(rt.NilInstance){if(rt.NilInstance==val){val=null}}if(prop.readonly){return}}var setter=target["get"+name.charAt(0).toUpperCase()+name.substring(1)];if(setter&&typeof setter=="function"){setter.apply(target,v)}target[name]=v;return val};TypeService.prototype.children=function(v,t){var _this=this;var m=this.resolvedType(t);if(m.children){var ch=m.children;if(typeof ch=="string"){if(v[ch]){return v[ch]}return[]}else{var res=[];ch.forEach(function(x){if(v[x]){res=res.concat(v[x])}});return res}}else{var res=[];this.visibleProperties(t).forEach(function(x){if(_this.isArray(x.type)){var at=x.type;if(_this.isObject(at.itemType)){var q=x.id;if(v[q]){res=res.concat(v[q])}}}if(_this.isMap(x.type)){var mt=x.type;if(_this.isObject(mt.componentType)){var q=x.id;if(v[q]){res=res.concat(v[q])}}}});return res}};TypeService.prototype.visibleProperties=function(t){var _this=this;if(t.visibleProperties){return this.allProperties(t).filter(function(x){t.visibleProperties.indexOf(x.id)!=-1})}var result=[];var pn={};this.superTypes(t).forEach(function(x){var nn=_this.visibleProperties(x);nn.forEach(function(v){pn[v.id]=v})});this.properties(t,pn);Object.keys(pn).forEach(function(x){if(t.hiddenProperties){if(t.hiddenProperties.indexOf(x)!=-1){return}}result.push(pn[x])});return result};TypeService.prototype.allProperties=function(t){var _this=this;var rt=t;var pn={};this.superTypes(t).forEach(function(x){var nn=_this.allProperties(x);nn.forEach(function(v){pn[v.id]=v})});var result=this.properties(t,pn);return result};TypeService.prototype.propertyGroups=function(t){var mm={};var res=[];this.visibleProperties(t).forEach(function(p){if(p.groupId==null){p.groupId=GENERIC_GROUP}var q=mm[p.groupId];if(!q){q=[];mm[p.groupId]=q}q.push(p)});if(mm[GENERIC_GROUP]){res.push({id:GENERIC_GROUP,caption:nicerName(GENERIC_GROUP),properties:mm[GENERIC_GROUP]});delete mm[GENERIC_GROUP]}Object.keys(mm).filter(function(k){res.push({id:k,caption:nicerName(k),properties:mm[k]})});res.forEach(function(x){return order(t,x)});return res};TypeService.prototype.keyProp=function(t){var _this=this;if(t.keyProp){return t.keyProp}var mmm="$key";this.allProperties(t).forEach(function(x){if(_this.resolvedType(x).key){mmm=x.id}});return mmm};TypeService.prototype.properties=function(t,pn){if(pn===void 0){pn={}}this.propertyMap(t,pn);var result=[];Object.keys(pn).forEach(function(x){result.push(pn[x])});setupGroups(result,t);return result};TypeService.prototype.property=function(t,name){var rs={};var rt=this.resolvedType(t);var r=this.propertyMap(rt,rs);var val=rs[name];if(val){return val}if(rt.aliases){var ll=rt.aliases;if(ll[name]){var pn=ll[name];return rs[pn]}}};TypeService.prototype.propertyMap=function(t,pn){var _this=this;var ot=t;if(ot.properties){Object.keys(ot.properties).forEach(function(p){var ty=ot.properties[p];var rt=null;if(typeof ty=="string"){rt=_this.resolveTypeByName(ty)}else{rt=ty}var nn=nicerName(p);if(!rt.id){if(rt.displayName){nn=rt.displayName}}var gid=null;pn[p]={id:p,type:rt,declaredAt:ot,displayName:nn,groupId:gid,required:rt.required&&typeof rt.required=="boolean"?true:false}})}if(ot.required&&Array.isArray(ot.required)){Object.keys(pn).forEach(function(x){pn[x].required=ot.required.indexOf(x)!=-1})}};TypeService.prototype.actions=function(t,pn){if(pn===void 0){pn={}}this.actionMap(t,pn);var result=[];Object.keys(pn).forEach(function(x){result.push(pn[x])});return result};TypeService.prototype.actionMap=function(t,pn){var ot=t;if(ot.actions){Object.keys(ot.actions).forEach(function(p){var ty=ot.actions[p];pn[p]=ty})}};TypeService.prototype.workingCopy=function(v,t){if(this.isScalar(t)){return v}return utils.deepCopy(v)};TypeService.prototype.resolvedType=function(t){var _this=this;if(typeof t=="string"){var sm=t;t=this.resolveTypeByName(sm)}if(t==types.TYPE_ANY){return t}if(t.$resolved){return t}if(this.typeMap.has(t)){return this.typeMap.get(t)}var mm={};if(t.type){if(!Array.isArray(t.type)){mm.type=[t.type]}else{mm.type=t.type}}else{mm.type=[types.TYPE_ANY]}var newTypes=[];mm.type.forEach(function(t){var rt=types.TYPE_ANY;if(typeof t=="string"){rt=_this.resolvedType(_this.resolveTypeByName(t))}else{rt=_this.resolvedType(t)}apply(mm,rt);newTypes.push(rt)});apply(mm,t);mm.type=newTypes;mm.$resolved=true;mm.$original=t;if(!t.displayName&&t.id){t.displayName=nicerName(t.id)}if(mm.itemType){mm.itemType=this.resolvedType(mm.itemType);if(!mm.itemType.displayName&&mm.displayName){var rr={id:"",type:mm.itemType,displayName:pluralize.singular(mm.displayName)};mm.itemType=this.resolvedType(rr)}}if(mm.componentType&&!mm.componentType.$resolved){mm.componentType=this.resolvedType(mm.componentType);if(!mm.componentType.displayName&&mm.displayName){var rr={id:"",type:mm.componentType,displayName:pluralize.singular(mm.displayName)};mm.componentType=this.resolvedType(rr)}}this.typeMap.set(t,mm);if(mm.options){var ut=mm;var rs=mm.options.map(function(x){if(typeof x=="string"){return _this.resolveTypeByName(x)}return x});ut.options=rs;mm=optimizeUt(ut);this.typeMap.set(t,mm)}if(!mm.displayName){mm.displayName=""}return mm};TypeService.prototype.typeOf=function(v){if(this.instanceMap.has(v)){return this.instanceMap.get(v)}};TypeService.prototype.normalizeObjectUnionType=function(u,tp){var _this=this;var rs=types.copy(u);rs.type="object";var pmap={};var dmap={};var discriminators={};var discriminatorDescriptions={};tp.forEach(function(v){var rt=_this.resolvedType(v);var allProps=_this.allProperties(rt);var desc=_this.discriminator(rt);var value=_this.discriminatorValue(rt);allProps.forEach(function(c){var rmap=pmap[c.id];var dm=dmap[c.id];if(!rmap){rmap={};pmap[c.id]=rmap}if(!dm){dm={};dmap[c.id]=dm}var vls=dm[desc];if(!vls){vls=[];dm[desc]=vls}vls.push(value);rmap[utils.hash(c.type)]=c});var dlist=discriminators[desc];var ddescs=discriminatorDescriptions[desc];if(!dlist){dlist=[];ddescs=[];discriminators[desc]=dlist;discriminatorDescriptions[desc]=ddescs}dlist.push(value);ddescs.push(_this.caption(rt))});var ps={};Object.keys(pmap).forEach(function(k){var cand=pmap[k];if(Object.keys(cand).length==1){ps[k]=cand[Object.keys(cand)[0]]}else{ps[k]={id:k,type:"union"};ps[k].options=Object.keys(cand).map(function(v){return cand[v]})}if(discriminators[k]){ps[k].enum=discriminators[k];ps[k].enumDescriptions=discriminatorDescriptions[k];ps[k].required=true}else{var ll=dmap[k];var need=true;if(Object.keys(ll).length==1){if(ll[Object.keys(ll)[0]].length==tp.length){need=false}}if(need){ps[k].discriminationInfo=dmap[k]}}});rs.properties=ps;delete rs.options;delete rs.createControl;return rs};TypeService.prototype.newInstance=function(t){var _this=this;if(this.isObject(t)){var val={};if(t.default){val=utils.deepCopy(t.default)}else{this.allProperties(t).forEach(function(x){var rr=_this.resolvedType(x.type);if(rr.default){_this.setValue(t,val,x.id,rr.default,null)}if(x.required){if(_this.isArray(x.type)){_this.setValue(t,val,x.id,[],null)}if(_this.isMap(x.type)){_this.setValue(t,val,x.id,{},null)}if(_this.isBoolean(x.type)){_this.setValue(t,val,x.id,false,null)}}})}return val}if(this.isArray(t)){var ar=[];return ar}};return TypeService}();exports.TypeService=TypeService;exports.INSTANCE=new TypeService;function optimizeUt(ut){var nt={};ut.options.forEach(function(x){if(typeof x=="string"){x=exports.INSTANCE.resolveTypeByName(x)}nt[JSON.stringify(x)]=x});var hasChanges=true;while(hasChanges){hasChanges=false;Object.keys(nt).forEach(function(x){Object.keys(nt).forEach(function(y){var t1=nt[x];var t2=nt[y];if(t1==t2){return}if(exports.INSTANCE.isArray(t1)){if(exports.INSTANCE.componentType(t1)==t2||exports.INSTANCE.componentType(t1).id==t2.id){delete nt[y];hasChanges=true}}if(exports.INSTANCE.isScalar(t1)&&exports.INSTANCE.isScalar(t2)){if(exports.INSTANCE.isSubtypeOf(t2,t1)){delete nt[y];hasChanges=true}else{}}})})}var objectTypes=[];var scalarTypes=[];var arrayTypes=[];var otherTypes=[];Object.keys(nt).forEach(function(x){var tp=nt[x];if(exports.INSTANCE.isScalar(tp)){scalarTypes.push(tp)}else if(exports.INSTANCE.isObject(tp)){objectTypes.push(tp)}else if(exports.INSTANCE.isArray(tp)){arrayTypes.push(tp)}else{otherTypes.push(tp)}});var options=[];if(objectTypes.length>0){if(objectTypes.length==1){options.push(objectTypes[0])}else{options.push(exports.INSTANCE.normalizeObjectUnionType(ut,objectTypes))}}if(arrayTypes.length>0){if(arrayTypes.length==1){options.push(arrayTypes[0])}else{var t=types.copy(ut);t.type="array";var it_1=types.copy(ut);it_1.id="";it_1.displayName="";it_1.options=arrayTypes.map(function(o){var rs=types.copy(o.itemType);return rs});t.itemType=it_1;delete t.options;delete t.createControl;options.push(t)}}options=options.concat(scalarTypes);options=options.concat(otherTypes);if(options.length==1){return exports.INSTANCE.resolvedType(options[0])}var result=types.copy(ut);ut.options=options;return result}},{"./computationalEngine":21,"./decorators":22,"./types":26,"./utils":28,pluralize:31,util:43}],28:[function(require,module,exports){"use strict";function hash(t){var m=deepCopy(t);delete t.declaredAt;delete t.$original;return JSON.stringify(m)}exports.hash=hash;function deepCopy(obj){if(typeof obj=="object"){return JSON.parse(JSON.stringify(obj))}return obj}exports.deepCopy=deepCopy;function isSame(oldValue,newValue){if(!oldValue){if(newValue){return false}}if(newValue){if(!oldValue){return false}}return oldValue==newValue||JSON.stringify(oldValue)==JSON.stringify(newValue)}exports.isSame=isSame;function apply(s,t){Object.keys(s).forEach(function(x){t[x]=s[x]})}exports.apply=apply},{}],29:[function(require,module,exports){"use strict";var types=require("./types");var ts=require("./typesService");var Severity=types.Severity;var AbstractBinding=types.AbstractBinding;var service=ts.INSTANCE;var decorators=require("./decorators");var CompositeValidator=function(){function CompositeValidator(){this._validators=[]}CompositeValidator.prototype.validateBinding=function(b){var sts=this._validators.map(function(x){return x.validateBinding(b)});sts=sts.filter(function(x){return x.severity!=Severity.OK});if(sts.length==0){return ok()}var warns=sts.filter(function(x){return x.severity==Severity.WARNING});sts=sts.filter(function(x){return x.severity!=Severity.WARNING});if(sts.length>0){var message=sts.map(function(x){return x.message}).join(", ");if(this._errorMessage){return error(decorators.interpolate(this._errorMessage,b.type(),b.type()),sts[0].path,b.uid(),sts)}return error(message,b.uid(),sts[0].path,sts)}if(warns.length>0){var message=warns.map(function(x){return x.message}).join(", ");return warn(message)}};return CompositeValidator}();exports.CompositeValidator=CompositeValidator;function getOwningCollection(b){var hu=b.type();var oc=b.type().owningCollection;if(!oc){if(b.parent()){oc=b.parent().type().owningCollection}}if(oc instanceof AbstractBinding){oc=oc.collectionBinding()}return oc}var UniquieValueValidator=function(){function UniquieValueValidator(type){this.type=type}UniquieValueValidator.prototype.validateBinding=function(b){var hu=b.type();var oc=getOwningCollection(b);if(oc){if(oc.contains(b.get())){var ue=b.type().uniquinessException;if(ue instanceof AbstractBinding){ue=ue.get()}if(ue==b.get()){return ok()}return error(b.type().displayName+" should be unique",b.id())}}return ok()};return UniquieValueValidator}();exports.UniquieValueValidator=UniquieValueValidator;function ok(){return{severity:Severity.OK,message:"",path:"",valid:true}}exports.ok=ok;function error(message,uid,path,inner){if(path===void 0){path=""}return{severity:Severity.ERROR,message:message,path:path,valid:false,inner:inner,uid:uid}}exports.error=error;function warn(message,path,inner){if(path===void 0){path=""}return{severity:Severity.WARNING,message:message,path:path,valid:true,inner:inner}}exports.warn=warn;var UniquinesValidator=function(){function UniquinesValidator(type){this.type=type}UniquinesValidator.prototype.validateBinding=function(b){var oc=getOwningCollection(b);if(oc){var uex=[];if(b.parent()&&b.parent().type().uniquinessException){var ue=b.parent().type().uniquinessException;if(ue instanceof AbstractBinding){ue=ue.get()}uex.push(ue)}if(oc.containsWithProp(b.type().id,b.get(),uex)){return error(b.type().displayName+" should be unique",b.id())}}return ok()};return UniquinesValidator}();exports.UniquinesValidator=UniquinesValidator;var EnumValuesValidator=function(){function EnumValuesValidator(v){this.v=v}EnumValuesValidator.prototype.validateBinding=function(b){if(b.get()){var options=types.enumOptions(b.type(),b);if(options.indexOf(b.get())==-1){return error(b.type().displayName+" should be one of :"+options,b.uid())}}return ok()};return EnumValuesValidator}();exports.EnumValuesValidator=EnumValuesValidator;var RequiredValidator=function(){function RequiredValidator(){}RequiredValidator.prototype.validateBinding=function(b){if(!b.get()&&b.get()!==false){return error(b.type().displayName+" is required",b.uid())}return ok()};return RequiredValidator}();exports.RequiredValidator=RequiredValidator;var RequiredWhenValidator=function(){function RequiredWhenValidator(v){this.v=v}RequiredWhenValidator.prototype.validateBinding=function(b){if(!b.get()&&b.get()!==false){if(types.calcCondition(this.v.requiredWhen,b)){if(this.v.requiredWhenMessage){return error(this.v.requiredWhenMessage,b.uid())}return error(b.type().displayName+" is required in this context",b.uid())}}return ok()};return RequiredWhenValidator}();exports.RequiredWhenValidator=RequiredWhenValidator;var ValidationManager=function(){function ValidationManager(){this.valMap=new WeakMap}ValidationManager.prototype.validator=function(t){var _this=this;var rs=service.resolvedType(t);var hasW=rs;var instanceValidator=hasW.instanceValidator;if(instanceValidator&&hasW.overrideDefaultValidators){return this.toVal(instanceValidator)}if(this.valMap.has(rs)){return this.valMap.get(rs)}var cm=new CompositeValidator;this.valMap.set(rs,cm);if(hasW.errorMessage){cm._errorMessage=hasW.errorMessage}var collection=rs.owningCollection;if(collection){if(rs.unique){cm._validators.push(new UniquinesValidator(rs))}if(rs.uniqueValue){cm._validators.push(new UniquieValueValidator(rs))}}else{if(rs.unique){cm._validators.push(new UniquinesValidator(rs))}}if(instanceValidator){cm._validators.push(this.toVal(instanceValidator))}if(rs.required&&typeof rs.required=="boolean"){cm._validators.push(new RequiredValidator)}if(rs.requiredWhen){cm._validators.push(new RequiredWhenValidator(rs))}if(rs.enum||rs.enumValues){cm._validators.push(new EnumValuesValidator(t))}if(service.isString(rs)){var st=rs;if(st.pattern){cm._validators.push({validateBinding:function(v){var vl=""+v.get();if(!vl.match(st.pattern)){return error(v.type().displayName+" should match to "+st.pattern,v.uid())}return ok()}})}if(st.minLength){cm._validators.push({validateBinding:function(v){var vv=v.get();if(v.get()){var vl=""+vv;if(vl.length<st.minLength){return error(v.type().displayName+" should have at least "+st.minLength+" characters",v.uid())}}return ok()}})}if(st.maxLength){cm._validators.push({validateBinding:function(v){if(v.get()){var vl=""+v.get();if(vl.length>st.maxLength){return error(v.type().displayName+" should have not more then "+st.maxLength+" characters",v.uid())}}return ok()}})}}if(service.isNumber(rs)){var nt=rs;if(nt.minimum){cm._validators.push({validateBinding:function(v){var vv=v.get();if(v.get()){var vl=vv;if(vl<nt.minimum){return error(v.type().displayName+" should be at least "+nt.minimum,v.uid())}}return ok()}})}if(nt.maximum){cm._validators.push({validateBinding:function(v){var vv=v.get();if(v.get()){var vl=vv;if(vl>nt.maximum){return error(v.type().displayName+" should be not more then "+nt.maximum,v.uid())}}return ok()}})}}if(service.isObject(rs)){var ps=service.allProperties(rs);ps.forEach(function(p){var v=_this.validator(p);cm._validators.push({validateBinding:function(g){if(!g.get()){return ok()}var lb=g.binding(p.id);if(service.isVisible(lb.type(),lb)){var res=v.validateBinding(lb);if(!res.path){res.path=p.id}else{res.path=p.id+"."+res.path}return res}return ok()}})})}else if(service.isArray(rs)){cm._validators.push({validateBinding:function(g){var value=g.get();if(value){var toVal=value;if(!Array.isArray(value)){toVal=[value]}var bnd=new types.Binding("");var ct={id:"",type:service.componentType(rs),owningCollection:g.collectionBinding(),uniquinessException:bnd};bnd._type=ct;bnd.context=g;var componentValidator=exports.INSTANCE.validator(ct);var statuses=[];toVal.forEach(function(el,i){bnd.value=el;var rs=componentValidator.validateBinding(bnd);if(!rs.valid){statuses.push(error(service.caption(ct)+" "+service.label(el,ct)+" has problems ("+rs.message+")","["+i+"]",g.uid(),[rs]))}});statuses=statuses.filter(function(x){return x.severity==types.Severity.ERROR});if(statuses.length>0){return error(statuses.map(function(x){return x.message}).join(","),g.uid(),"",statuses)}return ok()}return ok()}})}else if(service.isMap(rs)){cm._validators.push({validateBinding:function(g){var value=g.collectionBinding().workingCopy();if(value){var toVal=value;if(!Array.isArray(value)){toVal=[value]}var bnd=new types.Binding("");var ct={id:"",type:g.collectionBinding().componentType(),owningCollection:g.collectionBinding(),uniquinessException:bnd};bnd._type=ct;bnd.context=g;var componentValidator=exports.INSTANCE.validator(bnd.type());var statuses=[];toVal.forEach(function(el,i){bnd.value=el;var rs=componentValidator.validateBinding(bnd);if(!rs.valid){statuses.push(error(service.caption(bnd.type())+" "+service.label(el,bnd.type())+" has problems ("+rs.message+")",g.uid(),"["+i+"]",[rs]))}});statuses=statuses.filter(function(x){return x.severity==types.Severity.ERROR});if(statuses.length>0){return error(statuses.map(function(x){return x.message}).join(","),g.uid(),"",statuses)}return ok()}return ok()}})}return cm};ValidationManager.prototype.toVal=function(instanceValidator){if(typeof instanceValidator=="string"){return{validateBinding:function(g){var clc=types.calcExpression(instanceValidator,g);if(!clc){return error("Some error","")}return ok()}}}else if(Array.isArray(instanceValidator)){var cmpVal=new CompositeValidator;var vals=instanceValidator;vals.forEach(function(x){var vl={validateBinding:function(g){var clc=types.calcExpression(instanceValidator,g);if(!clc){return error("Some error","")}return ok()}};cmpVal._validators.push(vl)});return cmpVal}return instanceValidator};return ValidationManager}();exports.ValidationManager=ValidationManager;exports.INSTANCE=new ValidationManager},{"./decorators":22,"./types":26,"./typesService":27}],30:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18}],31:[function(require,module,exports){(function(root,pluralize){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){module.exports=pluralize()}else if(typeof define==="function"&&define.amd){define(function(){return pluralize()})}else{root.pluralize=pluralize()}})(this,function(){var pluralRules=[];var singularRules=[];var uncountables={};var irregularPlurals={};var irregularSingles={};function toTitleCase(str){return str.charAt(0).toUpperCase()+str.substr(1).toLowerCase()}function sanitizeRule(rule){if(typeof rule==="string"){return new RegExp("^"+rule+"$","i")}return rule}function restoreCase(word,token){if(word===token){return token}if(word===word.toUpperCase()){return token.toUpperCase()}if(word[0]===word[0].toUpperCase()){return toTitleCase(token)}return token.toLowerCase()}function interpolate(str,args){return str.replace(/\$(\d{1,2})/g,function(match,index){return args[index]||""})}function sanitizeWord(token,word,collection){if(!token.length||uncountables.hasOwnProperty(token)){return word}var len=collection.length;while(len--){var rule=collection[len];if(rule[0].test(word)){return word.replace(rule[0],function(match,index,word){var result=interpolate(rule[1],arguments);if(match===""){return restoreCase(word[index-1],result)}return restoreCase(match,result)})}}return word}function replaceWord(replaceMap,keepMap,rules){return function(word){var token=word.toLowerCase();if(keepMap.hasOwnProperty(token)){return restoreCase(word,token)}if(replaceMap.hasOwnProperty(token)){return restoreCase(word,replaceMap[token])}return sanitizeWord(token,word,rules)}}function pluralize(word,count,inclusive){var pluralized=count===1?pluralize.singular(word):pluralize.plural(word);return(inclusive?count+" ":"")+pluralized}pluralize.plural=replaceWord(irregularSingles,irregularPlurals,pluralRules);pluralize.singular=replaceWord(irregularPlurals,irregularSingles,singularRules);pluralize.addPluralRule=function(rule,replacement){pluralRules.push([sanitizeRule(rule),replacement])};pluralize.addSingularRule=function(rule,replacement){singularRules.push([sanitizeRule(rule),replacement])};pluralize.addUncountableRule=function(word){if(typeof word==="string"){uncountables[word.toLowerCase()]=true;return}pluralize.addPluralRule(word,"$0");pluralize.addSingularRule(word,"$0")};pluralize.addIrregularRule=function(single,plural){plural=plural.toLowerCase();single=single.toLowerCase();irregularSingles[single]=plural;irregularPlurals[plural]=single};[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(rule){return pluralize.addIrregularRule(rule[0],rule[1])});[[/s?$/i,"s"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(rule){return pluralize.addPluralRule(rule[0],rule[1])});[[/s$/i,""],[/(ss)$/i,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/i,"$1sis"],[/(^analy)(?:sis|ses)$/i,"$1sis"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(e[mn]u)s?$/i,"$1"],[/(movie|twelve)s$/i,"$1"],[/(cris|test|diagnos)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(rule){return pluralize.addSingularRule(rule[0],rule[1])});["advice","adulthood","agenda","aid","alcohol","ammo","athletics","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","commerce","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","traffic","transporation","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pox$/i,/ois$/i,/deer$/i,/fish$/i,/sheep$/i,/measles$/i,/[^aeiou]ese$/i].forEach(pluralize.addUncountableRule);return pluralize})},{}],32:[function(require,module,exports){var root;if(typeof window!=="undefined"){root=window}else if(typeof self!=="undefined"){root=self}else{console.warn("Using browser-only version of superagent in non-browser environment");root=this}var Emitter=require("emitter");var RequestBase=require("./request-base");var isObject=require("./is-object");var isFunction=require("./is-function");var ResponseBase=require("./response-base");var shouldRetry=require("./should-retry");function noop(){}var request=exports=module.exports=function(method,url){if("function"==typeof url){return new exports.Request("GET",method).end(url)}if(1==arguments.length){return new exports.Request("GET",method)}return new exports.Request(method,url)};exports.Request=Request;request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!=root.location.protocol||!root.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}throw Error("Browser-only verison of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj){pushEncodedKeyValuePair(pairs,key,obj[key])}return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(val!=null){if(Array.isArray(val)){val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)})}else if(isObject(val)){for(var subkey in val){pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey])}}else{pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}}else if(val===null){pairs.push(encodeURIComponent(key))}}request.serializeObject=serialize;function parseString(str){var obj={};var pairs=str.split("&");var pair;var pos;for(var i=0,len=pairs.length;i<len;++i){pair=pairs[i];pos=pair.indexOf("=");if(pos==-1){obj[decodeURIComponent(pair)]=""}else{obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1))}}return obj}request.parseString=parseString;request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};request.serialize={
"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify};request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse};function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i){line=lines[i];index=line.indexOf(":");field=line.slice(0,index).toLowerCase();val=trim(line.slice(index+1));fields[field]=val}return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function Response(req){this.req=req;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType==="undefined"?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;var status=this.xhr.status;if(status===1223){status=204}this._setStatusProperties(status);this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this._setHeaderProperties(this.header);if(null===this.text&&req._responseType){this.body=this.xhr.response}else{this.body=this.req.method!="HEAD"?this._parseBody(this.text?this.text:this.xhr.response):null}}ResponseBase(Response.prototype);Response.prototype._parseBody=function(str){var parse=request.parse[this.type];if(this.req._parser){return this.req._parser(this,str)}if(!parse&&isJSON(this.type)){parse=request.parse["application/json"]}return parse&&str&&(str.length||str instanceof Object)?parse(str):null};Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg="cannot "+method+" "+url+" ("+this.status+")";var err=new Error(msg);err.status=this.status;err.method=method;err.url=url;return err};request.Response=Response;function Request(method,url){var self=this;this._query=this._query||[];this.method=method;this.url=url;this.header={};this._header={};this.on("end",function(){var err=null;var res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response");err.parse=true;err.original=e;if(self.xhr){err.rawResponse=typeof self.xhr.responseType=="undefined"?self.xhr.responseText:self.xhr.response;err.status=self.xhr.status?self.xhr.status:null;err.statusCode=err.status}else{err.rawResponse=null;err.status=null}return self.callback(err)}self.emit("response",res);var new_err;try{if(!self._isResponseOK(res)){new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err;new_err.response=res;new_err.status=res.status}}catch(e){new_err=e}if(new_err){self.callback(new_err,res)}else{self.callback(null,res)}})}Emitter(Request.prototype);RequestBase(Request.prototype);Request.prototype.type=function(type){this.set("Content-Type",request.types[type]||type);return this};Request.prototype.accept=function(type){this.set("Accept",request.types[type]||type);return this};Request.prototype.auth=function(user,pass,options){if(!options){options={type:"function"===typeof btoa?"basic":"auto"}}switch(options.type){case"basic":this.set("Authorization","Basic "+btoa(user+":"+pass));break;case"auto":this.username=user;this.password=pass;break}return this};Request.prototype.query=function(val){if("string"!=typeof val)val=serialize(val);if(val)this._query.push(val);return this};Request.prototype.attach=function(field,file,options){if(this._data){throw Error("superagent can't mix .send() and .attach()")}this._getFormData().append(field,file,options||file.name);return this};Request.prototype._getFormData=function(){if(!this._formData){this._formData=new root.FormData}return this._formData};Request.prototype.callback=function(err,res){if(this._maxRetries&&this._retries++<this._maxRetries&&shouldRetry(err,res)){return this._retry()}var fn=this._callback;this.clearTimeout();if(err){if(this._maxRetries)err.retries=this._retries-1;this.emit("error",err)}fn(err,res)};Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=true;err.status=this.status;err.method=this.method;err.url=this.url;this.callback(err)};Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){console.warn("This is not supported in browser version of superagent");return this};Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")};Request.prototype._appendQueryString=function(){var query=this._query.join("&");if(query){this.url+=(this.url.indexOf("?")>=0?"&":"?")+query}if(this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.substring(index+1).split("&");if(isFunction(this._sort)){queryArr.sort(this._sort)}else{queryArr.sort()}this.url=this.url.substring(0,index)+"?"+queryArr.join("&")}}};Request.prototype._isHost=function _isHost(obj){return obj&&"object"===typeof obj&&!Array.isArray(obj)&&Object.prototype.toString.call(obj)!=="[object Object]"};Request.prototype.end=function(fn){if(this._endCalled){console.warn("Warning: .end() was called twice. This is not supported in superagent")}this._endCalled=true;this._callback=fn||noop;this._appendQueryString();return this._end()};Request.prototype._end=function(){var self=this;var xhr=this.xhr=request.getXHR();var data=this._formData||this._data;this._setTimeouts();xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer){clearTimeout(self._responseTimeoutTimer)}if(4!=readyState){return}var status;try{status=xhr.status}catch(e){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")};var handleProgress=function(direction,e){if(e.total>0){e.percent=e.loaded/e.total*100}e.direction=direction;self.emit("progress",e)};if(this.hasListeners("progress")){try{xhr.onprogress=handleProgress.bind(null,"download");if(xhr.upload){xhr.upload.onprogress=handleProgress.bind(null,"upload")}}catch(e){}}try{if(this.username&&this.password){xhr.open(this.method,this.url,true,this.username,this.password)}else{xhr.open(this.method,this.url,true)}}catch(err){return this.callback(err)}if(this._withCredentials)xhr.withCredentials=true;if(!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"];var serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];if(!serialize&&isJSON(contentType)){serialize=request.serialize["application/json"]}if(serialize)data=serialize(data)}for(var field in this.header){if(null==this.header[field])continue;xhr.setRequestHeader(field,this.header[field])}if(this._responseType){xhr.responseType=this._responseType}this.emit("request",this);xhr.send(typeof data!=="undefined"?data:null);return this};request.get=function(url,data,fn){var req=request("GET",url);if("function"==typeof data)fn=data,data=null;if(data)req.query(data);if(fn)req.end(fn);return req};request.head=function(url,data,fn){var req=request("HEAD",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.options=function(url,data,fn){var req=request("OPTIONS",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};function del(url,data,fn){var req=request("DELETE",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req}request["del"]=del;request["delete"]=del;request.patch=function(url,data,fn){var req=request("PATCH",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.post=function(url,data,fn){var req=request("POST",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.put=function(url,data,fn){var req=request("PUT",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req}},{"./is-function":33,"./is-object":34,"./request-base":35,"./response-base":36,"./should-retry":37,emitter:39}],33:[function(require,module,exports){var isObject=require("./is-object");function isFunction(fn){var tag=isObject(fn)?Object.prototype.toString.call(fn):"";return tag==="[object Function]"}module.exports=isFunction},{"./is-object":34}],34:[function(require,module,exports){function isObject(obj){return null!==obj&&"object"===typeof obj}module.exports=isObject},{}],35:[function(require,module,exports){var isObject=require("./is-object");module.exports=RequestBase;function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype){obj[key]=RequestBase.prototype[key]}return obj}RequestBase.prototype.clearTimeout=function _clearTimeout(){clearTimeout(this._timer);clearTimeout(this._responseTimeoutTimer);delete this._timer;delete this._responseTimeoutTimer;return this};RequestBase.prototype.parse=function parse(fn){this._parser=fn;return this};RequestBase.prototype.responseType=function(val){this._responseType=val;return this};RequestBase.prototype.serialize=function serialize(fn){this._serializer=fn;return this};RequestBase.prototype.timeout=function timeout(options){if(!options||"object"!==typeof options){this._timeout=options;this._responseTimeout=0;return this}if("undefined"!==typeof options.deadline){this._timeout=options.deadline}if("undefined"!==typeof options.response){this._responseTimeout=options.response}return this};RequestBase.prototype.retry=function retry(count){if(arguments.length===0||count===true)count=1;if(count<=0)count=0;this._maxRetries=count;this._retries=0;return this};RequestBase.prototype._retry=function(){this.clearTimeout();if(this.req){this.req=null;this.req=this.request()}this._aborted=false;this.timedout=false;return this._end()};RequestBase.prototype.then=function then(resolve,reject){if(!this._fullfilledPromise){var self=this;if(this._endCalled){console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises")}this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){if(err)innerReject(err);else innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)};RequestBase.prototype.catch=function(cb){return this.then(undefined,cb)};RequestBase.prototype.use=function use(fn){fn(this);return this};RequestBase.prototype.ok=function(cb){if("function"!==typeof cb)throw Error("Callback required");this._okCallback=cb;return this};RequestBase.prototype._isResponseOK=function(res){if(!res){return false}if(this._okCallback){return this._okCallback(res)}return res.status>=200&&res.status<300};RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]};RequestBase.prototype.getHeader=RequestBase.prototype.get;RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field){this.set(key,field[key])}return this}this._header[field.toLowerCase()]=val;this.header[field]=val;return this};RequestBase.prototype.unset=function(field){delete this._header[field.toLowerCase()];delete this.header[field];return this};RequestBase.prototype.field=function(name,val){if(null===name||undefined===name){throw new Error(".field(name, val) name can not be empty")}if(this._data){console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()")}if(isObject(name)){for(var key in name){this.field(key,name[key])}return this}if(Array.isArray(val)){for(var i in val){this.field(name,val[i])}return this}if(null===val||undefined===val){throw new Error(".field(name, val) val can not be empty")}if("boolean"===typeof val){val=""+val}this._getFormData().append(name,val);return this};RequestBase.prototype.abort=function(){if(this._aborted){return this}this._aborted=true;this.xhr&&this.xhr.abort();this.req&&this.req.abort();this.clearTimeout();this.emit("abort");return this};RequestBase.prototype.withCredentials=function(){this._withCredentials=true;return this};RequestBase.prototype.redirects=function(n){this._maxRedirects=n;return this};RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};RequestBase.prototype.send=function(data){var isObj=isObject(data);var type=this._header["content-type"];if(this._formData){console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()")}if(isObj&&!this._data){if(Array.isArray(data)){this._data=[]}else if(!this._isHost(data)){this._data={}}}else if(data&&this._data&&this._isHost(this._data)){throw Error("Can't merge these send calls")}if(isObj&&isObject(this._data)){for(var key in data){this._data[key]=data[key]}}else if("string"==typeof data){if(!type)this.type("form");type=this._header["content-type"];if("application/x-www-form-urlencoded"==type){this._data=this._data?this._data+"&"+data:data}else{this._data=(this._data||"")+data}}else{this._data=data}if(!isObj||this._isHost(data)){return this}if(!type)this.type("json");return this};RequestBase.prototype.sortQuery=function(sort){this._sort=typeof sort==="undefined"?true:sort;return this};RequestBase.prototype._timeoutError=function(reason,timeout){if(this._aborted){return}var err=new Error(reason+timeout+"ms exceeded");err.timeout=timeout;err.code="ECONNABORTED";this.timedout=true;this.abort();this.callback(err)};RequestBase.prototype._setTimeouts=function(){var self=this;if(this._timeout&&!this._timer){this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout)},this._timeout)}if(this._responseTimeout&&!this._responseTimeoutTimer){this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout)},this._responseTimeout)}}},{"./is-object":34}],36:[function(require,module,exports){var utils=require("./utils");module.exports=ResponseBase;function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype){obj[key]=ResponseBase.prototype[key]}return obj}ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]};ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)this[key]=params[key];this.links={};try{if(header.link){this.links=utils.parseLinks(header.link)}}catch(err){}};ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status;this.statusType=type;this.info=1==type;this.ok=2==type;this.redirect=3==type;this.clientError=4==type;this.serverError=5==type;this.error=4==type||5==type?this.toError():false;this.accepted=202==status;this.noContent=204==status;this.badRequest=400==status;this.unauthorized=401==status;this.notAcceptable=406==status;this.forbidden=403==status;this.notFound=404==status}},{"./utils":38}],37:[function(require,module,exports){var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];module.exports=function shouldRetry(err,res){if(err&&err.code&&~ERROR_CODES.indexOf(err.code))return true;if(res&&res.status&&res.status>=500)return true;if(err&&"timeout"in err&&err.code=="ECONNABORTED")return true;return false}},{}],38:[function(require,module,exports){exports.type=function(str){return str.split(/ *; */).shift()};exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */);var key=parts.shift();var val=parts.shift();if(key&&val)obj[key]=val;return obj},{})};exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */);var url=parts[0].slice(1,-1);var rel=parts[1].split(/ *= */)[1].slice(1,-1);obj[rel]=url;return obj},{})};exports.cleanHeader=function(header,shouldStripCookie){delete header["content-type"];delete header["content-length"];delete header["transfer-encoding"];delete header["host"];if(shouldStripCookie){delete header["cookie"]}return header}},{}],39:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],40:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],41:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],42:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],43:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":42,_process:41,inherits:40}]},{},[8])(8)});
